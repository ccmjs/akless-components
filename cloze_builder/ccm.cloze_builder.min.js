(function(){const component={name:"cloze_builder",ccm:"https://ccmjs.github.io/ccm/versions/ccm-20.0.0.js",config:{html:{id:"main",class:"container-fluid",inner:[{class:"page-header",inner:{tag:"h2",inner:["Settings ",{tag:"small",class:"text-primary",inner:"Fill in the Blanks"}]}},{tag:"form",onsubmit:"%submit%",inner:[{tag:"input",type:"hidden",name:"data"},{tag:"input",type:"hidden",name:"onfinish"},{id:"navigation",class:"text-center",inner:{id:"buttons",class:"btn-group",inner:[{tag:"a",type:"button",id:"button-basic",class:"active btn btn-info",onclick:"%basic%",inner:"Basic"},{tag:"a",type:"button",id:"button-advanced",class:"btn btn-warning",onclick:"%advanced%",inner:"Advanced"}]}},{id:"section-basic",inner:{id:"text",class:"form-group",inner:[{tag:"label",id:"text-label",for:"text-input",class:"control-label",inner:"Your Text"},{tag:"span",id:"text-help",class:"help",inner:[{tag:"a",id:"text-icon",onclick:"%help%",inner:{class:"glyphicon glyphicon-info-sign"}},{id:"text-info",class:"alert alert-info",inner:[{tag:"p",inner:"Blanks are added with an asterix (*) in front and behind the correct word/phrase. Alternative answers are separated with a forward slash (/), e.g. “Hello, *World/Earth*!”"},{tag:"p",inner:"If you would like to show only certain letters of the solution word, put these letters into round brackets within the asterixs. In the following example, the three letters “o, r, d” of the solution word are already given in the text gap: “Hello, *W(or)l(d)*!”."}]}]},{id:"text-entry",class:"entry",inner:{tag:"textarea",class:"input form-control",id:"text-input",name:"text",placeholder:"Type here..."}}]}},{id:"section-advanced",class:"hide",inner:[{id:"user",class:"form-group",inner:[{tag:"label",id:"user-label",for:"user-input",class:"control-label",inner:"Sign On"},{tag:"span",id:"user-help",class:"help",inner:[{tag:"a",id:"user-icon",onclick:"%help%",inner:{class:"glyphicon glyphicon-info-sign"}},{id:"user-info",class:"alert alert-info",inner:["If you select a sign-on mode, authentication is requested after the completion of the fill-in-the-blank exercise and the results are only submitted if the login was successful. If you do not select a sign-on mode the results are not submitted.<br>The various sign-on modes are described below.",{tag:"h5",inner:"Guest Mode"},{tag:"p",inner:"The user can log in with any username and without a password. This mode is mostly used for demo scenarios."},{tag:"h5",inner:"H-BRS FB02"},{tag:"p",inner:"In this mode the user has to log in with a valid account from the Department of Computer Sciences at Hochschule Bonn-Rhein-Sieg, University of Applied Sciences."}]}]},{tag:"select",id:"user-input",class:"form-control",name:"user",onchange:"%change%",inner:[{tag:"option",inner:"None",value:""},{tag:"option",inner:"Guest Mode",value:"['ccm.instance','https://ccmjs.github.io/akless-components/user/versions/ccm.user-9.0.0.js',{'realm':'guest','title':'Guest Mode: Please enter any username'}]"},{tag:"option",inner:"H-BRS FB02",value:"['ccm.instance','https://ccmjs.github.io/akless-components/user/versions/ccm.user-9.0.0.js',{'realm':'hbrsinfkaul'}]"}]}]},{id:"css",class:"form-group",inner:[{tag:"label",id:"css-label",for:"css",class:"control-label",inner:"Layout"},{tag:"span",id:"css-help",class:"help",inner:[{tag:"a",id:"css-icon",onclick:"%help%",inner:{class:"glyphicon glyphicon-info-sign"}},{id:"css-info",class:"alert alert-info",inner:"Choose between a layout format for your fill-in-the-blank exercise."}]},{tag:"select",id:"css-input",class:"form-control",name:"css",onchange:"%change%",inner:[{tag:"option",inner:"Default",value:"['ccm.load','https://ccmjs.github.io/akless-components/cloze/resources/default.css']"},{tag:"option",inner:"LEA-like",value:"['ccm.load','https://ccmjs.github.io/akless-components/cloze/resources/lea.css']"},{tag:"option",inner:"PBWorks-like",value:"['ccm.load','https://ccmjs.github.io/akless-components/cloze/resources/pbworks.css']"}]}]},{id:"time",class:"form-group",inner:[{tag:"label",id:"time-label",for:"time-input",class:"control-label",inner:"Time Limit"},{tag:"span",id:"time-help",class:"help",inner:[{tag:"a",id:"time-icon",onclick:"%help%",inner:{class:"glyphicon glyphicon-info-sign"}},{id:"time-info",class:"alert alert-info",inner:"Specify the number of seconds available to solve the fill-in-the-blank exercise. The remaining number of seconds is then displayed visually. When the time is up, the exercise is submitted automatically. If you do not specify a time limit, no time limit is set."}]},{tag:"input",type:"number",id:"time-input",class:"form-control",name:"time",onchange:"%change%",placeholder:"Time in seconds"}]},{id:"keywords",class:"form-group",inner:[{tag:"label",id:"keywords-label",for:"keywords-input",class:"control-label",inner:"Provided Answers"},{tag:"span",id:"keywords-help",class:"help",inner:[{tag:"a",id:"keywords-icon",onclick:"%help%",inner:{class:"glyphicon glyphicon-info-sign"}},{id:"keywords-info",class:"alert alert-info",inner:"Select whether the solution i.e. the words for the fill-in-the-blanks are already provided or if the users should enter the missing words. A list can be generated automatically or manually."}]},{id:"keywords-entry",inner:[{inner:{tag:"select",id:"keywords-input",class:"form-control",name:"keywords",onchange:"%change%",inner:[{tag:"option",inner:"None",value:"none"},{tag:"option",inner:"Auto generated",value:"auto"},{tag:"option",inner:"Manually",value:"manually"}]}},{inner:{tag:"input",type:"text",id:"manually-input",class:"form-control",name:"manually",placeholder:"Comma-separated list of provided answers",onchange:"%change%"}}]}]},{id:"feedback",class:"form-group",inner:[{tag:"label",id:"feedback-label",for:"feedback-input",class:"control-label",inner:"Feedback"},{tag:"span",id:"feedback-help",class:"help",inner:[{tag:"a",id:"feedback-icon",onclick:"%help%",inner:{class:"glyphicon glyphicon-info-sign"}},{id:"feedback-info",class:"alert alert-info",inner:"Choose whether direct feedback should be displayed for the solution. The solution can then be submitted via a submit button. You can choose feedback should only be provided or the correct solution should also be displayed."}]},{tag:"select",id:"feedback-input",class:"form-control",name:"feedback",onchange:"%change%",inner:[{tag:"option",inner:"None",value:"none"},{tag:"option",inner:"Show only correctness",value:"correctness"},{tag:"option",inner:"Show only correctness with retry",value:"retry"},{tag:"option",inner:"Show correctness and solutions",value:"solutions"}]}]},{id:"captions.retry",class:"form-group",inner:[{tag:"label",id:"captions.retry-label",for:"captions.retry-input",class:"control-label",inner:"Retry Button Label"},{tag:"span",id:"captions.retry-help",class:"help",inner:[{tag:"a",id:"captions.retry-icon",onclick:"%help%",inner:{class:"glyphicon glyphicon-info-sign"}},{id:"captions.retry-info",class:"alert alert-info",inner:"Specify the caption of the retry button, which allows the values ​​entered in the gaps to be changed again."}]},{tag:"input",type:"text",id:"captions.retry-input",class:"form-control",name:"captions.retry",placeholder:"Enter Button Label",onchange:"%change%"}]},{id:"captions.submit",class:"form-group",inner:[{tag:"label",id:"captions.submit-label",for:"captions.submit-input",class:"control-label",inner:"Submit Button Label"},{tag:"span",id:"captions.submit-help",class:"help",inner:[{tag:"a",id:"captions.submit-icon",onclick:"%help%",inner:{class:"glyphicon glyphicon-info-sign"}},{id:"captions.submit-info",class:"alert alert-info",inner:"Submit is offered as a default button but can be renamed."}]},{tag:"input",type:"text",id:"captions.submit-input",class:"form-control",name:"captions.submit",placeholder:"Enter Button Label",onchange:"%change%"}]},{id:"grid",inner:[{id:"blank",class:"form-inline",inner:[{tag:"label",id:"blank-label",for:"blank-input",class:"control-label",inner:"Blank Gaps"},{tag:"a",id:"blank-icon",onclick:"%help%",inner:{class:"glyphicon glyphicon-info-sign"}},{id:"blank-entry",class:"checkbox",inner:{tag:"input",type:"checkbox",id:"blank-input",name:"blank",onchange:"%change%"}},{id:"blank-info",class:"alert alert-info",inner:"The length of the gaps can be displayed in a standard-length format or according to the number of characters of each word.<br>If Blank Gaps is selected, no characters of the gap will be displayed."}]},{id:"start_button",class:"form-inline",inner:[{tag:"label",id:"start_button-label",for:"start_button-input",class:"control-label",inner:"Start Button"},{tag:"a",id:"start_button-icon",onclick:"%help%",inner:{class:"glyphicon glyphicon-info-sign"}},{id:"start_button-entry",class:"checkbox",inner:{tag:"input",type:"checkbox",id:"start_button-input",name:"start_button",onchange:"%change%"}},{id:"start_button-info",class:"alert alert-info",inner:"If you select this option, the fill-in-the-blank exercise is only displayed after clicking the start button.<br>If this option is selected, the caption of the start button can be adjusted via the lower input field."}]},{id:"onfinish.restart",class:"form-inline",inner:[{tag:"label",id:"onfinish.restart-label",for:"onfinish.restart-input",class:"control-label",inner:"Restart after Finish"},{tag:"a",id:"onfinish.restart-icon",onclick:"%help%",inner:{class:"glyphicon glyphicon-info-sign"}},{id:"onfinish.restart-entry",class:"checkbox",inner:{tag:"input",type:"checkbox",id:"onfinish.restart-input",name:"onfinish.restart",onchange:"%change%"}},{id:"onfinish.restart-info",class:"alert alert-info",inner:"Select this option to add a finish button to the fill-in-the-blank exercise that allows you to restart the exercise.<br>The label of the finish button can be adjusted via the lower input field."}]},{},{inner:{id:"captions.start",class:"form-group",inner:{tag:"input",type:"text",id:"captions.start-input",class:"form-control",name:"captions.start",placeholder:"Enter Button Label",onchange:"%change%"}}},{inner:{id:"captions.finish",class:"form-group",inner:{tag:"input",type:"text",id:"captions.finish-input",class:"form-control",name:"captions.finish",placeholder:"Enter Button Label",onchange:"%change%"}}}]}]},{id:"section-preview",inner:[{tag:"legend",id:"preview-legend",class:"text-primary",inner:"Here's a Preview of what you've Build"},{id:"preview"}]},{id:"section-submit",class:"form-group",inner:{class:"col-md-12 text-right",inner:{tag:"input",type:"submit",id:"button-submit",class:"btn btn-primary"}}}]}]},css:["ccm.load","https://ccmjs.github.io/akless-components/libs/bootstrap/css/bootstrap.css",{context:"head",url:"https://ccmjs.github.io/akless-components/libs/bootstrap/css/font-face.css"},"https://ccmjs.github.io/akless-components/cloze_builder/resources/default.css"],editor:["ccm.component","https://ccmjs.github.io/tkless-components/editor/versions/ccm.editor-3.1.0.js",{editor:["ccm.load",[["https://ccmjs.github.io/akless-components/libs/highlight/darcula.min.css","https://ccmjs.github.io/akless-components/libs/highlight/highlight.min.js"],["https://ccmjs.github.io/akless-components/libs/quill/quill.min.js","https://ccmjs.github.io/akless-components/libs/quill/quill.snow.css"]]],"settings.modules.toolbar":[[{header:[1,2,3,4,5,6,false]}],["bold","italic","underline"],[{header:1},{header:2}],[{script:"sub"},{script:"super"}],[{color:[]},{background:[]}],["image"]],"settings.placeholder":"Type here..."}],target:["ccm.component","https://ccmjs.github.io/akless-components/cloze/versions/ccm.cloze-5.0.3.js"],submit_button:true,preview:true,ignore:{defaults:{text:"Hello, *(W)o(rl)d*! *Welcome*. This is an *Ex(amp)le*.",feedback:true,retry:true,captions:{start:"Start",submit:"Submit",retry:"Retry",finish:"Restart"}}}},Instance:function(){let $;let editor;this.ready=(async()=>{$=this.ccm.helper;this.logger&&this.logger.log("ready",$.privatize(this,true))});this.start=(async()=>{const self=this;let dataset=await $.dataset(this.data);this.logger&&this.logger.log("start",$.clone(dataset));prepareValues();$.setContent(this.element,$.html(this.html,{basic:()=>switchSection("#button-basic","#button-advanced","#section-basic","#section-advanced"),advanced:()=>switchSection("#button-advanced","#button-basic","#section-advanced","#section-basic"),submit:this.submit,change:onChange,help:function(){const this_a=this;[...self.element.querySelectorAll("a")].forEach(other_a=>other_a!==this_a&&other_a.classList.remove("active"));this.classList.toggle("active");self.logger&&self.logger.log("help",{name:this.id.split("-")[0],active:this.classList.contains("active")})}}));await prepareEditor();$.fillForm(this.element,dataset);setVisibility();if(this.preview)await updatePreview();else $.removeElement(this.element.querySelector("#section-preview"));!this.submit_button&&$.removeElement(this.element.querySelector("#button-submit"));if(typeof this.submit_button==="string")this.element.querySelector("#button-submit").value=this.submit_button;function prepareValues(){if(!$.deepValue(dataset,"data.key"))$.deepValue(self.ignore.defaults,"data.key",$.generateKey());dataset=$.integrate(self.ignore.defaults,dataset,true);dataset.data=$.stringify(dataset.data);dataset.onfinish=$.stringify(dataset.onfinish);$.encodeDependencies(dataset);if(Array.isArray(dataset.keywords))dataset.manually=dataset.keywords.join(", ");dataset.keywords=dataset.keywords?dataset.keywords===true?"auto":"manually":"none";dataset=$.toDotNotation(dataset);dataset.feedback=dataset.feedback?dataset.retry?"retry":dataset.solutions?"solutions":"correctness":"none";delete dataset.solutions}function switchSection(active,inactive,showed,hidden){self.element.querySelector(active).classList.add("active");self.element.querySelector(inactive).classList.remove("active");self.element.querySelector(showed).classList.remove("hide");self.element.querySelector(hidden).classList.add("hide");self.logger&&self.logger.log("section",showed.substr(1).split("-")[1])}async function prepareEditor(){const text_elem=self.element.querySelector("#text-entry");if(!self.editor)return;editor=await self.editor.start({root:text_elem});if(dataset.text){$.setContent(editor.get().root,dataset.text);delete dataset.text}$.wait(0,()=>editor.get().on("text-change",onChange))}async function onChange(){setVisibility();await updatePreview();self.onchange&&self.onchange();self.logger&&self.logger.log("change",{name:this.name||"text",value:this.name?this.type==="checkbox"?this.checked:this.value:editor.get().root.innerHTML})}function setVisibility(){getInputElementByName("manually").style.display=getInputElementByName("keywords").value==="manually"?"block":"none";self.element.querySelector("#captions\\.retry").style.display=getInputElementByName("feedback").value==="retry"?"block":"none";self.element.querySelector("#captions\\.submit").style.display=getInputElementByName("feedback").value!=="none"?"block":"none";self.element.querySelector("#captions\\.start").style.display=getInputElementByName("start_button").checked?"block":"none";self.element.querySelector("#captions\\.finish").style.display=getInputElementByName("onfinish.restart").checked?"block":"none";function getInputElementByName(name){return self.element.querySelector('[name="'+name+'"]')}}async function updatePreview(){if(!self.preview)return;const instance=await self.target.start(self.getValue());$.setContent(self.element.querySelector("#preview"),instance.root)}});this.submit=(event=>{event&&event.preventDefault();this.logger&&this.logger.log("finish",this.getValue());$.onFinish(this)});this.getValue=(()=>{let result=$.formData(this.element.querySelector("form"));result.text=editor.get().root.innerHTML;if(result.keywords==="manually"){const manually=result.manually.split(",");manually.map(keyword=>keyword.trim());result.keywords=manually}else result.keywords=result.keywords==="auto";delete result.manually;result.retry=result.feedback==="retry";result.solutions=result.feedback==="solutions";result.feedback=result.feedback!=="none";result=$.solveDotNotation(result);if(!result.user)result.user="";return $.clone(result)})}};let b="ccm."+component.name+(component.version?"-"+component.version.join("."):"")+".js";if(window.ccm&&null===window.ccm.files[b])return window.ccm.files[b]=component;(b=window.ccm&&window.ccm.components[component.name])&&b.ccm&&(component.ccm=b.ccm);"string"===typeof component.ccm&&(component.ccm={url:component.ccm});let c=(component.ccm.url.match(/(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)/)||["latest"])[0];if(window.ccm&&window.ccm[c])window.ccm[c].component(component);else{var a=document.createElement("script");document.head.appendChild(a);component.ccm.integrity&&a.setAttribute("integrity",component.ccm.integrity);component.ccm.crossorigin&&a.setAttribute("crossorigin",component.ccm.crossorigin);a.onload=function(){window.ccm[c].component(component);document.head.removeChild(a)};a.src=component.ccm.url}})();