import{reparentNodes}from"../lib/dom.js";import{isPrimitive}from"../lib/parts.js";import{directive,NodePart}from"../lit-html.js";const previousValues=new WeakMap;const isIe=window.navigator.userAgent.indexOf("Trident/")>0;export const unsafeSVG=directive(value=>part=>{if(!(part instanceof NodePart)){throw new Error("unsafeSVG can only be used in text bindings")}const previousValue=previousValues.get(part);if(previousValue!==undefined&&isPrimitive(value)&&value===previousValue.value&&part.value===previousValue.fragment){return}const template=document.createElement("template");const content=template.content;let svgElement;if(isIe){template.innerHTML=`<svg>${value}</svg>`;svgElement=content.firstChild}else{svgElement=document.createElementNS("http://www.w3.org/2000/svg","svg");content.appendChild(svgElement);svgElement.innerHTML=value}content.removeChild(svgElement);reparentNodes(content,svgElement.firstChild);const fragment=document.importNode(content,true);part.setValue(fragment);previousValues.set(part,{value:value,fragment:fragment})});