/*
Copyright (c) 2019 Daybrush
name: moveable
license: MIT
author: Daybrush
repository: git+https://github.com/daybrush/moveable.git
version: 0.27.2
*/
!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(t=t||self).Moveable=n()}(this,function(){"use strict";var r=function(t,n){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(t,n)};function i(t,n){function e(){this.constructor=t}r(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}var u=function(){return(u=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var i in n=arguments[e])Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t}).apply(this,arguments)};function e(n){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];return t.map(function(t){return t.split(" ").map(function(t){return t?""+n+t:""}).join(" ")}).join(" ")}function S(n,e){return function(t){t&&(n[e]=t)}}function o(n,e,r){return function(t){t&&(n[e][r]=t)}}function a(e,r){return function(t){var n=t.prototype;e.forEach(function(t){r(n,t)})}}var b=function(){function t(){this.keys=[],this.values=[]}var n=t.prototype;return n.get=function(t){return this.values[this.keys.indexOf(t)]},n.set=function(t,n){var e=this.keys,r=this.values,i=e.indexOf(t),o=-1===i?e.length:i;e[o]=t,r[o]=n},t}(),x=function(){function t(){this.object={}}var n=t.prototype;return n.get=function(t){return this.object[t]},n.set=function(t,n){this.object[t]=n},t}(),E="function"==typeof Map,f=function(){function t(){}var n=t.prototype;return n.connect=function(t,n){this.prev=t,this.next=n,t&&(t.next=this),n&&(n.prev=this)},n.disconnect=function(){var t=this.prev,n=this.next;t&&(t.next=n),n&&(n.prev=t)},n.getIndex=function(){for(var t=this,n=-1;t;)t=t.prev,++n;return n},t}();var y=function(){function t(t,n,e,r,i,o,a,s){this.prevList=t,this.list=n,this.added=e,this.removed=r,this.changed=i,this.maintained=o,this.changedBeforeAdded=a,this.fixed=s}var n=t.prototype;return Object.defineProperty(n,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(n,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),n.caculateOrdered=function(){var t,e,s,u,n=(t=this.changedBeforeAdded,e=this.fixed,s=[],u=[],t.forEach(function(t){var n=t[0],e=t[1],r=new f;s[n]=r,u[e]=r}),s.forEach(function(t,n){t.connect(s[n-1])}),t.filter(function(t,n){return!e[n]}).map(function(t,n){var e=t[0],r=t[1];if(e===r)return[0,0];var i=s[e],o=u[r-1],a=i.getIndex();return i.disconnect(),o?i.connect(o,o.next):i.connect(void 0,s[0]),[a,i.getIndex()]})),l=this.changed,c=[];this.cacheOrdered=n.filter(function(t,n){var e=t[0],r=t[1],i=l[n],o=i[0],a=i[1];if(e!==r)return c.push([o,a]),!0}),this.cachePureChanged=c},t}();function l(t,n,e){var r=E?Map:e?x:b,i=e||function(t){return t},o=[],a=[],s=[],u=t.map(i),l=n.map(i),c=new r,f=new r,p=[],d=[],h={},g=[],v=0,m=0;return u.forEach(function(t,n){c.set(t,n)}),l.forEach(function(t,n){f.set(t,n)}),u.forEach(function(t,n){var e=f.get(t);void 0===e?(++m,a.push(n)):h[e]=m}),l.forEach(function(t,n){var e=c.get(t);void 0===e?(o.push(n),++v):(s.push([e,n]),m=h[n]||0,p.push([e-m,n-v]),d.push(n===e),e!==n&&g.push([e,n]))}),a.reverse(),new y(t,n,o,a,g,s,p,d)}var t=function(){function t(t,n){void 0===t&&(t=[]),this.findKeyCallback=n,this.list=[].slice.call(t)}return t.prototype.update=function(t){var n=[].slice.call(t),e=l(this.list,n,this.findKeyCallback);return this.list=n,e},t}(),n="string",s="number",c="undefined";function p(t){return typeof t===n}function h(t,r){return void 0===r&&(r="-"),t.replace(/([a-z])([A-Z])/g,function(t,n,e){return""+n+r+e.toLowerCase()})}var d=function(t,n){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(t,n)};function g(t,n){function e(){this.constructor=t}d(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}var v=function(){return(v=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var i in n=arguments[e])Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t}).apply(this,arguments)};function m(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e}function M(t,n){if(t===n)return!1;for(var e in t)if(!(e in n))return!0;for(var e in n)if(t[e]!==n[e])return!0;return!1}function C(i,o){var a=Object.keys(i),e=Object.keys(o),t=l(a,e,function(t){return t}),r={},s={},u={};return t.added.forEach(function(t){var n=e[t];r[n]=o[n]}),t.removed.forEach(function(t){var n=a[t];s[n]=i[n]}),t.maintained.forEach(function(t){var n=t[0],e=a[n],r=[i[e],o[e]];i[e]!==o[e]&&(u[e]=r)}),{added:r,removed:s,changed:u}}function D(t){t.forEach(function(t){t()})}function R(t){var n=0;return t.map(function(t){return null==t?"$compat"+ ++n:""+t})}function w(t,n,e,r){return p(t)||typeof t===s?new k("text_"+t,n,e,r,null,{}):new("string"==typeof t.type?A:t.type.prototype.render?_:F)(t.type,n,e,r,t.ref,t.props)}function O(t){var e=[];return t.forEach(function(t){var n;e=e.concat((n=t,Array.isArray(n)?O(t):t))}),e}function P(t){var n=t.className,e=m(t,["className"]);return null!=n&&(e.class=n),delete e.style,delete e.children,e}function G(t,n){if(!n)return t;for(var e in n)typeof t[e]===c&&(t[e]=n[e]);return t}function B(t,n){for(var e=[],r=2;r<arguments.length;r++)e[r-2]=arguments[r];var i=n||{},o=i.key,a=i.ref,s=m(i,["key","ref"]);return{type:t,key:o,ref:a,props:v(v({},s),{children:O(e).filter(function(t){return null!=t&&!1!==t})})}}var z=function(){function t(t,n,e,r,i,o){void 0===o&&(o={}),this.type=t,this.key=n,this.index=e,this.container=r,this.ref=i,this.props=o,this._providers=[]}var n=t.prototype;return n._should=function(t,n){return!0},n._update=function(t,n,e,r){if(this.base&&!p(n)&&!r&&!this._should(n.props,e))return!1;this.original=n,this._setState(e);var i=this.props;return p(n)||(this.props=n.props,this.ref=n.ref),this._render(t,this.base?i:{},e),!0},n._mounted=function(){var t=this.ref;t&&t(this.base)},n._setState=function(t){},n._updated=function(){var t=this.ref;t&&t(this.base)},n._destroy=function(){var t=this.ref;t&&t(null)},t}();function T(t){var n={},e={};for(var r in t)0===r.indexOf("on")?e[r.replace("on","").toLowerCase()]=t[r]:n[r]=t[r];return{attributes:n,events:e}}var k=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}g(n,t);var e=n.prototype;return e._render=function(t){var n=this,e=!this.base;return e&&(this.base=document.createTextNode(this.type.replace("text_",""))),t.push(function(){e?n._mounted():n._updated()}),!0},e._unmount=function(){this.base.parentNode.removeChild(this.base)},n}(z),A=function(n){function t(){var t=null!==n&&n.apply(this,arguments)||this;return t.events={},t._isSVG=!1,t}g(t,n);var e=t.prototype;return e.addEventListener=function(t,n){var e=this.events;e[t]=function(t){t.nativeEvent=t,n(t)},this.base.addEventListener(t,e[t])},e.removeEventListener=function(t){var n=this.events;this.base.removeEventListener(t,n[t]),delete n[t]},e._should=function(t){return M(this.props,t)},e._render=function(t,n){var e,r,i,o=this,a=!this.base;a&&(e=this._hasSVG(),this._isSVG=e,(i=this.props.portalContainer)||(r=this.type,i=e?document.createElementNS("http://www.w3.org/2000/svg",r):document.createElement(r)),this.base=i),L(this,this._providers,this.props.children,t,null);var s=this.base,u=T(n),l=u.attributes,c=u.events,f=T(this.props),p=f.attributes,d=f.events;return function(t,n,e){var r=C(t,n),i=r.added,o=r.removed,a=r.changed;for(var s in i)e.setAttribute(s,i[s]);for(var s in a)e.setAttribute(s,a[s][1]);for(var s in o)e.removeAttribute(s)}(P(l),P(p),s),function(t,n,e){var r=C(t,n),i=r.added,o=r.removed,a=r.changed;for(var s in o)e.removeEventListener(s);for(var s in i)e.addEventListener(s,i[s]);for(var s in a)e.removeEventListener(s),e.addEventListener(s,a[s][1]);for(var s in o)e.removeEventListener(s)}(c,d,this),function(t,n,e){var r=e.style,i=C(t,n),o=i.added,a=i.removed,s=i.changed;for(var u in o){var l=h(u,"-");r.setProperty?r.setProperty(l,o[u]):r[l]=o[u]}for(var u in s){l=h(u,"-");r.setProperty?r.setProperty(l,s[u][1]):r[l]=s[u][1]}for(var u in a){l=h(u,"-");r.removeProperty?r.removeProperty(l):r[l]=""}}(n.style||{},this.props.style||{},s),t.push(function(){a?o._mounted():o._updated()}),!0},e._unmount=function(){var t=this.events,n=this.base;for(var e in t)n.removeEventListener(e,t[e]);this._providers.forEach(function(t){t._unmount()}),this.events={},this.props.portalContainer||n.parentNode.removeChild(n)},e._hasSVG=function(){if(this._isSVG||"svg"===this.type)return!0;var t=I(this.container);return t&&"ownerSVGElement"in t},t}(z);function I(t){if(!t)return null;var n=t.base;return n instanceof Node?n:I(t.container)}function N(t){if(!t)return null;if(t instanceof Node)return t;var n=t.$_provider._providers;return n.length?N(n[0].base):null}var F=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}g(n,t);var e=n.prototype;return e._render=function(t){var n=this.type(this.props);return L(this,this._providers,n?[n]:[],t),!0},e._unmount=function(){this._providers.forEach(function(t){t._unmount()})},n}(z),j=function(e){function t(t){var n=e.call(this,"container","container",0,null)||this;return n.base=t,n}g(t,e);var n=t.prototype;return n._render=function(){return!0},n._unmount=function(){},t}(z),_=function(a){function t(t,n,e,r,i,o){return void 0===o&&(o={}),a.call(this,t,n,e,r,i,G(o,t.defaultProps))||this}g(t,a);var n=t.prototype;return n._should=function(t,n){return this.base.shouldComponentUpdate(G(t,this.type.defaultProps),n||this.base.state)},n._render=function(t,n,e){var r=this;this.props=G(this.props,this.type.defaultProps);var i=!this.base;i?(this.base=new this.type(this.props),this.base.$_provider=this):this.base.props=this.props;var o=this.base,a=o.state,s=o.render();s&&s.props&&!s.props.children.length&&(s.props.children=this.props.children),L(this,this._providers,s?[s]:[],t,e,null),t.push(function(){i?(r._mounted(),o.componentDidMount()):(r._updated(),o.componentDidUpdate(n,a))})},n._setState=function(t){t&&(this.base.state=t)},n._unmount=function(){this._providers.forEach(function(t){t._unmount()}),clearTimeout(this.base.$_timer),this.base.componentWillUnmount()},t}(z),Y=function(){function t(t){void 0===t&&(t={}),this.props=t,this.state={},this.$_timer=0,this.$_state={}}var n=t.prototype;return n.shouldComponentUpdate=function(t,n){return!0},n.render=function(){return null},n.setState=function(t,n,e){var r=this;this.$_timer||(this.$_state={}),clearTimeout(this.$_timer),this.$_timer=0,this.$_state=v(v({},this.$_state),t),e?this.$_setState(n,e):this.$_timer=setTimeout(function(){r.$_timer=0,r.$_setState(n,e)})},n.forceUpdate=function(t){this.setState({},t,!0)},n.componentDidMount=function(){},n.componentDidUpdate=function(t,n){},n.componentWillUnmount=function(){},n.$_setState=function(t,n){var e=[],r=this.$_provider;L(r.container,[r],[r.original],e,v(v({},this.state),this.$_state),n)&&(t&&e.push(t),D(e))},t}(),q=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return g(n,t),n.prototype.shouldComponentUpdate=function(t,n){return M(this.props,t)||M(this.state,n)},n}(Y),X=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}g(n,t);var e=n.prototype;return e.componentDidMount=function(){var t=this.props,n=t.element,e=t.container;this._portalProvider=new j(e),H(n,e,this._portalProvider)},e.componentDidUpdate=function(){var t=this.props;H(t.element,t.container,this._portalProvider)},e.componentWillUnmount=function(){H(null,this.props.container,this._portalProvider),this._portalProvider=null},n}(q);function W(i,a,o){var s=o.map(function(t){return p(t)?null:t.key}),t=l(R(a.map(function(t){return t.key})),R(s),function(t){return t});t.removed.forEach(function(t){a.splice(t,1)[0]._unmount()}),t.ordered.forEach(function(t){var n=t[0],e=t[1],r=a.splice(n,1)[0];a.splice(e,0,r);var i=N(r.base),o=N(a[e+1]&&a[e+1].base);i&&i.parentNode.insertBefore(i,o)}),t.added.forEach(function(t){a.splice(t,0,w(o[t],s[t],t,i))});var n=t.maintained.filter(function(t){t[0];var n=t[1],e=o[n],r=a[n];return(p(e)?"text_"+e:e.type)!==r.type?(r._unmount(),a.splice(n,1,w(e,s[n],n,i)),!0):(r.index=n,!1)});return function(){for(var t=0,n=0,e=arguments.length;n<e;n++)t+=arguments[n].length;for(var r=Array(t),i=0,n=0;n<e;n++)for(var o=arguments[n],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}(t.added,n.map(function(t){t[0];return t[1]}))}function L(i,o,e,r,a,s){var t=W(i,o,e),n=o.filter(function(t,n){return t._update(r,e[n],a,s)}),u=I(i);return u&&t.reverse().forEach(function(t){var n,e=o[t],r=N(e.base);r&&(u===r||r.parentNode||(n=function(t,n){for(var e=t._providers,r=e.length,i=n.index+1;i<r;++i){var o=N(e[i].base);if(o)return o}return null}(i,e),u.insertBefore(r,n)))}),0<n.length}function H(t,n,e){void 0===e&&(e=n.__REACT_COMPAT__);var r,i,o,a,s=!!e;return e=e||new j(n),i=t?[t]:[],a=[],L(r=e,r._providers,i,a,o),D(a),s||(n.__REACT_COMPAT__=e),e}function V(t,n,e){var r=n.__REACT_COMPAT__;t&&!r&&(n.innerHTML=""),H(t,n,r),e&&e()}var U="simple-1.1.0";function $(t,n){for(var e=t.length,r=0;r<e;++r)if(n(t[r],r))return!0;return!1}function Z(t,n){for(var e=t.length,r=0;r<e;++r)if(n(t[r],r))return t[r];return null}function K(t,n){try{return new RegExp(t,"g").exec(n)}catch(t){return null}}function J(t){return t.replace(/_/g,".")}function Q(t,i){var o=null,a="-1";return $(t,function(t){var n,e,r=K("("+t.test+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",i);return r&&!t.brand&&(o=t,a=r[3]||"-1",t.versionAlias?a=t.versionAlias:t.versionTest&&(n=t.versionTest.toLowerCase(),e=K("("+n+")((?:\\/|\\s|:)([0-9|\\.|_]+))",i),a=(e?e[3]:"")||a),a=J(a),1)}),{preset:o,version:a}}function tt(t,e){var r={brand:"",version:"-1"};return $(t,function(t){var n=nt(e,t);return n&&(r.brand=t.id,r.version=t.versionAlias||n.version,"-1"!==r.version)}),r}function nt(t,e){return Z(t,function(t){var n=t.brand;return K(""+e.test,n.toLowerCase())})}var et=[{test:"phantomjs",id:"phantomjs"},{test:"whale",id:"whale"},{test:"edgios|edge|edg",id:"edge"},{test:"msie|trident|windows phone",id:"ie",versionTest:"iemobile|msie|rv"},{test:"miuibrowser",id:"miui browser"},{test:"samsungbrowser",id:"samsung internet"},{test:"samsung",id:"samsung internet",versionTest:"version"},{test:"chrome|crios",id:"chrome"},{test:"firefox|fxios",id:"firefox"},{test:"android",id:"android browser",versionTest:"version"},{test:"safari|iphone|ipad|ipod",id:"safari",versionTest:"version"}],rt=[{test:"(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\schrome)",id:"chrome",versionTest:"chrome"},{test:"chromium",id:"chrome"},{test:"whale",id:"chrome",versionAlias:"-1",brand:!0}],it=[{test:"applewebkit",id:"webkit",versionTest:"applewebkit|safari"}],ot=[{test:"(?=(iphone|ipad))(?!(.*version))",id:"webview"},{test:"(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))",id:"webview"},{test:"webview",id:"webview"}],at=[{test:"windows phone",id:"windows phone"},{test:"windows 2000",id:"window",versionAlias:"5.0"},{test:"windows nt",id:"window"},{test:"iphone|ipad|ipod",id:"ios",versionTest:"iphone os|cpu os"},{test:"mac os x",id:"mac"},{test:"android",id:"android"},{test:"tizen",id:"tizen"},{test:"webos|web0s",id:"webos"}];function st(t){var n,e=function(t){var n=t;if(void 0===n){if("undefined"==typeof navigator||!navigator)return"";n=navigator.userAgent||""}return n.toLowerCase()}(t),r=!!/mobi/g.exec(e),i={name:"unknown",version:"-1",majorVersion:-1,webview:!!Q(ot,e).preset,chromium:!1,chromiumVersion:"-1",webkit:!1,webkitVersion:"-1"},o={name:"unknown",version:"-1",majorVersion:-1},a=Q(et,e),s=a.preset,u=a.version,l=Q(at,e),c=l.preset,f=l.version,p=Q(rt,e);return i.chromium=!!p.preset,i.chromiumVersion=p.version,i.chromium||(n=Q(it,e),i.webkit=!!n.preset,i.webkitVersion=n.version),c&&(o.name=c.id,o.version=f,o.majorVersion=parseInt(f,10)),s&&(i.name=s.id,i.version=u,i.webview&&"ios"===o.name&&"safari"!==i.name&&(i.webview=!1)),i.majorVersion=parseInt(i.version,10),{browser:i,os:o,isMobile:r,isHints:!1}}function ut(t){return void 0===t&&function(){if("undefined"!=typeof navigator&&navigator&&navigator.userAgentData){var t=navigator.userAgentData,n=t.brands||t.uaList;return n&&n.length}}()?function(t){var n=navigator.userAgentData,e=(n.uaList||n.brands).slice(),r=n.mobile||!1,i=e[0],o={name:i.brand,version:i.version,majorVersion:-1,webkit:!1,webkitVersion:"-1",chromium:!1,chromiumVersion:"-1",webview:!!tt(ot,e).brand},a={name:"unknown",version:"-1",majorVersion:-1};o.webkit=!o.chromium&&$(it,function(t){return nt(e,t)});var s,u,l,c=tt(rt,e);o.chromium=!!c.brand,o.chromiumVersion=c.version,o.chromium||(s=tt(it,e),o.webkit=!!s.brand,o.webkitVersion=s.version),t&&(u=t.platform.toLowerCase(),l=Z(at,function(t){return new RegExp(""+t.test,"g").exec(u)}),a.name=l?l.id:u,a.version=t.platformVersion);var f=tt(et,e);return f.brand&&(o.name=f.brand,o.version=t?t.uaFullVersion:f.version),"Linux armv8l"===navigator.platform?a.name="android":o.webkit&&(a.name=r?"ios":"mac"),"ios"===a.name&&o.webview&&(o.version="-1"),a.version=J(a.version),o.version=J(o.version),a.majorVersion=parseInt(a.version,10),o.majorVersion=parseInt(o.version,10),{browser:o,os:a,isMobile:r,isHints:!0}}():st(t)}var lt="function",ct="object",ft="string",pt="undefined",dt=[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}],ht=1e-7,gt={cm:function(t){return 96*t/2.54},mm:function(t){return 96*t/254},in:function(t){return 96*t},pt:function(t){return 96*t/72},pc:function(t){return 96*t/6},"%":function(t,n){return t*n/100},vw:function(t,n){return void 0===n&&(n=window.innerWidth),t/100*n},vh:function(t,n){return void 0===n&&(n=window.innerHeight),t/100*n},vmax:function(t,n){return void 0===n&&(n=Math.max(window.innerWidth,window.innerHeight)),t/100*n},vmin:function(t,n){return void 0===n&&(n=Math.min(window.innerWidth,window.innerHeight)),t/100*n}};function vt(t){return typeof t===pt}function mt(t){return t&&typeof t===ct}function bt(t){return Array.isArray(t)}function xt(t){return typeof t===ft}function Et(t){return typeof t===lt}function St(t,n,e,r,i){return yt(t,n,e)?e:function(i,o,t,a,s){for(var u,n=t;n<a;++n){var e=function(t){var n=o[t].trim();if(n===i.close&&!yt(i,o,t))return{value:t};var e=t,r=Pt(s,function(t){return t.open===n});if(r&&(e=St(r,o,t,a,s)),-1===e)return u=t,"break";u=t=e}(n);if(n=u,"object"==typeof e)return e.value;if("break"===e)break}return-1}(t,n,e+1,r,i)}function yt(t,n,e){if(!t.ignore)return null;var r=n.slice(Math.max(e-3,0),e+3).join("");return new RegExp(t.ignore).exec(r)}function Mt(t,n){var e=xt(n)?{separator:n}:n,r=e.separator,s=void 0===r?",":r,u=e.isSeparateFirst,l=e.isSeparateOnlyOpenClose,i=e.isSeparateOpenClose,c=void 0===i?l:i,o=e.openCloseCharacters,f=void 0===o?dt:o,a=f.map(function(t){var n=t.open,e=t.close;return n===e?n:n+"|"+e}).join("|"),p=new RegExp("(\\s*"+s+"\\s*|"+a+"|\\s+)","g"),d=t.split(p).filter(Boolean),h=d.length,g=[],v=[];function m(){return v.length&&(g.push(v.join("")),v=[])}for(var b,x=0;x<h;++x){var E=function(t){var n,e,r=d[t].trim(),i=t,o=Pt(f,function(t){return t.open===r}),a=Pt(f,function(t){return t.close===r});if(o){if(-1!==(i=St(o,d,t,h,f))&&c)return m()&&u?(b=t,"break"):(g.push(d.slice(t,i+1).join("")),t=i,u?(b=t,"break"):(b=t,"continue"))}else{if(a&&!yt(a,d,t))throw new Error("invalid format: "+a.close);if(n=r,!((""!==(e=s)&&" "!=e||""!==n&&" "!=n)&&n!==e||l))return m(),u?(b=t,"break"):(b=t,"continue")}-1===i&&(i=h-1),v.push(d.slice(t,i+1).join("")),b=t=i}(x),x=b;if("break"===E)break}return v.length&&g.push(v.join("")),g}function Ct(t){return Mt(t,"")}function Dt(t){return Mt(t,",")}function Rt(t){var n=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t);return!n||n.length<4?{}:{prefix:n[1],value:n[2],suffix:n[3]}}function wt(t){var n=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);if(!n)return{prefix:"",unit:"",value:NaN};var e=n[1],r=n[2];return{prefix:e,unit:n[3],value:parseFloat(r)}}function Ot(t,n,e){void 0===e&&(e=-1);for(var r=t.length,i=0;i<r;++i)if(n(t[i],i,t))return i;return e}function Pt(t,n,e){var r=Ot(t,n);return-1<r?t[r]:e}function Gt(t){if(Object.keys)return Object.keys(t);var n=[];for(var e in n)n.push(e);return n}function Bt(t,n){var e=wt(t),r=e.value,i=e.unit;if(mt(n)){var o=n[i];if(o){if(Et(o))return o(r);if(gt[i])return gt[i](r,o)}}else if("%"===i)return r*n/100;return gt[i]?gt[i](r):r}function zt(t,e,r){return[[Ft(e[0],ht),Ft(e[0]*t[1]/t[0],ht)],[Ft(e[1]*t[0]/t[1],ht),Ft(e[1],ht)]].filter(function(t){return t.every(function(t,n){return r?t<=e[n]:t>=e[n]})})[0]||t}function Tt(t,o,a,n){if(!n)return t.map(function(t,n){return e=t,r=o[n],i=a[n],Math.max(r,Math.min(e,i));var e,r,i});var e=t[0],r=t[1],i=zt(t,o,!1),s=i[0],u=i[1],l=zt(t,a,!0),c=l[0],f=l[1];return e<s||r<u?(e=s,r=u):(c<e||f<r)&&(e=c,r=f),[e,r]}function kt(t){for(var n=t.length,e=0,r=n-1;0<=r;--r)e+=t[r];return n?e/n:0}function At(t,n){var e=n[0]-t[0],r=n[1]-t[1],i=Math.atan2(r,e);return 0<=i?i:i+2*Math.PI}function It(t){var e,n=(e=t,[0,1].map(function(n){return kt(e.map(function(t){return t[n]}))})),r=At(n,t[0]),i=At(n,t[1]);return r<i&&i-r<Math.PI||i<r&&i-r<-Math.PI?1:-1}function Nt(t,n){return Math.sqrt(Math.pow((n?n[0]:0)-t[0],2)+Math.pow((n?n[1]:0)-t[1],2))}function Ft(t,n){return n?Math.round(t/n)*n:t}function jt(e,r){return e.forEach(function(t,n){e[n]=Ft(e[n],r)}),e}function _t(t,n){return t.classList?t.classList.contains(n):!!t.className.match(new RegExp("(\\s|^)"+n+"(\\s|$)"))}function Yt(t,n,e,r){t.removeEventListener(n,e,r)}var qt=1e-7;function Xt(t,n){return n?Math.round(t/n)*n:t}function Wt(t,n,e){void 0===e&&(e=Math.sqrt(t.length));for(var r=t.slice(),i=0;i<e;++i)r[i*e+n-1]=0,r[(n-1)*e+i]=0;return r[(n-1)*(e+1)]=1,r}function Lt(t,n){void 0===n&&(n=Math.sqrt(t.length));for(var e=t.slice(),r=pn(n),i=0;i<n;++i){var o=n*i+i;if(!Xt(e[o],qt))for(var a=i+1;a<n;++a)if(e[n*i+a]){!function(t,n,e,r,i){for(var o=0;o<i;++o){var a=e+o*i,s=r+o*i,u=t[a],l=n[a];t[a]=t[s],t[s]=u,n[a]=n[s],n[s]=l}}(e,r,i,a,n);break}if(!Xt(e[o],qt))return[];!function(t,n,e,r,i){for(var o=0;o<r;++o){var a=e+o*r;t[a]/=i,n[a]/=i}}(e,r,i,n,e[o]);for(a=0;a<n;++a){var s=a,u=e[a+i*n];Xt(u,qt)&&i!==a&&function(t,n,e,r,i,o){for(var a=0;a<i;++a){var s=e+a*i,u=r+a*i;t[s]+=t[u]*o,n[s]+=n[u]*o}}(e,r,s,i,n,-u)}}return r}function Ht(t,n){void 0===n&&(n=Math.sqrt(t.length));for(var e=[],r=t[n*n-1],i=0;i<n-1;++i)e[i]=t[n*(n-1)+i]/r;return e[n-1]=0,e}function Vt(t,n){for(var e=pn(n),r=0;r<n-1;++r)e[n*(n-1)+r]=t[r]||0;return e}function Ut(t,n){for(var e=t.slice(),r=t.length;r<n-1;++r)e[r]=0;return e[n-1]=1,e}function $t(t,n,e){if(void 0===n&&(n=Math.sqrt(t.length)),n===e)return t;for(var r=pn(e),i=Math.min(n,e),o=0;o<i-1;++o){for(var a=0;a<i-1;++a)r[o*e+a]=t[o*n+a];r[(o+1)*e-1]=t[(o+1)*n-1],r[(e-1)*e+o]=t[(n-1)*n+o]}return r[e*e-1]=t[n*n-1],r}function Zt(n){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];var r=pn(n);return t.forEach(function(t){r=Kt(r,t,n)}),r}function Kt(t,n,e){void 0===e&&(e=Math.sqrt(t.length));var r=[],i=t.length/e,o=n.length/i;if(!i)return n;if(!o)return t;for(var a=0;a<e;++a)for(var s=0;s<o;++s)for(var u=r[s*e+a]=0;u<i;++u)r[s*e+a]+=t[u*e+a]*n[s*i+u];return r}function Jt(t,n){for(var e=Math.min(t.length,n.length),r=t.slice(),i=0;i<e;++i)r[i]=r[i]+n[i];return r}function Qt(t,n){for(var e=Math.min(t.length,n.length),r=t.slice(),i=0;i<e;++i)r[i]=r[i]-n[i];return r}function tn(t,n){return void 0===n&&(n=6===t.length),n?[t[0],t[1],0,t[2],t[3],0,t[4],t[5],1]:t}function nn(t,n){return void 0===n&&(n=9===t.length),n?[t[0],t[1],t[3],t[4],t[6],t[7]]:t}function en(t,n,e){void 0===e&&(e=n.length);var r=Kt(t,n,e),i=r[e-1];return r.map(function(t){return t/i})}function rn(t,n){return Kt(t,[1,0,0,0,0,Math.cos(n),Math.sin(n),0,0,-Math.sin(n),Math.cos(n),0,0,0,0,1],4)}function on(t,n){return Kt(t,[Math.cos(n),0,-Math.sin(n),0,0,1,0,0,Math.sin(n),0,Math.cos(n),0,0,0,0,1],4)}function an(t,n){return Kt(t,fn(n,4))}function sn(t,n){var e=n[0],r=void 0===e?1:e,i=n[1],o=void 0===i?1:i,a=n[2];return Kt(t,[r,0,0,0,0,o,0,0,0,0,void 0===a?1:a,0,0,0,0,1],4)}function un(t,n){return en(fn(n,3),Ut(t,3))}function ln(t,n){var e=n[0],r=void 0===e?0:e,i=n[1],o=void 0===i?0:i,a=n[2];return Kt(t,[1,0,0,0,0,1,0,0,0,0,1,0,r,o,void 0===a?0:a,1],4)}function cn(t,n){return Kt(t,n,4)}function fn(t,n){var e=Math.cos(t),r=Math.sin(t),i=pn(n);return i[0]=e,i[1]=r,i[n]=-r,i[n+1]=e,i}function pn(t){for(var n=t*t,e=[],r=0;r<n;++r)e[r]=r%(t+1)?0:1;return e}function dn(t,n){for(var e=pn(n),r=Math.min(t.length,n-1),i=0;i<r;++i)e[(n+1)*i]=t[i];return e}function hn(t,n){for(var e=pn(n),r=Math.min(t.length,n-1),i=0;i<r;++i)e[n*(n-1)+i]=t[i];return e}function gn(t,n,e,r,i,o,a,s){var u=t[0],l=t[1],c=n[0],f=n[1],p=e[0],d=e[1],h=r[0],g=r[1],v=i[0],m=i[1],b=o[0],x=o[1],E=a[0],S=a[1],y=s[0],M=s[1],C=Lt([u,0,c,0,p,0,h,0,l,0,f,0,d,0,g,0,1,0,1,0,1,0,1,0,0,u,0,c,0,p,0,h,0,l,0,f,0,d,0,g,0,1,0,1,0,1,0,1,-v*u,-m*u,-b*c,-x*c,-E*p,-S*p,-y*h,-M*h,-v*l,-m*l,-b*f,-x*f,-E*d,-S*d,-y*g,-M*g],8);if(!C.length)return[];var D=Kt(C,[v,m,b,x,E,S,y,M],8);return D[8]=1,$t(function(t,n){void 0===n&&(n=Math.sqrt(t.length));for(var e=[],r=0;r<n;++r)for(var i=0;i<n;++i)e[i*n+r]=t[n*r+i];return e}(D),3,4)}var vn="string",mn=[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}];function bn(t,n,e,r,i){return xn(t,n,e)?e:function(i,o,t,a,s){for(var u,n=t;n<a;++n){var e=function(t){var n=o[t].trim();if(n===i.close&&!xn(i,o,t))return{value:t};var e=t,r=yn(s,function(t){return t.open===n});if(r&&(e=bn(r,o,t,a,s)),-1===e)return u=t,"break";u=t=e}(n);if(n=u,"object"==typeof e)return e.value;if("break"===e)break}return-1}(t,n,e+1,r,i)}function xn(t,n,e){if(!t.ignore)return null;var r=n.slice(Math.max(e-3,0),e+3).join("");return new RegExp(t.ignore).exec(r)}function En(t,n){var e=typeof n===vn?{separator:n}:n,r=e.separator,s=void 0===r?",":r,u=e.isSeparateFirst,l=e.isSeparateOnlyOpenClose,i=e.isSeparateOpenClose,c=void 0===i?l:i,o=e.openCloseCharacters,f=void 0===o?mn:o,a=f.map(function(t){var n=t.open,e=t.close;return n===e?n:n+"|"+e}).join("|"),p=new RegExp("(\\s*"+s+"\\s*|"+a+"|\\s+)","g"),d=t.split(p).filter(Boolean),h=d.length,g=[],v=[];function m(){return v.length&&(g.push(v.join("")),v=[])}for(var b,x=0;x<h;++x){var E=function(t){var n,e,r=d[t].trim(),i=t,o=yn(f,function(t){return t.open===r}),a=yn(f,function(t){return t.close===r});if(o){if(-1!==(i=bn(o,d,t,h,f))&&c)return m()&&u?(b=t,"break"):(g.push(d.slice(t,i+1).join("")),t=i,u?(b=t,"break"):(b=t,"continue"))}else{if(a&&!xn(a,d,t))throw new Error("invalid format: "+a.close);if(n=r,!((""!==(e=s)&&" "!=e||""!==n&&" "!=n)&&n!==e||l))return m(),u?(b=t,"break"):(b=t,"continue")}-1===i&&(i=h-1),v.push(d.slice(t,i+1).join("")),b=t=i}(x),x=b;if("break"===E)break}return v.length&&g.push(v.join("")),g}function Sn(t){return En(t,",")}function yn(t,n,e){var r=function(t,n,e){void 0===e&&(e=-1);for(var r=t.length,i=0;i<r;++i)if(n(t[i],i,t))return i;return e}(t,n);return-1<r?t[r]:e}function Mn(t){return Dn(Rn(t))}function Cn(t,n){var e=en(t,[n[0],n[1]||0,n[2]||0,1],4),r=e[3]||1;return[e[0]/r,e[1]/r,e[2]/r]}function Dn(t){var r=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return t.forEach(function(t){var n=t.matrixFunction,e=t.functionValue;n&&(r=n(r,e))}),r}function Rn(t){var n;return(n=t,Array.isArray(n)?t:En(t,"")).map(function(t){var n,e,r,i,o,a,s,u,l,c,f,p,d=!(n=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t))||n.length<4?{}:{prefix:n[1],value:n[2],suffix:n[3]},h=d.prefix,g=d.value,v=null,m=h,b="";return"translate"===h||"translateX"===h||"translate3d"===h?(v=ln,b=[(e=Sn(g).map(function(t){return parseFloat(t)}))[0],void 0===(r=e[1])?0:r,void 0===(i=e[2])?0:i]):"translateY"===h?(v=ln,b=[0,parseFloat(g),0]):"translateZ"===h?(v=ln,b=[0,0,parseFloat(g)]):"scale"===h||"scale3d"===h?(v=sn,b=[u=(o=Sn(g).map(function(t){return parseFloat(t)}))[0],void 0===(a=o[1])?u:a,void 0===(s=o[2])?1:s]):"scaleX"===h?(v=sn,b=[u=parseFloat(g),1,1]):"scaleY"===h?(v=sn,b=[1,parseFloat(g),1]):"scaleZ"===h?(v=sn,b=[1,1,parseFloat(g)]):"rotate"===h||"rotateZ"===h||"rotateX"===h||"rotateY"===h?(c=(l=function(t){var n=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);if(!n)return{prefix:"",unit:"",value:NaN};var e=n[1],r=n[2];return{prefix:e,unit:n[3],value:parseFloat(r)}}(g)).unit,f=l.value,"rotate"===h||"rotateZ"===h?(m="rotateZ",v=an):"rotateX"===h?v=rn:"rotateY"===h&&(v=on),b="rad"===c?f:f*Math.PI/180):"matrix3d"===h?(v=cn,b=Sn(g).map(function(t){return parseFloat(t)})):"matrix"===h?(v=cn,b=[(p=Sn(g).map(function(t){return parseFloat(t)}))[0],p[1],0,0,p[2],p[3],0,0,0,0,1,0,p[4],p[5],0,1]):m="",{name:h,functionName:m,value:g,matrixFunction:v,functionValue:b}})}var wn=function(t,n){return(wn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(t,n)};var On,Pn="function"==typeof Map?void 0:(On=0,function(t){return t.__DIFF_KEY__||(t.__DIFF_KEY__=++On)}),Gn=function(n){function t(){this.constructor=e}var e,r;function i(t){return void 0===t&&(t=[]),n.call(this,t,Pn)||this}return wn(e=i,r=n),e.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t),i}(t);function Bn(t,n){return l(t,n,Pn)}function zn(t,n,e){void 0===e&&(e=-1);for(var r=t.length,i=0;i<r;++i)if(n(t[i],i,t))return i;return e}function Tn(t,n){var e=n[0]-t[0],r=n[1]-t[1],i=Math.atan2(r,e);return 0<=i?i:i+2*Math.PI}function kn(t){return[0,1].map(function(n){return function(t){for(var n=t.length,e=0,r=n-1;0<=r;--r)e+=t[r];return n?e/n:0}(t.map(function(t){return t[n]}))})}function An(t){var n=kn(t),e=Tn(n,t[0]),r=Tn(n,t[1]);return e<r&&r-e<Math.PI||r<e&&r-e<-Math.PI?1:-1}function In(t,n){return Math.sqrt(Math.pow((n?n[0]:0)-t[0],2)+Math.pow((n?n[1]:0)-t[1],2))}function Nn(r){return r.length<3?0:Math.abs(function(t){for(var n=0,e=t.length-1;0<=e;--e)n+=t[e];return n}(r.map(function(t,n){var e=r[n+1]||r[0];return t[0]*e[1]-e[0]*t[1]})))/2}function Fn(t,n){var e=n.width,r=n.height,i=n.left,o=n.top,a=jn(t),s=a.minX,u=a.minY,l=a.maxX,c=a.maxY,f=e/(l-s),p=r/(c-u);return t.map(function(t){return[i+(t[0]-s)*f,o+(t[1]-u)*p]})}function jn(t){var n=t.map(function(t){return t[0]}),e=t.map(function(t){return t[1]});return{minX:Math.min.apply(Math,n),minY:Math.min.apply(Math,e),maxX:Math.max.apply(Math,n),maxY:Math.max.apply(Math,e)}}function _n(t,n,e){var i=t[0],o=t[1],r=jn(n),a=r.minX,s=r.minY,u=r.maxX,l=r.maxY,c=[[a,o],[u,o]],f=[[i,s],[i,l]],p=Yn(c[0],c[1]),d=Yn(f[0],f[1]),h=Wn(n),g=[],v=[];return h.forEach(function(t){var n=Yn(t[0],t[1]),e=Xn(qn(p,n),[c,t]),r=Xn(qn(d,n),[f,t]);1===e.length&&t[0][1]===o||g.push.apply(g,e),1===r.length&&t[0][0]===i||v.push.apply(v,r),n[0]||g.push.apply(g,e),n[1]||v.push.apply(v,r)}),!e&&(-1<zn(g,function(t){return t[0]===i})||-1<zn(v,function(t){return t[1]===o}))||!!(g.filter(function(t){return t[0]>i}).length%2&&v.filter(function(t){return t[1]>o}).length%2)}function Yn(t,n){var e=t[0],r=t[1],i=n[0],o=n[1];if(e===i&&r===o)return[0,0,0];if(e===i)return[1,0,-e];if(r===o)return[0,1,-r];var a=(i-e)/(r-o);return[1,a,-e-a*r]}function qn(t,n){var e,r,i=t[0],o=t[1],a=t[2],s=n[0],u=n[1],l=n[2],c=0===i&&0===s,f=0===o&&0===u;if(c&&f)return[];if(c){var p=-a/o;return p!=-l/u?[]:[[-1/0,p],[1/0,p]]}if(f){var d=-a/i;return d!=-l/s?[]:[[d,-1/0],[d,1/0]]}return 0!==i?0!==s?0!==o?0!==u?[[e=(o*l-u*a)/(u*i-o*s),r=-(i*e+a)/o]]:[[e=-l/s,r=-(i*e+a)/o]]:[[e=-a/i,r=-(s*e+l)/u]]:[[e=-(o*(r=-l/u)+a)/i,r]]:[[e=-(u*(r=-a/o)+l)/s,r]]}function Xn(t,n){var e=n.map(function(n){return[0,1].map(function(t){return[Math.min(n[0][t],n[1][t]),Math.max(n[0][t],n[1][t])]})});if(2===t.length){var r=t[0],i=r[0],o=r[1];if(i===t[1][0]){var a=Math.max.apply(Math,e.map(function(t){return t[1][0]})),s=Math.min.apply(Math,e.map(function(t){return t[1][1]}));return s<a?[]:[[i,a],[i,s]]}if(o===t[1][1]){var u=Math.max.apply(Math,e.map(function(t){return t[0][0]})),l=Math.min.apply(Math,e.map(function(t){return t[0][1]}));return l<u?[]:[[u,o],[l,o]]}}return t.filter(function(n){return e.every(function(t){return t[0][0]<=n[0]&&n[0]<=t[0][1]&&t[1][0]<=n[1]&&n[1]<=t[1][1]})})}function Wn(e){return function(){for(var t=0,n=0,e=arguments.length;n<e;n++)t+=arguments[n].length;for(var r=Array(t),i=0,n=0;n<e;n++)for(var o=arguments[n],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}(e.slice(1),[e[0]]).map(function(t,n){return[e[n],t]})}function Ln(t,n){return Nn(function(t,n){var e=t.slice(),s=n.slice();-1===An(e)&&e.reverse(),-1===An(s)&&s.reverse();var u=Wn(e),l=Wn(s),r=u.map(function(t){return Yn(t[0],t[1])}),c=l.map(function(t){return Yn(t[0],t[1])}),f=[];r.forEach(function(r,i){var o=u[i],a=[];c.forEach(function(t,n){var e=Xn(qn(r,t),[o,l[n]]);a.push.apply(a,e.map(function(t){return{index1:i,index2:n,pos:t}}))}),a.sort(function(t,n){return In(o[0],t.pos)-In(o[0],n.pos)}),f.push.apply(f,a),_n(o[1],s)&&f.push({index1:i,index2:-1,pos:o[1]})}),l.forEach(function(t,r){var i,n;_n(t[1],e)&&(i=!1,-1===(n=zn(f,function(t){return t.index2!==r?!!i:void(i=!0)}))&&(i=!1,n=zn(f,function(t){var n=t.index1,e=t.index2;if(-1!==n||e+1!==r)return!!i;i=!0})),-1===n?f.push({index1:-1,index2:r,pos:t[1]}):f.splice(n,0,{index1:-1,index2:r,pos:t[1]}))});var i=f.map(function(t){return t.pos}),o={};return i.filter(function(t){var n=t[0]+"x"+t[1];return!o[n]&&(o[n]=!0)})}(t,n))}function Hn(t){return t&&"object"==typeof t}var Vn=function(){return(Vn=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var i in n=arguments[e])Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t}).apply(this,arguments)};var Un=function(){function t(){this._events={}}var n=t.prototype;return n.on=function(t,n){if(Hn(t))for(var e in t)this.on(e,t[e]);else this._addEvent(t,n,{});return this},n.off=function(t,n){if(t)if(Hn(t))for(var e in t)this.off(e);else{var r,i;n?!(r=this._events[t])||-1<(i=function(t,n,e){void 0===e&&(e=-1);for(var r=t.length,i=0;i<r;++i)if(n(t[i],i,t))return i;return e}(r,function(t){return t.listener===n}))&&r.splice(i,1):this._events[t]=[]}else this._events={};return this},n.once=function(n,t){var e=this;return t&&this._addEvent(n,t,{once:!0}),new Promise(function(t){e._addEvent(n,t,{once:!0})})},n.emit=function(n,e){var r=this;void 0===e&&(e={});var t=this._events[n];if(!n||!t)return!0;var i=!1;return e.eventType=n,e.stop=function(){i=!0},e.currentTarget=this,function(){for(var t=0,n=0,e=arguments.length;n<e;n++)t+=arguments[n].length;for(var r=Array(t),i=0,n=0;n<e;n++)for(var o=arguments[n],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}(t).forEach(function(t){t.listener(e),t.once&&r.off(n,t.listener)}),!i},n.trigger=function(t,n){return void 0===n&&(n={}),this.emit(t,n)},n._addEvent=function(t,n,e){var r=this._events;r[t]=r[t]||[],r[t].push(Vn({listener:n},e))},t}();var $n=function(t,n){return($n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(t,n)};function Zn(t){var n=t.container;return n===document.body?[n.scrollLeft||document.documentElement.scrollLeft,n.scrollTop||document.documentElement.scrollTop]:[n.scrollLeft,n.scrollTop]}var Kn=function(n){function t(){this.constructor=e}var e,r;function i(){var t=null!==n&&n.apply(this,arguments)||this;return t.startRect=null,t.startPos=[],t.prevTime=0,t.timer=0,t}$n(e=i,r=n),e.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t);var o=i.prototype;return o.dragStart=function(t,n){var e,r=n.container,i=0,o=0,a=0,s=0;s=r===document.body?(a=window.innerWidth,window.innerHeight):(i=(e=r.getBoundingClientRect()).top,o=e.left,a=e.width,e.height),this.startPos=[t.clientX,t.clientY],this.startRect={top:i,left:o,width:a,height:s}},o.drag=function(t,n){var e=this,r=t.clientX,i=t.clientY,o=n.container,a=n.threshold,s=void 0===a?0:a,u=n.throttleTime,l=void 0===u?0:u,c=n.getScrollPosition,f=void 0===c?Zn:c,p=this.startRect,d=this.startPos,h=Date.now?Date.now():(new Date).getTime(),g=Math.max(l+this.prevTime-h,0),v=[0,0];if(p.top>i-s?(d[1]>p.top||i<d[1])&&(v[1]=-1):p.top+p.height<i+s&&(d[1]<p.top+p.height||i>d[1])&&(v[1]=1),p.left>r-s?(d[0]>p.left||r<d[0])&&(v[0]=-1):p.left+p.width<r+s&&(d[0]<p.left+p.width||r>d[0])&&(v[0]=1),clearTimeout(this.timer),!v[0]&&!v[1])return!1;if(0<g)return this.timer=window.setTimeout(function(){e.drag(t,n)},g),!1;this.prevTime=h;var m=f({container:o,direction:v});this.trigger("scroll",{container:o,direction:v,inputEvent:t});var b=f({container:o,direction:v}),x=b[0]-m[0],E=b[1]-m[1];return!(!x&&!E)&&(this.trigger("move",{offsetX:v[0]?x:0,offsetY:v[1]?E:0,inputEvent:t}),l&&(this.timer=window.setTimeout(function(){e.drag(t,n)},l)),!0)},o.dragEnd=function(){clearTimeout(this.timer)},i}(Un);function Jn(){return Date.now?Date.now():(new Date).getTime()}function Qn(t,n,e,r){t.addEventListener(n,e,r)}function te(t,n,e,r){t.removeEventListener(n,e,r)}var ne=function(t,n){return(ne=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(t,n)};var ee=function(){return(ee=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var i in n=arguments[e])Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t}).apply(this,arguments)};function re(t){return 180*(n=[t[0].clientX,t[0].clientY],e=[t[1].clientX,t[1].clientY],r=e[0]-n[0],i=e[1]-n[1],(0<=(o=Math.atan2(i,r))?o:o+2*Math.PI)/Math.PI);var n,e,r,i,o}function ie(t){return t.touches?function(t){for(var n=Math.min(t.length,2),e=[],r=0;r<n;++r)e.push(se(t[r]));return e}(t.touches):[se(t)]}function oe(t,n,e){var r=e.length,i=ue(t,r),o=i.clientX,a=i.clientY,s=i.originalClientX,u=i.originalClientY,l=ue(n,r),c=l.clientX,f=l.clientY,p=ue(e,r);return{clientX:s,clientY:u,deltaX:o-c,deltaY:a-f,distX:o-p.clientX,distY:a-p.clientY}}function ae(t){return Math.sqrt(Math.pow(t[0].clientX-t[1].clientX,2)+Math.pow(t[0].clientY-t[1].clientY,2))}function se(t){return{clientX:t.clientX,clientY:t.clientY}}function ue(t,n){void 0===n&&(n=t.length);for(var e={clientX:0,clientY:0,originalClientX:0,originalClientY:0},r=0;r<n;++r){var i=t[r];e.originalClientX+="originalClientX"in i?i.originalClientX:i.clientX,e.originalClientY+="originalClientY"in i?i.originalClientY:i.clientY,e.clientX+=i.clientX,e.clientY+=i.clientY}return n?{clientX:e.clientX/n,clientY:e.clientY/n,originalClientX:e.originalClientX/n,originalClientY:e.originalClientY/n}:e}var le=function(){function t(t){this.prevClients=[],this.startClients=[],this.movement=0,this.length=0,this.startClients=t,this.prevClients=t,this.length=t.length}var n=t.prototype;return n.addClients=function(t){void 0===t&&(t=this.prevClients);var n=this.getPosition(t),e=n.deltaX,r=n.deltaY;return this.movement+=Math.sqrt(e*e+r*r),this.prevClients=t,n},n.getAngle=function(t){return void 0===t&&(t=this.prevClients),re(t)},n.getRotation=function(t){return void 0===t&&(t=this.prevClients),re(t)-re(this.startClients)},n.getPosition=function(t){return oe(t||this.prevClients,this.prevClients,this.startClients)},n.getPositions=function(e){void 0===e&&(e=this.prevClients);var r=this.prevClients;return this.startClients.map(function(t,n){return oe([e[n]],[r[n]],[t])})},n.getMovement=function(t){var n=this.movement;if(!t)return n;var e=ue(t,this.length),r=ue(this.prevClients,this.length),i=e.clientX-r.clientX,o=e.clientY-r.clientY;return Math.sqrt(i*i+o*o)+n},n.getDistance=function(t){return void 0===t&&(t=this.prevClients),ae(t)},n.getScale=function(t){return void 0===t&&(t=this.prevClients),ae(t)/ae(this.startClients)},n.move=function(n,e){this.startClients.forEach(function(t){t.clientX-=n,t.clientY-=e}),this.prevClients.forEach(function(t){t.clientX-=n,t.clientY-=e})},t}(),ce=["textarea","input"],fe=function(u){function t(){this.constructor=n}var n,e;function r(t,n){void 0===n&&(n={});var b=u.call(this)||this;b.options={},b.flag=!1,b.pinchFlag=!1,b.datas={},b.isDrag=!1,b.isPinch=!1,b.isMouse=!1,b.isTouch=!1,b.clientStores=[],b.targets=[],b.prevTime=0,b.doubleFlag=!1,b.onDragStart=function(t,n){if(void 0===n&&(n=!0),b.flag||!1!==t.cancelable){var e=b.options,r=e.container,i=e.pinchOutside,o=e.preventRightClick,a=e.preventDefault,s=e.checkInput,u=b.isTouch,l=!b.flag;if(l){var c,f=document.activeElement,p=t.target,d=p.tagName.toLowerCase(),h=-1<ce.indexOf(d),g=p.isContentEditable;if(h||g){if(s||f===p)return!1;if(f&&g&&f.isContentEditable&&f.contains(p))return!1}else{(a||"touchstart"===t.type)&&f&&(c=f.tagName,(f.isContentEditable||-1<ce.indexOf(c))&&f.blur())}if(b.clientStores=[new le(ie(t))],b.flag=!0,b.isDrag=!1,b.datas={},o&&(3===t.which||2===t.button))return b.initDrag(),!1;b.doubleFlag=Jn()-b.prevTime<200,!1===b.emit("dragStart",ee({datas:b.datas,inputEvent:t,isTrusted:n,isDouble:b.doubleFlag},b.getCurrentStore().getPosition()))&&b.initDrag(),b.flag&&a&&t.preventDefault()}if(!b.flag)return!1;var v,m=0;if(l&&u&&i&&(m=setTimeout(function(){Qn(r,"touchstart",b.onDragStart,{passive:!1})})),!l&&u&&i&&te(r,"touchstart",b.onDragStart),b.flag&&((v=t).touches&&2<=v.touches.length)){if(clearTimeout(m),l&&t.touches.length!==t.changedTouches.length)return;b.pinchFlag||b.onPinchStart(t)}}},b.onDrag=function(t,n){var e,r;b.flag&&(e=ie(t),r=b.moveClients(e,t,!1),(b.pinchFlag||r.deltaX||r.deltaY)&&b.emit("drag",ee({},r,{isScroll:!!n,inputEvent:t})),b.pinchFlag&&b.onPinch(t,e),b.getCurrentStore().addClients(e))},b.onDragEnd=function(t){var n,e,r,i,o,a;b.flag&&(e=(n=b.options).pinchOutside,r=n.container,b.isTouch&&e&&te(r,"touchstart",b.onDragStart),b.flag=!1,i=b.getCurrentStore().getPosition(),o=Jn(),a=!b.isDrag&&b.doubleFlag,b.prevTime=b.isDrag||a?0:o,b.emit("dragEnd",ee({datas:b.datas,isDouble:a,isDrag:b.isDrag,isClick:!b.isDrag,inputEvent:t},i)),b.pinchFlag&&b.onPinchEnd(t),b.clientStores=[])},b.onBlur=function(){b.onDragEnd()};var e=[].concat(t);b.options=ee({checkInput:!1,container:1<e.length?window:e[0],preventRightClick:!0,preventDefault:!0,checkWindowBlur:!1,pinchThreshold:0,events:["touch","mouse"]},n);var r,i=b.options,o=i.container,a=i.events,s=i.checkWindowBlur;return b.isTouch=-1<a.indexOf("touch"),b.isMouse=-1<a.indexOf("mouse"),b.targets=e,b.isMouse&&(e.forEach(function(t){Qn(t,"mousedown",b.onDragStart)}),Qn(o,"mousemove",b.onDrag),Qn(o,"mouseup",b.onDragEnd),Qn(o,"contextmenu",b.onDragEnd)),s&&Qn(window,"blur",b.onBlur),b.isTouch&&(r={passive:!1},e.forEach(function(t){Qn(t,"touchstart",b.onDragStart,r)}),Qn(o,"touchmove",b.onDrag,r),Qn(o,"touchend",b.onDragEnd,r),Qn(o,"touchcancel",b.onDragEnd,r)),b}ne(n=r,e=u),n.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t);var i=r.prototype;return i.getMovement=function(t){return this.getCurrentStore().getMovement(t)+this.clientStores.slice(1).reduce(function(t,n){return t+n.movement},0)},i.isDragging=function(){return this.isDrag},i.isFlag=function(){return this.flag},i.isPinchFlag=function(){return this.pinchFlag},i.isDoubleFlag=function(){return this.doubleFlag},i.isPinching=function(){return this.isPinch},i.scrollBy=function(t,n,e,r){void 0===r&&(r=!0),this.flag&&(this.clientStores[0].move(t,n),r&&this.onDrag(e,!0))},i.move=function(t,n){var r=t[0],i=t[1],e=this.getCurrentStore().prevClients;return this.moveClients(e.map(function(t){var n=t.clientX,e=t.clientY;return{clientX:n+r,clientY:e+i,originalClientX:n,originalClientY:e}}),n,!0)},i.triggerDragStart=function(t){this.onDragStart(t,!1)},i.setEventDatas=function(t){var n=this.datas;for(var e in t)n[e]=t[e];return this},i.getEventDatas=function(){return this.datas},i.unset=function(){var n=this,t=this.targets,e=this.options.container;this.off(),te(window,"blur",this.onBlur),this.isMouse&&(t.forEach(function(t){te(t,"mousedown",n.onDragStart)}),te(e,"mousemove",this.onDrag),te(e,"mouseup",this.onDragEnd),te(e,"contextmenu",this.onDragEnd)),this.isTouch&&(t.forEach(function(t){te(t,"touchstart",n.onDragStart)}),te(e,"touchstart",this.onDragStart),te(e,"touchmove",this.onDrag),te(e,"touchend",this.onDragEnd),te(e,"touchcancel",this.onDragEnd))},i.onPinchStart=function(t){var n,e=this.options.pinchThreshold;this.isDrag&&this.getMovement()>e||(n=new le(ie(t)),this.pinchFlag=!0,this.clientStores.splice(0,0,n),!1===this.emit("pinchStart",ee({datas:this.datas,angle:n.getAngle(),touches:this.getCurrentStore().getPositions()},n.getPosition(),{inputEvent:t}))&&(this.pinchFlag=!1))},i.onPinch=function(t,n){var e;!this.flag||!this.pinchFlag||n.length<2||(e=this.getCurrentStore(),this.isPinch=!0,this.emit("pinch",ee({datas:this.datas,movement:this.getMovement(n),angle:e.getAngle(n),rotation:e.getRotation(n),touches:e.getPositions(n),scale:e.getScale(n),distance:e.getDistance(n)},e.getPosition(n),{inputEvent:t})))},i.onPinchEnd=function(t){var n,e;this.pinchFlag&&(n=this.isPinch,this.isPinch=!1,this.pinchFlag=!1,e=this.getCurrentStore(),this.emit("pinchEnd",ee({datas:this.datas,isPinch:n,touches:e.getPositions()},e.getPosition(),{inputEvent:t})),this.isPinch=!1,this.pinchFlag=!1)},i.initDrag=function(){this.clientStores=[],this.pinchFlag=!1,this.doubleFlag=!1,this.prevTime=0,this.flag=!1},i.getCurrentStore=function(){return this.clientStores[0]},i.moveClients=function(t,n,e){var r=this.getCurrentStore()[e?"addClients":"getPosition"](t);return this.isDrag=!0,ee({datas:this.datas},r,{movement:this.getMovement(t),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:n})},r}(Un),pe="string",de=[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}];function he(t,n,e,r,i){return ge(t,n,e)?e:function(i,o,t,a,s){for(var u,n=t;n<a;++n){var e=function(t){var n=o[t].trim();if(n===i.close&&!ge(i,o,t))return{value:t};var e=t,r=me(s,function(t){return t.open===n});if(r&&(e=he(r,o,t,a,s)),-1===e)return u=t,"break";u=t=e}(n);if(n=u,"object"==typeof e)return e.value;if("break"===e)break}return-1}(t,n,e+1,r,i)}function ge(t,n,e){if(!t.ignore)return null;var r=n.slice(Math.max(e-3,0),e+3).join("");return new RegExp(t.ignore).exec(r)}function ve(t,n){var e=typeof n===pe?{separator:n}:n,r=e.separator,s=void 0===r?",":r,u=e.isSeparateFirst,l=e.isSeparateOnlyOpenClose,i=e.isSeparateOpenClose,c=void 0===i?l:i,o=e.openCloseCharacters,f=void 0===o?de:o,a=f.map(function(t){var n=t.open,e=t.close;return n===e?n:n+"|"+e}).join("|"),p=new RegExp("(\\s*"+s+"\\s*|"+a+"|\\s+)","g"),d=t.split(p).filter(Boolean),h=d.length,g=[],v=[];function m(){return v.length&&(g.push(v.join("")),v=[])}for(var b,x=0;x<h;++x){var E=function(t){var n,e,r=d[t].trim(),i=t,o=me(f,function(t){return t.open===r}),a=me(f,function(t){return t.close===r});if(o){if(-1!==(i=he(o,d,t,h,f))&&c)return m()&&u?(b=t,"break"):(g.push(d.slice(t,i+1).join("")),t=i,u?(b=t,"break"):(b=t,"continue"))}else{if(a&&!ge(a,d,t))throw new Error("invalid format: "+a.close);if(n=r,!((""!==(e=s)&&" "!=e||""!==n&&" "!=n)&&n!==e||l))return m(),u?(b=t,"break"):(b=t,"continue")}-1===i&&(i=h-1),v.push(d.slice(t,i+1).join("")),b=t=i}(x),x=b;if("break"===E)break}return v.length&&g.push(v.join("")),g}function me(t,n,e){var r=function(t,n,e){void 0===e&&(e=-1);for(var r=t.length,i=0;i<r;++i)if(n(t[i],i,t))return i;return e}(t,n);return-1<r?t[r]:e}var be=function(t){for(var n=5381,e=t.length;e;)n=33*n^t.charCodeAt(--e);return n>>>0};function xe(r,t,n){return n.original?t:t.replace(/([^};{\s}][^};{]*|^\s*){/gm,function(t,n){var e=n.trim();return(e?ve(e,","):[""]).map(function(t){var n=t.trim();return 0===n.indexOf("@")?n:-1<n.indexOf(":global")?n.replace(/\:global/g,""):-1<n.indexOf(":host")?""+n.replace(/\:host/g,"."+r):n?"."+r+" "+n:"."+r}).join(", ")+" {"})}function Ee(c){var f,p="rCS"+be(c).toString(36),d=0;return{className:p,inject:function(t,n){void 0===n&&(n={});var e,r,i,o,a,s,u=function(t){if(t&&t.getRootNode){var n=t.getRootNode();if(11===n.nodeType)return n}}(t),l=0===d;return(u||l)&&(r=p,i=c,o=n,a=u,(s=document.createElement("style")).setAttribute("type","text/css"),s.setAttribute("data-styled-id",r),o.nonce&&s.setAttribute("nonce",o.nonce),s.innerHTML=xe(r,i,o),(a||document.head||document.body).appendChild(s),e=s),l&&(f=e),u||++d,{destroy:function(){u?(t.removeChild(e),e=null):(0<d&&--d,0===d&&f&&(f.parentNode.removeChild(f),f=null))}}}}}var Se=function(t,n){return(Se=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(t,n)};function ye(t,n){function e(){this.constructor=t}Se(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}var Me=function(){return(Me=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var i in n=arguments[e])Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t}).apply(this,arguments)};var Ce=function(n){function t(){var t=null!==n&&n.apply(this,arguments)||this;return t.injectResult=null,t.tag="div",t}ye(t,n);var e=t.prototype;return e.render=function(){var t=this.props,n=t.className,e=void 0===n?"":n,r=(t.cspNonce,t.portalContainer),i=function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e}(t,["className","cspNonce","portalContainer"]),o=this.injector.className,a=this.tag,s={};return-1<U.indexOf("simple")&&r&&(s={portalContainer:r}),B(a,Me({ref:S(this,"element"),"data-styled-id":o,className:e+" "+o},s,i))},e.componentDidMount=function(){this.injectResult=this.injector.inject(this.element,{nonce:this.props.cspNonce})},e.componentWillUnmount=function(){this.injectResult.destroy(),this.injectResult=null},e.getElement=function(){return this.element},t}(Y);function De(e,t){var r=Ee(t);return function(n){function t(){var t=null!==n&&n.apply(this,arguments)||this;return t.injector=r,t.tag=e,t}return ye(t,n),t}(Ce)}var Re=function(t,n){return(Re=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(t,n)};function we(t,n){function e(){this.constructor=t}Re(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}var Oe=function(){return(Oe=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var i in n=arguments[e])Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t}).apply(this,arguments)};function Pe(){for(var t=0,n=0,e=arguments.length;n<e;n++)t+=arguments[n].length;for(var r=Array(t),i=0,n=0;n<e;n++)for(var o=arguments[n],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}function Ge(t,n){var e;return Oe({events:{},props:((e={})[t]=Boolean,e),name:t},n)}function Be(t,n){return'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'+32*t+'px" height="'+32*t+'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate('+n+'deg);transform-origin: 16px 16px"></path></svg>'}var ze,Te,ke=ut().browser.webkit,Ae=ke&&(ze="undefined"==typeof window?{userAgent:""}:window.navigator,!!(Te=/applewebkit\/([^\s]+)/g.exec(ze.userAgent.toLowerCase()))&&parseFloat(Te[1])<605),Ie="moveable-",Ne="\n{\n\tposition: absolute;\n\twidth: 1px;\n\theight: 1px;\n\tleft: 0;\n\ttop: 0;\n    z-index: 3000;\n    --moveable-color: #4af;\n    --zoom: 1;\n    --zoompx: 1px;\n    will-change: transform;\n}\n.control-box {\n    z-index: 0;\n}\n.line, .control {\n    position: absolute;\n\tleft: 0;\n    top: 0;\n    will-change: transform;\n}\n.control {\n\twidth: 14px;\n\theight: 14px;\n\tborder-radius: 50%;\n\tborder: 2px solid #fff;\n\tbox-sizing: border-box;\n    background: #4af;\n    background: var(--moveable-color);\n\tmargin-top: -7px;\n    margin-left: -7px;\n    border: 2px solid #fff;\n    z-index: 10;\n}\n.padding {\n    position: absolute;\n    top: 0px;\n    left: 0px;\n    width: 100px;\n    height: 100px;\n    transform-origin: 0 0;\n}\n.line {\n\twidth: 1px;\n    height: 1px;\n    background: #4af;\n    background: var(--moveable-color);\n\ttransform-origin: 0px 50%;\n}\n.line.dashed {\n    box-sizing: border-box;\n    background: transparent;\n}\n.line.dashed.horizontal {\n    border-top: 1px dashed #4af;\n    border-top-color: #4af;\n    border-top-color: var(--moveable-color);\n}\n.line.dashed.vertical {\n    border-left: 1px dashed #4af;\n    border-left-color: #4af;\n    border-left-color: var(--moveable-color);\n}\n.line.vertical {\n    transform: translateX(-50%);\n}\n.line.horizontal {\n    transform: translateY(-50%);\n}\n.line.vertical.bold {\n    width: 2px;\n}\n.line.horizontal.bold {\n    height: 2px;\n}\n\n.control.origin {\n\tborder-color: #f55;\n\tbackground: #fff;\n\twidth: 12px;\n\theight: 12px;\n\tmargin-top: -6px;\n    margin-left: -6px;\n\tpointer-events: none;\n}\n"+[0,15,30,45,60,75,90,105,120,135,150,165].map(function(t){return'\n.direction[data-rotation="'+t+'"] {\n\t'+(e=Be(1,n=t),r=Be(2,n),i=45*Math.round(n/45)%180,o="ns-resize",135==i?o="nwse-resize":45==i?o="nesw-resize":90==i&&(o="ew-resize"),"cursor:"+o+";cursor: url('"+e+"') 16 16, "+o+";cursor: -webkit-image-set(url('"+e+"') 1x, url('"+r+"') 2x) 16 16, "+o+";")+"\n}\n";var n,e,r,i,o}).join("\n")+"\n.group {\n    z-index: -1;\n}\n.area {\n    position: absolute;\n}\n.area-pieces {\n    position: absolute;\n    top: 0;\n    left: 0;\n    display: none;\n}\n.area.avoid, .area.pass {\n    pointer-events: none;\n}\n.area.avoid+.area-pieces {\n    display: block;\n}\n.area-piece {\n    position: absolute;\n}\n\n"+(Ae?':global svg *:before {\n\tcontent:"";\n\ttransform-origin: inherit;\n}':"")+"\n",Fe=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],je=1e-4,_e=1e-7,Ye=Math.pow(10,10),qe=-Ye,Xe=["n","w","s","e","nw","ne","sw","se"],We={n:[0,1],s:[2,3],w:[2,0],e:[1,3],nw:[0],ne:[1],sw:[2],se:[3]},Le={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135},He=["isMoveableElement","updateRect","updateTarget","destroy","dragStart","isInside","hitTest","setState","getRect","request","isDragging","getManager"];function Ve(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.apply(void 0,Pe([Ie],t))}function Ue(t,n,e){return Zt(n,hn(e,n),t,hn(e.map(function(t){return-t}),n))}function $e(s){return Ze(Rr(s,":before")).map(function(t,n){var e,r,i=wt(t),o=i.value,a=i.unit;return o*(e=s,r=0===n,"%"!==a?1:ir(e.ownerSVGElement)[r?"width":"height"]/100)})}function Ze(t){var n=t.transformOrigin;return n?n.split(" "):["0","0"]}function Ke(t,n,e){for(var r=document.body,i=!t||e?t:t.parentElement,o=t===n||i===n,a="relative";i&&i!==r;){n===i&&(o=!0);var s=Rr(i),u=s.transform,a=s.position;if("svg"===i.tagName.toLowerCase()||"static"!==a||u&&"none"!==u)break;i=i.parentElement,a="relative"}return{isStatic:"static"===a,isEnd:o||!i||i===r,offsetParent:i||r}}function Je(t,n,e,r){var i,o,a=t.tagName.toLowerCase(),s=t.offsetLeft,u=t.offsetTop;r&&(s-=(o=(n||document.documentElement).getBoundingClientRect()).left,u-=o.top);var l,c,f=vt(s),p=!f;return p||"svg"===a?c=(l=Ze(e).map(function(t){return parseFloat(t)})).slice():(c=(l=Ae?$e(t):Ze(e).map(function(t){return parseFloat(t)})).slice(),p=!0,s=(i=function(t,n){if(!t.getBBox)return[0,0];var e=t.getBBox(),r=ir(t.ownerSVGElement),i=e.x-r.x,o=e.y-r.y;return[i,o,n[0]-i,n[1]-o]}(t,l))[0],u=i[1],l[0]=i[2],l[1]=i[3]),{tagName:a,isSVG:f,hasOffset:p,offset:[s||0,u||0],origin:l,targetOrigin:c}}function Qe(t,n,e){void 0===e&&(e=Rr(t));var r=Rr(document.body),i=r.position;if(!(n||i&&"static"!==i))return[0,0];var o=parseInt(r.marginLeft,10),a=parseInt(r.marginTop,10);return"absolute"===e.position&&("auto"===e.top&&"auto"===e.bottom||(a=0),"auto"===e.left&&"auto"===e.right||(o=0)),[o,a]}function tr(t){t.forEach(function(t){var n=t.matrix;n&&(t.matrix=$t(n,3,4))})}function nr(t,n,e){for(var r,i,o,a,s=t,u=[],l=!e&&t===n,c=l,f=!1,p=3,d=Ke(n,n,!0).offsetParent;s&&!c;){c=l;var h=Rr(s),g=h.position,v="fixed"===g,m=tn((a=h.transform)&&"none"!==a?mt(a)?a:Rt(a).value.split(/s*,\s*/g).map(function(t){return parseFloat(t)}):[1,0,0,1,0,0]),b=m.length;f||16!==b||(f=!0,p=4,tr(u),o=o&&$t(o,3,4)),f&&9===b&&(m=$t(m,3,4));var x=Je(s,n,h,v),E=x.tagName,S=x.hasOffset,y=x.isSVG,M=x.origin,C=x.targetOrigin,D=x.offset,R=D[0],w=D[1];"svg"===E&&o?(u.push({type:"target",target:s,matrix:function(t,n){var e=ir(t),r=e.width,i=e.height,o=e.clientWidth,a=e.clientHeight,s=o/r,u=a/i,l=t.preserveAspectRatio.baseVal,c=l.align,f=l.meetOrSlice,p=[0,0],d=[s,u],h=[0,0];{var g,v,m;1!==c&&(g=(c-2)%3,v=Math.floor((c-2)/3),p[0]=r*g/2,p[1]=i*v/2,m=2===f?Math.max(u,s):Math.min(s,u),d[0]=m,d[1]=m,h[0]=(o-r)/2*g,h[1]=(a-i)/2*v)}var b=dn(d,n);return b[n*(n-1)]=h[0],b[n*(n-1)+1]=h[1],Ue(b,n,p)}(s,p)}),u.push({type:"offset",target:s,matrix:pn(p)})):"g"===E&&t!==s&&(w=R=0);var O=Ke(s,n),P=O.offsetParent,G=O.isEnd,B=O.isStatic;ke&&S&&!y&&B&&("relative"===g||"static"===g)&&(R-=P.offsetLeft,w-=P.offsetTop,l=l||G);var z,T=0,k=0;if(S&&d!==P&&(T=P.clientLeft,k=P.clientTop),S&&P===document.body&&(R+=(z=Qe(s,!1,h))[0],w+=z[1]),u.push({type:"target",target:s,matrix:Ue(m,p,M)}),S?u.push({type:"offset",target:s,matrix:hn([R-s.scrollLeft+T,w-s.scrollTop+k],p)}):u.push({type:"offset",target:s,origin:M}),o=o||m,r=r||M,i=i||C,c||v)break;s=P,l=G,e&&s!==document.body||(c=l)}return{offsetContainer:d,matrixes:u,targetMatrix:o=o||pn(p),transformOrigin:r=r||[0,0],targetOrigin:i=i||[0,0],is3d:f}}function er(t,n,e,r){var i;void 0===e&&(e=n);var o,a,s,u,l=0,c=0,f=0,p={};t&&(o=Rr(t),l=t.offsetWidth,c=t.offsetHeight,vt(l)&&(l=(i=hr(t,o,!0))[0],c=i[1])),t&&(s=lr((a=function(t,n,e,r){void 0===e&&(e=n);var i=nr(t,n),o=i.matrixes,a=i.is3d,s=i.targetMatrix,u=i.transformOrigin,l=i.targetOrigin,c=nr(i.offsetContainer,e,!0),f=c.matrixes,p=c.is3d,d=r||p||a,h=d?4:3,g="svg"!==t.tagName.toLowerCase()&&"ownerSVGElement"in t,v=s,m=pn(h),b=pn(h),x=pn(h),E=pn(h),S=o.length,y=e||document.body,M=Ke(y,y,!0).offsetParent;f.reverse(),o.reverse(),!a&&d&&(v=$t(v,3,4),tr(o));!p&&d&&tr(f);f.forEach(function(t){b=Kt(b,t.matrix,h)}),o.forEach(function(t,n){var e;S-2===n&&(x=m.slice()),S-1===n&&(E=m.slice()),t.matrix||(e=function(t,n,e,r,i){var o,a=t.target,s=t.origin,u=n.matrix,l=hr(a,void 0,!0),c=l[0],f=l[1],p=e.getBoundingClientRect(),d=[0,0];e===document.body&&(d=Qe(a,!0));var h=a.getBoundingClientRect(),g=h.left-p.left+e.scrollLeft-(e.clientLeft||0)+d[0],v=h.top-p.top+e.scrollTop-(e.clientTop||0)+d[1],m=h.width,b=h.height,x=Zt(r,i,u),E=ur(x,c,f,r),S=E.left,y=E.top,M=E.width,C=E.height,D=or(x,s,r),R=Qt(D,[S,y]),w=[g+R[0]*m/M,v+R[1]*b/C],O=[0,0],P=0;for(;++P<10;){var G=Lt(i,r);o=Qt(or(G,w,r),or(G,D,r)),O[0]=o[0],O[1]=o[1];var B=ur(Zt(r,i,hn(O,r),u),c,f,r),z=B.left,T=B.top,k=z-g,A=T-v;if(Math.abs(k)<2&&Math.abs(A)<2)break;w[0]-=k,w[1]-=A}return O.map(function(t){return Math.round(t)})}(t,o[n+1],M,h,Kt(b,m,h)),t.matrix=hn(e,h)),m=Kt(m,t.matrix,h)});var C=!g&&a;v=v||pn(C?4:3);var D=rr(g&&16===v.length?$t(v,4,3):v,C);return{rootMatrix:b=Wt(b,h,h),beforeMatrix:x,offsetMatrix:E,allMatrix:m,targetMatrix:v,targetTransform:D,transformOrigin:u,targetOrigin:l,is3d:d}}(t,n,e,r)).allMatrix,a.transformOrigin,l,c),p=Oe(Oe({},a),s),f=gr([(u=lr(a.allMatrix,[50,50],100,100)).pos1,u.pos2],u.direction));var d=r?4:3;return Oe({width:l,height:c,rotation:f,rootMatrix:pn(d),beforeMatrix:pn(d),offsetMatrix:pn(d),allMatrix:pn(d),targetMatrix:pn(d),targetTransform:"",transformOrigin:[0,0],targetOrigin:[0,0],is3d:!!r,left:0,top:0,right:0,bottom:0,origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],direction:1},p)}function rr(t,n){return void 0===n&&(n=9<t.length),(n?"matrix3d":"matrix")+"("+nn(t,!n).join(",")+")"}function ir(t){var n=t.clientWidth,e=t.clientHeight;if(!t)return{x:0,y:0,width:0,height:0,clientWidth:n,clientHeight:e};var r=t.viewBox,i=r&&r.baseVal||{x:0,y:0,width:0,height:0};return{x:i.x,y:i.y,width:i.width||n,height:i.height||e,clientWidth:n,clientHeight:e}}function or(t,n,e){return en(t,Ut(n,e),e)}function ar(n,t,e,r){return[[0,0],[t,0],[0,e],[t,e]].map(function(t){return or(n,t,r)})}function sr(t){var n=t.map(function(t){return t[0]}),e=t.map(function(t){return t[1]}),r=Math.min.apply(Math,n),i=Math.min.apply(Math,e),o=Math.max.apply(Math,n),a=Math.max.apply(Math,e);return{left:r,top:i,right:o,bottom:a,width:o-r,height:a-i}}function ur(t,n,e,r){return sr(ar(t,n,e,r))}function lr(t,n,e,r){var i=16===t.length?4:3,o=ar(t,e,r,i),a=o[0],s=a[0],u=a[1],l=o[1],c=l[0],f=l[1],p=o[2],d=p[0],h=p[1],g=o[3],v=g[0],m=g[1],b=or(t,n,i),x=b[0],E=b[1],S=Math.min(s,c,d,v),y=Math.min(u,f,h,m);return{left:S,top:y,right:Math.max(s,c,d,v),bottom:Math.max(u,f,h,m),origin:[x=x-S||0,E=E-y||0],pos1:[s=s-S||0,u=u-y||0],pos2:[c=c-S||0,f=f-y||0],pos3:[d=d-S||0,h=h-y||0],pos4:[v=v-S||0,m=m-y||0],direction:It(o)}}function cr(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function fr(t,n){return cr([n[0]-t[0],n[1]-t[1]])}function pr(t,n,e,r){void 0===e&&(e=1),void 0===r&&(r=At(t,n));var i=fr(t,n);return{transform:"translateY(-50%) translate("+t[0]+"px, "+t[1]+"px) rotate("+r+"rad) scaleY("+e+")",width:i+"px"}}function dr(t,n){for(var e=[],r=2;r<arguments.length;r++)e[r-2]=arguments[r];var i=e.length;return{transform:"translateZ(0px) translate("+e.reduce(function(t,n){return t+n[0]},0)/i+"px, "+e.reduce(function(t,n){return t+n[1]},0)/i+"px) rotate("+t+"rad) scale("+n+")"}}function hr(t,n,e,r){void 0===n&&(n=Rr(t)),void 0===r&&(r=e||"border-box"===n.boxSizing);var i=t.offsetWidth,o=t.offsetHeight,a=!vt(i);if((e||r)&&a)return[i,o];if(a||"svg"===t.tagName.toLowerCase())return i=t.clientWidth,o=t.clientHeight,e||r?[i+(parseFloat(n.borderLeftWidth)||0)+(parseFloat(n.borderRightWidth)||0),o+(parseFloat(n.borderTopWidth)||0)+(parseFloat(n.borderBottomWidth)||0)]:[i-(parseFloat(n.paddingLeft)||0)-(parseFloat(n.paddingRight)||0),o-(parseFloat(n.paddingTop)||0)-(parseFloat(n.paddingBottom)||0)];var s=t.getBBox();return[s.width,s.height]}function gr(t,n){return At(0<n?t[0]:t[1],0<n?t[1]:t[0])}function vr(t,n,e,r,i){var o,a,s=1,u=[0,0],l=mr(),c=mr(),f=mr(),p=er(n,e,i,!1);return n&&(o=p.is3d?4:3,s=(a=lr(p.offsetMatrix,Jt(p.transformOrigin,Ht(p.targetMatrix,o)),p.width,p.height)).direction,u=Jt(a.origin,[a.left-p.left,a.top-p.top]),l=br(n),c=br(Ke(r,r,!0).offsetParent||document.body,!0),t&&(f=br(t))),Oe({targetClientRect:l,containerClientRect:c,moveableClientRect:f,beforeDirection:s,beforeOrigin:u,originalBeforeOrigin:u,target:n},p)}function mr(){return{left:0,right:0,top:0,bottom:0,width:0,height:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0}}function br(t,n){var e,r=0,i=0,o=0,a=0;t===document.body||t===document.documentElement?(o=window.innerWidth,a=window.innerHeight,r=-(document.documentElement.scrollLeft||document.body.scrollLeft),i=-(document.documentElement.scrollTop||document.body.scrollTop)):(r=(e=t.getBoundingClientRect()).left,i=e.top,o=e.width,a=e.height);var s={left:r,right:r+o,top:i,bottom:i+a,width:o,height:a};return n&&(s.clientLeft=t.clientLeft,s.clientTop=t.clientTop,s.clientWidth=t.clientWidth,s.clientHeight=t.clientHeight,s.scrollWidth=t.scrollWidth,s.scrollHeight=t.scrollHeight,s.overflow="visible"!==Rr(t).overflow),s}function xr(t){if(t){var n=t.getAttribute("data-direction");if(n){var e=[0,0];return-1<n.indexOf("w")&&(e[0]=-1),-1<n.indexOf("e")&&(e[0]=1),-1<n.indexOf("n")&&(e[1]=-1),-1<n.indexOf("s")&&(e[1]=1),e}}}function Er(t,n){return[Jt(n,t[0]),Jt(n,t[1]),Jt(n,t[2]),Jt(n,t[3])]}function Sr(t){var n=t.left,e=t.top;return Er([t.pos1,t.pos2,t.pos3,t.pos4],[n,e])}function yr(t,n){t[n]&&(t[n].unset(),t[n]=null)}function Mr(t,n,e){var r=n.datas;r.datas||(r.datas={});var i=Oe(Oe({},e),{target:t.state.target,clientX:n.clientX,clientY:n.clientY,inputEvent:n.inputEvent,currentTarget:t,moveable:t,datas:r.datas});return r.isStartEvent?r.lastEvent=i:r.isStartEvent=!0,i}function Cr(t,n,e){var r=n.datas,i="isDrag"in e?e.isDrag:n.isDrag;return r.datas||(r.datas={}),Oe(Oe({isDrag:i},e),{moveable:t,target:t.state.target,clientX:n.clientX,clientY:n.clientY,inputEvent:n.inputEvent,currentTarget:t,lastEvent:r.lastEvent,isDouble:n.isDouble,datas:r.datas})}function Dr(t,n,e,r){return t.triggerEvent(n,e,r)}function Rr(t,n){return window.getComputedStyle(t,n)}function wr(t,e,r){var i={},o={};return t.filter(function(n){var t=n.name;if(i[t]||!e.some(function(t){return n[t]}))return!1;if(!r&&n.ableGroup){if(o[n.ableGroup])return!1;o[n.ableGroup]=!0}return i[t]=!0})}function Or(t,n){return t===n||null==t&&null==n}function Pr(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return t.sort(function(t,n){return Math.abs(n)-Math.abs(t)}),t[0]}function Gr(t,n,e){return en(Lt(t,e),Ut(n,e),e)}function Br(t,n){var e=t.is3d?4:3,r=Gr(t.rootMatrix,[n.distX,n.distY],e);return n.distX=r[0],n.distY=r[1],n}function zr(t,n,e,r,i){return Qt(or(t,Jt(e,n),i),r)}function Tr(t,n,e){return e?t/n*100+"%":t+"px"}function kr(t){return Math.abs(t)<=_e?0:t}function Ar(t,n){return n.isRequest?("resizable"===n.requestAble||"scalable"===n.requestAble)&&n.parentDirection:_t(n.inputEvent.target,Ve("direction"))}function Ir(t){var n={};for(var e in t)n[t[e]]=e;return n}function Nr(t,n){return t?xt(t)?n?document.querySelector(t):t:Et(t)?t():"current"in t?t.current:t:null}function Fr(t,e){return t?((n=t)&&mt(n)&&(bt(n)||"length"in n)?[].slice.call(t):[t]).reduce(function(t,n){return xt(n)&&e?Pe(t,[].slice.call(document.querySelectorAll(n))):(t.push(Nr(n,e)),t)},[]):[];var n}function jr(t,n){var e=t.rootMatrix,r=t.is3d,i=Lt(e,r?4:3);return r||(i=$t(i,3,4)),i[12]=0,i[13]=0,i[14]=0,Cn(i,n)}var _r=Ge("pinchable",{events:{onPinchStart:"pinchStart",onPinch:"pinch",onPinchEnd:"pinchEnd",onPinchGroupStart:"pinchGroupStart",onPinchGroup:"pinchGroup",onPinchGroupEnd:"pinchGroupEnd"},dragStart:function(){return!0},pinchStart:function(e,r){var t=r.datas,n=r.targets,i=r.angle,o=r.originalDatas,a=e.props,s=a.pinchable,u=a.ables;if(!s)return!1;var l="onPinch"+(n?"Group":"")+"Start",c="drag"+(n?"Group":"")+"ControlStart",f=(!0===s?e.controlAbles:u.filter(function(t){return-1<s.indexOf(t.name)})).filter(function(t){return t.canPinch&&t[c]}),p=Mr(e,r,{});n&&(p.targets=n);var d=Dr(e,l,p);t.isPinch=!1!==d,t.ables=f;var h=t.isPinch;return!!h&&(f.forEach(function(t){var n;o[t.name]=o[t.name]||{},t[c]&&(n=Oe(Oe({},r),{datas:o[t.name],parentRotate:i,isPinch:!0}),t[c](e,n))}),e.state.snapRenderInfo={request:r.isRequest,direction:[0,0]},h)},pinch:function(n,e){var t=e.datas,r=e.scale,i=e.distance,o=e.originalDatas,a=e.inputEvent,s=e.targets,u=e.angle;if(t.isPinch){var l=i*(1-1/r),c=Mr(n,e,{});s&&(c.targets=s),Dr(n,"onPinch"+(s?"Group":""),c);var f=t.ables,p="drag"+(s?"Group":"")+"Control";return f.forEach(function(t){t[p]&&t[p](n,Oe(Oe({},e),{datas:o[t.name],inputEvent:a,parentDistance:l,parentRotate:u,isPinch:!0}))}),c}},pinchEnd:function(n,e){var t=e.datas,r=e.isPinch,i=e.inputEvent,o=e.targets,a=e.originalDatas;if(t.isPinch){var s="onPinch"+(o?"Group":"")+"End",u=Cr(n,e,{isDrag:r});o&&(u.targets=o),Dr(n,s,u);var l=t.ables,c="drag"+(o?"Group":"")+"ControlEnd";return l.forEach(function(t){t[c]&&t[c](n,Oe(Oe({},e),{isDrag:r,datas:a[t.name],inputEvent:i,isPinch:!0}))}),r}},pinchGroupStart:function(t,n){return this.pinchStart(t,Oe(Oe({},n),{targets:t.props.targets}))},pinchGroup:function(t,n){return this.pinch(t,Oe(Oe({},n),{targets:t.props.targets}))},pinchGroupEnd:function(t,n){return this.pinchEnd(t,Oe(Oe({},n),{targets:t.props.targets}))}});function Yr(t,n,e,r,i){var o=n.gesto.move(e,t.inputEvent),a=o.originalDatas||o.datas,s=a.draggable||(a.draggable={});return Oe(Oe({},i?Br(n,o):o),{isDrag:!0,isPinch:!!r,parentEvent:!0,datas:s,originalDatas:t.originalDatas})}var qr=function(){function t(){this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}}}var n=t.prototype;return n.dragStart=function(t,n){this.isDrag=!1,this.isFlag=!1;var e=n.originalDatas;return(this.datas=e).draggable||(e.draggable={}),Oe(Oe({},this.move(t,n.inputEvent)),{type:"dragstart"})},n.drag=function(t,n){return this.move([t[0]-this.prevX,t[1]-this.prevY],n)},n.move=function(t,n){var e,r;return this.isFlag?(e=this.prevX+t[0],r=this.prevY+t[1],this.isDrag=!0):(this.prevX=t[0],this.prevY=t[1],this.startX=t[0],this.startY=t[1],e=t[0],r=t[1],this.isFlag=!0),{type:"drag",clientX:this.prevX=e,clientY:this.prevY=r,inputEvent:n,isDrag:this.isDrag,distX:e-this.startX,distY:r-this.startY,deltaX:t[0],deltaY:t[1],datas:this.datas.draggable,originalDatas:this.datas,parentEvent:!0,parentGesto:this}},t}();function Xr(t,e,r){var n=r.originalDatas;n.groupable=n.groupable||{};var i=n.groupable;i.childDatas=i.childDatas||[];var o=i.childDatas;return t.moveables.map(function(t,n){return o[n]=o[n]||{},o[n][e]=o[n][e]||{},Oe(Oe({},r),{datas:o[n][e],originalDatas:o[n]})})}function Wr(t,o,a,s,n,u){var l=!!a.match(/Start$/g),c=!!a.match(/End$/g),f=n.isPinch,p=n.datas,e=Xr(t,o.name,n),d=t.moveables,r=e.map(function(t,n){var e=d[n],r=t,r=l?(new qr).dragStart(s,t):(e.state.gesto||(e.state.gesto=p.childGestos[n]),Yr(t,e.state,s,f,u)),i=o[a](e,Oe(Oe({},r),{parentFlag:!0}));return c&&(e.state.gesto=null),i});return l&&(p.childGestos=d.map(function(t){return t.state.gesto})),r}function Lr(t,o,a,n,s,u){void 0===s&&(s=function(t,n){return n});var l=!!a.match(/End$/g),e=Xr(t,o.name,n),c=t.moveables;return e.map(function(t,n){var e=c[n],r=s(e,t),i=o[a](e,Oe(Oe({},r),{parentFlag:!0}));return i&&u&&u(e,t,i,n),l&&(e.state.gesto=null),i})}function Hr(t,n){var e=n.clientX,r=n.clientY,i=n.datas,o=t.state,a=o.moveableClientRect,s=o.rootMatrix,u=o.is3d,l=o.pos1,c=Qt(Gr(s,[e-a.left,r-a.top],u?4:3),l),f=Jr({datas:i,distX:c[0],distY:c[1]});return[f[0],f[1]]}function Vr(t,n){var e=n.datas,r=t.state,i=r.allMatrix,o=r.beforeMatrix,a=r.is3d,s=r.left,u=r.top,l=r.origin,c=r.offsetMatrix,f=r.targetMatrix,p=r.transformOrigin,d=a?4:3;e.is3d=a,e.matrix=i,e.targetMatrix=f,e.beforeMatrix=o,e.offsetMatrix=c,e.transformOrigin=p,e.inverseMatrix=Lt(i,d),e.inverseBeforeMatrix=Lt(o,d),e.absoluteOrigin=Ut(Jt([s,u],l),d),e.startDragBeforeDist=en(e.inverseBeforeMatrix,e.absoluteOrigin,d),e.startDragDist=en(e.inverseMatrix,e.absoluteOrigin,d)}function Ur(t,n){var e,r,i,o,a,s,u,l,c,f,p,d,h,g,v,m,b,x=t.datas,E=t.originalDatas.beforeRenderable,S=x.transformIndex,y=E.nextTransforms,M=E.nextTransformAppendedIndexes,C=-1===S?y.length:S+M.filter(function(t){return t<S}).length,D=(r=C,i=(e=y).slice(0,r<0?void 0:r),o=e.slice(0,r<0?void 0:r+1),a=e[r]||"",s=r<0?[]:e.slice(r),u=r<0?[]:e.slice(r+1),l=Rn(i),c=Rn(o),f=Rn([a]),p=Rn(s),d=Rn(u),h=Dn(l),g=Dn(c),v=Dn(p),m=Dn(d),b=Kt(h,v,4),{transforms:e,beforeFunctionMatrix:h,beforeFunctionMatrix2:g,targetFunctionMatrix:Dn(f),afterFunctionMatrix:v,afterFunctionMatrix2:m,allFunctionMatrix:b,beforeFunctions:l,beforeFunctions2:c,targetFunction:f[0],afterFunctions:p,afterFunctions2:d,beforeFunctionTexts:i,beforeFunctionTexts2:o,targetFunctionText:a,afterFunctionTexts:s,afterFunctionTexts2:u}),R=D.targetFunction,w="rotate"===n?"rotateZ":n;x.beforeFunctionTexts=D.beforeFunctionTexts,x.afterFunctionTexts=D.afterFunctionTexts,x.beforeTransform=D.beforeFunctionMatrix,x.beforeTransform2=D.beforeFunctionMatrix2,x.targetTansform=D.targetFunctionMatrix,x.afterTransform=D.afterFunctionMatrix,x.afterTransform2=D.afterFunctionMatrix2,x.targetAllTransform=D.allFunctionMatrix,R.functionName===w?(x.afterFunctionTexts.splice(0,1),x.isAppendTransform=!1):(x.isAppendTransform=!0,E.nextTransformAppendedIndexes=Pe(M,[C]))}function $r(t,n,e){return t.beforeFunctionTexts.join(" ")+" "+(t.isAppendTransform?e:n)+" "+t.afterFunctionTexts.join(" ")}function Zr(t,n,e){var r=t.beforeTransform,i=t.afterTransform,o=t.beforeTransform2,a=t.afterTransform2,s=t.targetAllTransform,u=e?Kt(s,n,4):Kt(n,s,4),l=Kt(Lt(e?o:r,4),u,4);return Kt(l,Lt(e?a:i,4),4)}function Kr(t){var n=t.datas,e=t.distX,r=t.distY,i=n.inverseBeforeMatrix,o=n.is3d,a=n.startDragBeforeDist,s=o?4:3;return Qt(en(i,Jt(n.absoluteOrigin,[e,r]),s),a)}function Jr(t,n){var e=t.datas,r=t.distX,i=t.distY,o=e.inverseBeforeMatrix,a=e.inverseMatrix,s=e.is3d,u=e.startDragBeforeDist,l=e.startDragDist,c=s?4:3;return Qt(en(n?o:a,Jt(e.absoluteOrigin,[r,i]),c),n?u:l)}function Qr(t){var n=[];return 0<=t[1]&&(0<=t[0]&&n.push(3),t[0]<=0&&n.push(2)),t[1]<=0&&(0<=t[0]&&n.push(1),t[0]<=0&&n.push(0)),n}function ti(n,t){return Qr(t).map(function(t){return n[t]})}function ni(t,n){var e=ti(t,n);return[kt(e.map(function(t){return t[0]})),kt(e.map(function(t){return t[1]}))]}function ei(t,n,e,r){return Kt(t,Ue(n,r,e),r)}function ri(e){var r=e.originalDatas.beforeRenderable;return{setTransform:function(t,n){void 0===n&&(n=-1),r.startTransforms=bt(t)?t:Ct(t),oi(e,n)},setTransformIndex:function(t){oi(e,t)}}}function ii(t,n){oi(t,Ot(t.originalDatas.beforeRenderable.startTransforms,function(t){return 0===t.indexOf(n+"(")}))}function oi(t,n){var e,r,i=t.originalDatas.beforeRenderable,o=t.datas;-1===(o.transformIndex=n)||(e=i.startTransforms[n])&&(r=Rn([e]),o.startValue=r[0].functionValue)}function ai(t,n){t.originalDatas.beforeRenderable.nextTransforms=Ct(n)}function si(t,n,e,r,i){return ai(i,n),{transform:n,drag:fo.drag(t,Yr(i,t.state,e,r,!1))}}function ui(t,n,e,r,i){var o,a,s,u,l,c,f,p,d,h=t.state,g=h.left,v=h.top,m=t.props.groupable,b=m?g:0,x=m?v:0,E=Qt(r,ci(t,e,(o=t.state,a=i,s=n,u=o.transformOrigin,l=o.offsetMatrix,c=o.is3d,f=a.beforeTransform,p=a.afterTransform,d=c?4:3,ei(l,$t(Kt(Kt(f,Mn([s]),4),p,4),4,d),u,d))));return Qt(E,[b,x])}function li(t){var n=t.state,e=n.width,r=n.height,i=n.transformOrigin;return[i[0]/(e/2)-1,i[1]/(r/2)-1]}function ci(t,n,e){void 0===e&&(e=t.state.allMatrix);var r=t.state,i=r.width,o=r.height,a=r.is3d?4:3;return or(e,[i/2*(1+n[0]),o/2*(1+n[1])],a)}function fi(t,n,e,r,i,o){var a,s,u,l,c,f,p,d,h,g=t.props.groupable,v=t.state,m=v.transformOrigin,b=v.targetMatrix,x=v.offsetMatrix,E=v.is3d,S=v.width,y=v.height,M=v.left,C=v.top,D=E?4:3,R=g?M:0,w=g?C:0,O=ei(x,b,(s=n,u=e,void 0===(l=S)&&(l=s),void 0===(c=y)&&(c=u),void 0===(f=m)&&(f=[0,0]),(a=o)?a.map(function(t,n){var e=wt(t),r=e.value,i=e.unit,o=n?c:l,a=n?u:s;return"%"===t||isNaN(r)?a*(o?f[n]/o:0):"%"!==i?r:a*r/100}):f),D);return Qt((p=i,d=r,h=ni(ar(O,n,e,D),d),[p[0]-h[0],p[1]-h[1]]),[R,w])}function pi(t,n){return ni(Sr(t.state),n)}var di=["left","right","center"],hi=["top","bottom","middle"],gi={start:"left",end:"right",center:"center"},vi={start:"top",end:"bottom",center:"middle"};function mi(t,n){var e=t.props,r=e.snappable,i=e.bounds,o=e.innerBounds,a=e.verticalGuidelines,s=e.horizontalGuidelines,u=e.snapGridWidth,l=e.snapGridHeight,c=t.state,f=c.guidelines,p=c.enableSnap;return r&&p&&!(n&&!0!==r&&r.indexOf(n)<0)&&!!(u||l||i||o||f&&f.length||a&&a.length||s&&s.length)}function bi(t){return!1===t?{}:!0!==t&&t?t:{left:!0,right:!0,top:!0,bottom:!0}}function xi(t,n){var e=function(t,n){var e=bi(t),r={};for(var i in e)i in n&&e[i]&&(r[i]=n[i]);return r}(t,n),r=hi.filter(function(t){return t in e}),i=di.filter(function(t){return t in e});return{horizontal:r.map(function(t){return e[t]}),vertical:i.map(function(t){return e[t]})}}function Ei(t,n,e,r,i,o,a){void 0===i&&(i=0),void 0===o&&(o=0),void 0===a&&(a={left:0,top:0,right:0,bottom:0});var s=[],u=a.left,l=a.top,c=a.bottom,f=e+a.right-u,p=r+c-l;return t&&t.forEach(function(t){s.push({type:"horizontal",pos:[u,Ft(t-o+l,.1)],size:f})}),n&&n.forEach(function(t){s.push({type:"vertical",pos:[Ft(t-i+u,.1),l],size:p})}),s}function Si(t,n){if(!n.length)return[];var e,r,i,o=t.state,a=o.containerClientRect,s=o.targetClientRect,u=s.top,l=s.left,p=o.rootMatrix,d=o.is3d?4:3,c=(r=d,i=or(p,[(e=a).clientLeft,e.clientTop],r),[e.left+i[0],e.top+i[1]]),h=c[0],g=c[1],f=jn(Sr(o)),v=Qt([f.minX,f.minY],Gr(p,[l-h,u-g],d)).map(function(t){return n=t,Math.round(n%1==-.5?n-1:n);var n}),m=v[0],b=v[1];return n.map(function(t){var n=t.element.getBoundingClientRect(),e=n.left-h,r=n.top-g,i=r+n.height,o=e+n.width,a=Gr(p,[e,r],d),s=a[0],u=a[1],l=Gr(p,[o,i],d),c=l[0],f=l[1];return Oe(Oe({},t),{rect:{left:s+m,right:c+m,top:u+b,bottom:f+b,center:(s+c)/2+m,middle:(u+f)/2+b}})})}function yi(t){var n,e,r,i,o,a,x,l,E,s=t.state,u=s.snapOffset,c=s.containerClientRect,f=c.overflow,p=c.scrollHeight,d=c.scrollWidth,h=c.clientHeight,g=c.clientWidth,v=c.clientLeft,m=c.clientTop,b=t.props,S=b.snapGap,y=void 0===S||S,M=b.verticalGuidelines,C=b.horizontalGuidelines,D=b.snapThreshold,R=void 0===D?5:D,w=b.snapGridWidth,O=void 0===w?0:w,P=b.snapGridHeight,G=void 0===P?0:P,B=Pe(function(t){var n=t.state,e=t.props.elementGuidelines,r=void 0===e?[]:e;if(!r.length)return n.elementRects=[],[];var i=(n.elementRects||[]).filter(function(t){return!t.refresh}),o=r.map(function(t){return mt(t)&&"element"in t?t:{element:Nr(t,!0)}}).filter(function(t){return t.element}),a=Bn(i.map(function(t){return t.element}),o.map(function(t){return t.element})),s=a.maintained,u=a.added,l=[];s.forEach(function(t){var n=t[0],e=t[1];l[e]=i[n]}),Si(t,u.map(function(t){return o[t]})).map(function(t,n){l[u[n]]=t}),n.elementRects=l;var C=bi(t.props.elementSnapDirections),D=[];return l.forEach(function(n){var e=n.element,t=n.top,r=void 0===t?C.top:t,i=n.left,o=void 0===i?C.left:i,a=n.right,s=void 0===a?C.right:a,u=n.bottom,l=void 0===u?C.bottom:u,c=n.center,f=void 0===c?C.center:c,p=n.middle,d=void 0===p?C.middle:p,h=n.className,g=n.rect,v=xi({top:r,right:s,left:o,bottom:l,center:f,middle:d},g),m=v.horizontal,b=v.vertical,x=g.top,E=g.left,S=g.right-E,y=g.bottom-x,M=[S,y];b.forEach(function(t){D.push({type:"vertical",element:e,pos:[Ft(t,.1),x],size:y,sizes:M,className:h,elementRect:n})}),m.forEach(function(t){D.push({type:"horizontal",element:e,pos:[E,Ft(t,.1)],size:S,sizes:M,className:h,elementRect:n})})}),D}(t));return y&&(e=(n=sr(Sr(t.state))).top,r=n.left,i=n.bottom,o=n.right,B.push.apply(B,(a={top:e,left:r,bottom:i,right:o,center:(r+o)/2,middle:(e+i)/2},x=R,l=t.state.elementRects,E=[],[["vertical",gi,vi],["horizontal",vi,gi]].forEach(function(t){var h=t[0],g=t[1],s=t[2],v=a[g.start],m=a[g.end],b=a[g.center],e=a[s.start],r=a[s.end];function i(t){var n=t.rect;return n[g.end]<v+x?v-n[g.end]:m-x<n[g.start]?n[g.start]-m:-1}var n=l.filter(function(t){var n=t.rect;return!(n[s.start]>r||n[s.end]<e)&&0<i(t)}).sort(function(t,n){return i(t)-i(n)}),u=[];n.forEach(function(a){n.forEach(function(t){var n,e,r,i,o;a!==t&&(n=a.rect,e=t.rect,r=n[s.start],i=n[s.end],o=e[s.start],e[s.end]<r||i<o||u.push([a,t]))})}),u.forEach(function(t){var n=t[0],e=t[1],r=n.rect,i=e.rect,o=r[g.start],a=r[g.end],s=i[g.start],u=i[g.end],l=0,c=0,f=!1,p=!1,d=!1;if(a<=v&&m<=s){if(p=!0,c=a+(l=(s-a-(m-v))/2)+(m-v)/2,Math.abs(c-b)>x)return}else if(a<s&&u<v+x){if(f=!0,c=u+(l=s-a),Math.abs(c-v)>x)return}else{if(!(a<s&&m-x<o))return;if(d=!0,c=o-(l=s-a),Math.abs(c-m)>x)return}l&&E.push({type:h,pos:"vertical"===h?[c,0]:[0,c],element:e.element,size:0,className:e.className,isStart:f,isCenter:p,isEnd:d,gap:l,hide:!0,gapRects:[n,e]})})}),E))),B.push.apply(B,function(t,n,e,r,i,o){void 0===i&&(i=0);void 0===o&&(o=0);var a=[];if(n)for(var s=0;s<=r;s+=n)a.push({type:"horizontal",pos:[0,Ft(s-o,.1)],size:e,hide:!0});if(t)for(s=0;s<=e;s+=t)a.push({type:"vertical",pos:[Ft(s-i,.1),0],size:r,hide:!0});return a}(O,G,f?d:g,f?p:h,v,m)),B.push.apply(B,Ei(C||!1,M||!1,f?d:g,f?p:h,v,m,u)),B}function Mi(t,n,e,r){var i=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var e=t.length-1,r=0;r<e;++r){var i=t[r];if(!vt(i))return i}return t[e]}(r,t.props.snapThreshold,5);return Ci(t.state.guidelines,n,e,i)}function Ci(t,n,e,r){return{vertical:wi(t,"vertical",n,r),horizontal:wi(t,"horizontal",e,r)}}function Di(t,n,e){var r=xi(t.props.snapDirections,n);return Mi(t,r.vertical,r.horizontal,e)}function Ri(t){var n=t.isSnap;if(!n)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var e=t.posInfos[0],r=e.guidelineInfos[0],i=r.offset,o=r.dist,a=r.guideline;return{isSnap:n,offset:i,dist:o,pos:e.pos,guideline:a}}function wi(e,i,t,o){if(!e||!e.length)return{isSnap:!1,index:-1,posInfos:[]};var a="vertical"===i?0:1,n=t.map(function(r,t){var n=e.map(function(t){var n=t.pos,e=r-n[a];return{offset:e,dist:Math.abs(e),guideline:t}}).filter(function(t){var n=t.guideline,e=t.dist;return!(n.type!==i||o<e)}).sort(function(t,n){return t.dist-n.dist});return{pos:r,index:t,guidelineInfos:n}}).filter(function(t){return 0<t.guidelineInfos.length}).sort(function(t,n){return t.guidelineInfos[0].dist-n.guidelineInfos[0].dist}),r=0<n.length;return{isSnap:r,index:r?n[0].index:-1,posInfos:n}}function Oi(t,n){var e=Math.abs(t.offset),r=Math.abs(n.offset);return t.isBound&&n.isBound?r-e:t.isBound?-1:n.isBound?1:t.isSnap&&n.isSnap?r-e:t.isSnap?-1:n.isSnap||e<_e?1:r<_e?-1:e-r}function Pi(t,a){return t.slice().sort(function(t,n){var e=t.sign[a],r=n.sign[a],i=t.offset[a],o=n.offset[a];return e?r?Oi({isBound:t.isBound,isSnap:t.isSnap,offset:i},{isBound:n.isBound,isSnap:n.isSnap,offset:o}):-1:1})[0]}function Gi(t,n){var e=kt([n[0][0],n[1][0]]),r=kt([n[0][1],n[1][1]]);return{vertical:e<=t[0],horizontal:r<=t[1]}}function Bi(t,n){var e,r,i=n[0],o=n[1],a=o[0]-i[0],s=o[1]-i[1];return Math.abs(a)<_e&&(a=0),Math.abs(s)<_e&&(s=0),r=a?(e=s?s/a*(t[0]-i[0])+i[1]:i[1],t[1]):(e=i[0],t[0]),e-r}function zi(t,e,r){void 0===r&&(r=_e);var i=Bi(t[0],e)<=0;return t.slice(1).every(function(t){var n=Bi(t,e);return n<=0==i||Math.abs(n)<=r})}function Ti(t,n,e,r,i){return void 0===i&&(i=0),r&&n-i<=t||!r&&t<=e+i?{isBound:!0,offset:r?n-t:e-t}:{isBound:!1,offset:0}}function ki(t,n,e,r,i){var o=t[0],a=t[1],s=n[0],u=n[1],l=kr(a[1]-o[1]),c=kr(a[0]-o[0]),f=kr(u[1]-s[1]);if(!kr(u[0]-s[0])){if(i&&!l)return{isBound:!1,offset:0};if(c)return Ti(l/c*(s[0]-o[0])+o[1],s[1],u[1],e,r);var p=s[0]-o[0];return{isBound:d=Math.abs(p)<=(r||0),offset:d?p:0}}if(f)return{isBound:!1,offset:0};if(i&&!c)return{isBound:!1,offset:0};if(l)return Ti((s[1]-o[1])/(l/c)+o[0],s[0],u[0],e,r);var d,p=s[1]-o[1];return{isBound:d=Math.abs(p)<=(r||0),offset:d?p:0}}function Ai(c,t,f,p){return t.map(function(t){var e=t[0],n=t[1],r=t[2],i=function(t,n,e){var r=t.props.innerBounds;if(!r)return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var i=r.left,o=r.top,a=r.width,s=r.height,u=[[i,o],[i,o+s]],l=[[i,o],[i+a,o]],c=[[i+a,o],[i+a,o+s]],f=[[i,o+s],[i+a,o+s]],p=Gi(e,n),d=p.horizontal,h=p.vertical;if(zi([e,[i,o],[i+a,o],[i,o+s],[i+a,o+s]],n))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var g=ki(n,l,h),v=ki(n,f,h),m=ki(n,u,d),b=ki(n,c,d),x=g.isBound&&v.isBound,E=g.isBound||v.isBound,S=m.isBound&&b.isBound,y=m.isBound||b.isBound,M=Pr(g.offset,v.offset),C=Pr(m.offset,b.offset),D=[0,0],R=!1;return{isAllBound:Math.abs(C)<Math.abs(M)?(D=[M,0],R=E,x):(D=[0,C],R=y,S),isVerticalBound:E,isHorizontalBound:y,isBound:R,offset:D}}(c,[n,r],f),o=i.isBound,a=i.offset,s=i.isVerticalBound,u=i.isHorizontalBound,l=Jr({datas:p,distX:a[0],distY:a[1]}).map(function(t,n){return t*(e[n]?2/e[n]:0)});return{sign:e,isBound:o,isVerticalBound:s,isHorizontalBound:u,isSnap:!1,offset:l}})}function Ii(t,n,e){var r,i,o,a,s,u,l,c,f,p,d,h,g,v=Ai(t,Ni(n,[0,0],!1).map(function(t){var n=t[0],e=t[1],r=t[2];return[n.map(function(t){return 2*Math.abs(t)}),e,r]}),ni(n,[0,0]),e),m=Pi(v,0),b=Pi(v,1),x=0,E=0,S=m.isVerticalBound||b.isVerticalBound,y=m.isHorizontalBound||b.isHorizontalBound;return(S||y)&&(i={datas:e,distX:-m.offset[0],distY:-b.offset[1]},a=i.datas,s=i.distX,u=i.distY,l=a.beforeMatrix,c=a.matrix,f=a.is3d,p=a.startDragBeforeDist,d=a.startDragDist,h=a.absoluteOrigin,g=f?4:3,x=(r=Qt(en(o?l:c,Jt(o?p:d,[s,u]),g),h))[0],E=r[1]),{vertical:{isBound:S,offset:x},horizontal:{isBound:y,offset:E}}}function Ni(i,t,n){return r=n,o=[],a=(e=t)[0],s=e[1],a&&s?o.push([[0,2*s],e,[-a,s]],[[2*a,0],e,[a,-s]]):a?(o.push([[2*a,0],[a,1],[a,-1]]),r&&o.push([[0,-1],[a,-1],[-a,-1]],[[0,1],[a,1],[-a,1]])):s?(o.push([[0,2*s],[1,s],[-1,s]]),r&&o.push([[-1,0],[-1,s],[-1,-s]],[[1,0],[1,s],[1,-s]])):o.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),o.map(function(t){var n=t[0],e=t[1],r=t[2];return[n,ni(i,e),ni(i,r)]});var e,r,o,a,s}function Fi(t,n,e,r){var i=r?t.map(function(t){return un(t,r)}):t,o=Pe([e],n);return[[i[0],i[1]],[i[1],i[3]],[i[3],i[2]],[i[2],i[0]]].some(function(t){return!zi(o,t)})}function ji(t,n,e,r,i){var o=t.props.innerBounds,a=i*Math.PI/180;if(!o)return[];var s=o.left,u=o.top,l=o.width,c=o.height,f=s-r[0],p=s+l-r[0],d=u-r[1],h=u+c-r[1],g=[[f,d],[p,d],[f,h],[p,h]],v=ni(e,[0,0]);if(!Fi(e,g,v,0))return[];var m=[],b=g.map(function(t){return[cr(t),At([0,0],t)]});return[[e[0],e[1]],[e[1],e[3]],[e[3],e[2]],[e[2],e[0]]].forEach(function(t){var i=At([0,0],function(t){var n=t[0],e=t[1],r=e[0]-n[0],i=e[1]-n[1];if(!r)return[n[0],0];if(!i)return[0,n[1]];var o=i/r,a=-o*n[0]+n[1];return[-a/(o+1/o),a/(o*o+1)]}(t)),o=function(t){var n=t[0],e=t[1],r=e[0]-n[0],i=e[1]-n[1];if(!r)return Math.abs(n[0]);if(!i)return Math.abs(n[1]);var o=i/r;return Math.abs((-o*n[0]+n[1])/Math.sqrt(Math.pow(o,2)+1))}(t);m.push.apply(m,b.filter(function(t){var n=t[0];return n&&o<=n}).map(function(t){var n=t[0],e=t[1],r=Math.acos(n?o/n:0);return[a+(e+r)-i,a+(e-r)-i]}).reduce(function(t,n){return t.push.apply(t,n),t},[]).filter(function(t){return!Fi(n,g,v,t)}).map(function(t){return Ft(180*t/Math.PI,_e)}))}),m}function _i(t,n,e){var r=t||{},i=r.position,o=r.left,a=r.top,s=r.right,u=r.bottom,l={position:void 0===i?"client":i,left:void 0===o?-1/0:o,top:void 0===a?-1/0:a,right:void 0===s?1/0:s,bottom:void 0===u?1/0:u};return{vertical:qi(l,n,!0),horizontal:qi(l,e,!1)}}function Yi(t,n){var e=t.state,r=e.containerClientRect,i=r.clientHeight,o=r.clientWidth,a=r.clientLeft,s=r.clientTop,u=e.snapOffset,l=u.left,c=u.top,f=u.right,p=u.bottom,d=n||t.props.bounds||{},h="css"===(d.position||"client"),g=d.left,v=d.top,m=d.right,b=void 0===m?h?-1/0:1/0:m,x=d.bottom,E=void 0===x?h?-1/0:1/0:x;return h&&(b=o+f-l-b,E=i+p-c-E),{left:(void 0===g?-1/0:g)+l-a,right:b+l-a,top:(void 0===v?-1/0:v)+c-s,bottom:E+c-s}}function qi(t,n,e){var r=t[e?"left":"top"],i=t[e?"right":"bottom"],o=Math.min.apply(Math,n),a=Math.max.apply(Math,n),s=[];return o<r+1&&s.push({isBound:!0,offset:o-r,pos:r}),i-1<a&&s.push({isBound:!0,offset:a-i,pos:i}),s.length||s.push({isBound:!1,offset:0,pos:0}),s.sort(function(t,n){return Math.abs(n.offset)-Math.abs(t.offset)})}function Xi(t,n,e){return(e?t.map(function(t){return un(t,e)}):t).some(function(t){return t[0]<n.left&&.1<Math.abs(t[0]-n.left)||t[0]>n.right&&.1<Math.abs(t[0]-n.right)||t[1]<n.top&&.1<Math.abs(t[1]-n.top)||t[1]>n.bottom&&.1<Math.abs(t[1]-n.bottom)})}function Wi(t,l,n,e,r){if(!t.props.bounds)return[];var c=r*Math.PI/180,i=Yi(t),o=i.left,a=i.top,s=i.right,u=i.bottom,f=o-e[0],p=s-e[0],d=a-e[1],h=u-e[1],g={left:f,top:d,right:p,bottom:h};if(!Xi(n,g,0))return[];var v=[];return[[f,0],[p,0],[d,1],[h,1]].forEach(function(t){var s=t[0],u=t[1];n.forEach(function(t){var e,n,r,i,o,a=At([0,0],t);v.push.apply(v,(n=s,r=u,i=cr(e=t),[o=Math.sqrt(i*i-n*n)||0,-o].sort(function(t,n){return Math.abs(t-e[r?0:1])-Math.abs(n-e[r?0:1])}).map(function(t){return At([0,0],r?[t,n]:[n,t])}).map(function(t){return c+t-a}).filter(function(t){return!Xi(l,g,t)}).map(function(t){return Ft(180*t/Math.PI,_e)})))})}),v}function Li(t,n){return e=Oe(Oe({},t),{classNames:Pe([Ve("line","guideline",t.direction)],t.classNames).filter(function(t){return t}),size:t.size||t.sizeValue+"px",pos:t.pos||t.posValue.map(function(t){return Ft(t,.1)+"px"})}),r=n,o=e.direction,a=e.classNames,s=e.size,u=e.pos,l=e.zoom,c=e.key,p=(f="horizontal"===o)?"Y":"X",r.createElement("div",{key:c,className:a.join(" "),style:((i={})[f?"width":"height"]=""+s,i.transform="translate("+u[0]+", "+u[1]+") translate"+p+"(-50%) scale"+p+"("+l+")",i)});var e,r,i,o,a,s,u,l,c,f,p}function Hi(t,o,n,a,s,u,l,c){var f=t.props.zoom;return n.map(function(t,n){var e=t.type,r=t.pos,i=[0,0];return i[l]=a,i[l?0:1]=-s+r,Li({key:o+"TargetGuideline"+n,classNames:[Ve("target","bold",e)],posValue:i,sizeValue:u,zoom:f,direction:o},c)})}function Vi(t,a,n,s,e,u){var r=t.props,l=r.zoom,i=r.isDisplayInnerSnapDigit,o="horizontal"===a?gi:vi,c=e[o.start],f=e[o.end];return n.filter(function(t){var n=t.hide,e=t.elementRect;if(n)return!1;if(i&&e){var r=e.rect;if(r[o.start]<=c&&f<=r[o.end])return!1}return!0}).map(function(t,n){var e=t.pos,r=t.size,i=t.element,o=[-s[0]+e[0],-s[1]+e[1]];return Li({key:a+"-default-guideline-"+n,classNames:i?[Ve("bold")]:[],direction:a,posValue:o,sizeValue:r,zoom:l},u)})}function Ui(t,n,e,r,i,o,a,s){var u,l=t.props,c=l.snapDigit,f=void 0===c?0:c,p=l.isDisplaySnapDigit,d=void 0===p||p,h=l.snapDistFormat,g=void 0===h?function(t){return t}:h,v=l.zoom,m="horizontal"===n?"X":"Y",b="vertical"===n?"height":"width",x=Math.abs(i),E=d?parseFloat(x.toFixed(f)):0;return s.createElement("div",{key:n+"-"+e+"-guideline-"+r,className:Ve("guideline-group",n),style:((u={left:o[0]+"px",top:o[1]+"px"})[b]=x+"px",u)},Li({direction:n,classNames:[Ve(e),a],size:"100%",posValue:[0,0],sizeValue:x,zoom:v},s),s.createElement("div",{className:Ve("size-value","gap"),style:{transform:"translate"+m+"(-50%) scale("+v+")"}},0<E?g(E):""))}function $i(M,i,C,D,R){var w=M.props.isDisplayInnerSnapDigit,O=[];return["vertical","horizontal"].forEach(function(s){var p,t,n,d,o,a,u,l,h,g,v,m,b,e=i.filter(function(t){return t.type===s}),c="vertical"===s?1:0,f=c?0:1,r=(t=e,d=w,g="vertical"===(p=s)?1:0,m=(n=D)[(v=(h="vertical"===p?0:1)?gi:vi).start],b=n[v.end],a=function(t){return t.pos[h]},u=[],l=[],(o=t).forEach(function(t,n){var e=a(t,n,o),r=l.indexOf(e),i=u[r]||[];-1===r&&(l.push(e),u.push(i)),i.push(t)}),u.map(function(t){var c=[],f=[];return t.forEach(function(t){var n,e,r,i,o,a,s,u=t.element,l=t.elementRect.rect;l[v.end]<m?c.push(t):b<l[v.start]?f.push(t):l[v.start]<=m&&b<=l[v.end]&&d&&(r=t.pos,i={element:u,rect:Oe(Oe({},l),((n={})[v.end]=l[v.start],n))},o={element:u,rect:Oe(Oe({},l),((e={})[v.start]=l[v.end],e))},s=[0,0],(a=[0,0])[h]=r[h],a[g]=r[g],s[h]=r[h],s[g]=r[g]+t.size,c.push({type:p,pos:a,size:0,elementRect:i}),f.push({type:p,pos:s,size:0,elementRect:o}))}),c.sort(function(t,n){return n.pos[g]-t.pos[g]}),f.sort(function(t,n){return t.pos[g]-n.pos[g]}),{total:t,start:c,end:f,inner:[]}})),x=c?vi:gi,E=c?gi:vi,S=D[x.start],y=D[x.end];r.forEach(function(t){var n=t.total,e=t.start,r=t.end,i=t.inner,a=C[f]+n[0].pos[f]-D[E.start],o=D;e.forEach(function(t){var n,e=t.elementRect.rect,r=o[x.start]-e[x.end];0<r&&((n=[0,0])[c]=C[c]+o[x.start]-S-r,n[f]=a,O.push(Ui(M,s,"dashed",O.length,r,n,t.className,R))),o=e}),o=D,r.forEach(function(t){var n,e=t.elementRect.rect,r=e[x.start]-o[x.end];0<r&&((n=[0,0])[c]=C[c]+o[x.end]-S,n[f]=a,O.push(Ui(M,s,"dashed",O.length,r,n,t.className,R))),o=e}),i.forEach(function(t){var n=t.elementRect.rect,e=S-n[x.start],r=n[x.end]-y,i=[0,0],o=[0,0];i[c]=C[c]-e,i[f]=a,o[c]=C[c]+y-S,o[f]=a,O.push(Ui(M,s,"dashed",O.length,e,i,t.className,R)),O.push(Ui(M,s,"dashed",O.length,r,o,t.className,R))})})}),O}function Zi(t,n,e,r,i){var o=function(t,n,e,r){var i=n[0]-t[0],o=n[1]-t[1];if(Math.abs(i)<ht&&(i=0),Math.abs(o)<ht&&(o=0),!i)return r?[0,0]:[0,e];if(!o)return r?[e,0]:[0,0];var a=o/i,s=t[1]-a*t[0];return r?[e,a*(n[0]+e)+s-n[1]]:[(n[1]+e-s)/a-n[0],e]}(t,n,e,r);if(!o)return{isOutside:!1,offset:[0,0]};var a=Nt(t,n),s=Nt(o,t),u=Nt(o,n),l=a<s||a<u,c=Jr({datas:i,distX:o[0],distY:o[1]});return{offset:[c[0],c[1]],isOutside:l}}function Ki(t,n){return t.isBound?t.offset:n.isSnap?Ri(n).offset:0}function Ji(t,n,e,r,i,o){if(!mi(t,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var a,s,u,l,c,f,p,d,h,g,v,m,b,x,E,S,y,M,C,D=Er(o.absolutePoses,[n,e]),R=sr(D),w=R.left,O=R.right,P=R.top,G=R.bottom,B={horizontal:D.map(function(t){return t[1]}),vertical:D.map(function(t){return t[0]})},z=Qi(t,i,xi(bi(t.props.snapDirections),{left:w,right:O,top:P,bottom:G,center:(w+O)/2,middle:(P+G)/2}),B),T=z.vertical,k=z.horizontal,A=Ii(t,D,o),I=A.vertical,N=A.horizontal,F=T.isSnap,j=k.isSnap,_=T.isBound||I.isBound,Y=k.isBound||N.isBound,q=Pr(T.offset,I.offset),X=Pr(k.offset,N.offset),W=(a=r,u=[_,Y],l=[F,j],c=[q,X],g=(s=[n,e])[0],v=s[1],m=u[0],b=u[1],x=l[0],E=l[1],S=c[0],y=c[1],M=-S,C=-y,a&&g&&v?(C=M=0,f=[],m&&b?f.push([0,y],[S,0]):m?f.push([S,0]):b?f.push([0,y]):x&&E?f.push([0,y],[S,0]):x?f.push([S,0]):E&&f.push([0,y]),f.length&&(f.sort(function(t,n){return cr(Qt([g,v],t))-cr(Qt([g,v],n))}),(p=f[0])[0]&&Math.abs(g)>ht?(M=-p[0],C=v*Math.abs(g+M)/Math.abs(g)-v):p[1]&&Math.abs(v)>ht&&(d=v,C=-p[1],M=g*Math.abs(v+C)/Math.abs(d)-g),a&&b&&m&&(Math.abs(M)>ht&&Math.abs(M)<Math.abs(S)?(M*=h=Math.abs(S)/Math.abs(M),C*=h):Math.abs(C)>ht&&Math.abs(C)<Math.abs(y)?(M*=h=Math.abs(y)/Math.abs(C),C*=h):(M=Pr(-S,M),C=Pr(-y,C))))):(M=g||m?-S:0,C=v||b?-y:0),[M,C]);return[{isBound:_,isSnap:F,offset:W[0]},{isBound:Y,isSnap:j,offset:W[1]}]}function Qi(t,n,e,r){void 0===r&&(r=e);var i=_i(Yi(t),r.vertical,r.horizontal),o=i.horizontal,a=i.vertical,s=n?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:Mi(t,e.vertical,e.horizontal),u=s.horizontal,l=s.vertical,c=Ki(o[0],u),f=Ki(a[0],l),p=Math.abs(c),d=Math.abs(f);return{horizontal:{isBound:o[0].isBound,isSnap:u.isSnap,snapIndex:u.index,offset:c,dist:p,bounds:o,snap:u},vertical:{isBound:a[0].isBound,isSnap:l.isSnap,snapIndex:l.index,offset:f,dist:d,bounds:a,snap:l}}}function to(t,n,e,r,i){var o=_i(n,e,r),a=o.horizontal,s=o.vertical,u=Ci(t,e,r,i),l=u.horizontal,c=u.vertical,f=Ki(a[0],l),p=Ki(s[0],c),d=Math.abs(f),h=Math.abs(p);return{horizontal:{isBound:a[0].isBound,isSnap:l.isSnap,snapIndex:l.index,offset:f,dist:d,bounds:a,snap:l},vertical:{isBound:s[0].isBound,isSnap:c.isSnap,snapIndex:c.index,offset:p,dist:h,bounds:s,snap:c}}}function no(L,H,t,V,U,$){return t.map(function(t){var n,e,r,i,o,a,s,u,l,c,f,p,d,h,g=t[0],v=t[1],m=ni(H,g),b=ni(H,v),x=V?(i=U,o=function(t,n,e){var r=Yi(t),i=r.left,o=r.top,a=r.right,s=r.bottom,u=e[0],l=e[1],c=Qt(e,n),f=c[0],p=c[1];Math.abs(f)<_e&&(f=0),Math.abs(p)<_e&&(p=0);var d,h,g,v,m,b=0<p,x=0<f,E={isBound:!1,offset:0,pos:0},S={isBound:!1,offset:0,pos:0};return 0===f&&0===p||(0===f?b?s<l&&(S.pos=s,S.offset=l-s):l<o&&(S.pos=o,S.offset=l-o):0===p?x?a<u&&(E.pos=a,E.offset=u-a):u<i&&(E.pos=i,E.offset=u-i):(d=p/f,h=e[1]-d*u,v=g=0,m=!1,x&&a<=u?(g=d*a+h,v=a,m=!0):!x&&u<=i&&(g=d*i+h,v=i,m=!0),m&&(g<o||s<g)&&(m=!1),m||(b&&s<=l?(v=((g=s)-h)/d,m=!0):!b&&l<=o&&(v=((g=o)-h)/d,m=!0)),m&&(E.isBound=!0,E.pos=v,E.offset=u-v,S.isBound=!0,S.pos=g,S.offset=l-g))),{vertical:E,horizontal:S}}(n=L,e=m,r=b),a=o.horizontal,s=o.vertical,u=i?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:function(t,n,e){var r=e[0],i=e[1],o=n[0],a=n[1],s=Qt(e,n),u=s[0],l=0<(f=s[1]),c=0<u,u=kr(u),f=kr(f),p={isSnap:!1,offset:0,pos:0},d={isSnap:!1,offset:0,pos:0};if(0===u&&0===f)return{vertical:p,horizontal:d};var h=Mi(t,u?[r]:[],f?[i]:[]),g=h.vertical,v=h.horizontal;g.posInfos.filter(function(t){var n=t.pos;return c?o<=n:n<=o}),v.posInfos.filter(function(t){var n=t.pos;return l?a<=n:n<=a}),g.isSnap=0<g.posInfos.length,v.isSnap=0<v.posInfos.length;var m,b,x,E,S,y=Ri(g),M=y.isSnap,C=y.guideline,D=Ri(v),R=D.isSnap,w=D.guideline,O=R?w.pos[1]:0,P=M?C.pos[0]:0;return 0===u?R&&(d.isSnap=!0,d.pos=w.pos[1],d.offset=i-d.pos):0===f?M&&(p.isSnap=!0,p.pos=P,p.offset=r-P):(m=f/u,b=e[1]-m*r,E=x=0,S=!1,M?(x=m*(E=P)+b,S=!0):R&&(E=((x=O)-b)/m,S=!0),S&&(p.isSnap=!0,p.pos=E,p.offset=r-E,d.isSnap=!0,d.pos=x,d.offset=i-x)),{vertical:p,horizontal:d}}(n,e,r),l=u.horizontal,c=u.vertical,f=eo(a,l),p=eo(s,c),d=Math.abs(f),h=Math.abs(p),{horizontal:{isBound:a.isBound,isSnap:l.isSnap,offset:f,dist:d},vertical:{isBound:s.isBound,isSnap:c.isSnap,offset:p,dist:h}}):Qi(L,U,{vertical:[b[0]],horizontal:[b[1]]}),E=x.horizontal,S=E.offset,y=E.isBound,M=E.isSnap,C=x.vertical,D=C.offset,R=C.isBound,w=C.isSnap,O=Qt(v,g);if(!D&&!S)return{isBound:R||y,isSnap:w||M,sign:O,offset:[0,0]};var P,G,B,z,T,k,A,I,N,F,j,_,Y,q=(P=x,G=V,B=At(m,b)/Math.PI*180,z=P.vertical,T=z.isBound,k=z.isSnap,A=z.dist,I=P.horizontal,N=I.isBound,F=I.isSnap,_=(j=B%180)<3||177<j,Y=87<j&&j<93,I.dist<A&&(T||k&&!Y&&(!G||!_))?"vertical":!N&&(!F||_||G&&Y)?"":"horizontal");if(!q)return{sign:O,isBound:!1,isSnap:!1,offset:[0,0]};var X="vertical"==q,W=Zi(m,b,-(X?D:S),X,$).offset.map(function(t,n){return t*(O[n]?2/O[n]:0)});return{sign:O,isBound:X?R:y,isSnap:X?w:M,offset:W}})}function eo(t,n){return t.isBound?t.offset:n.isSnap?n.offset:0}function ro(t){var n,e,r,i,o,a,s,u,l=t.state;l.guidelines&&l.guidelines.length||(n=t.state.container,e=t.props.snapContainer||n,r=l.containerClientRect,i={left:0,top:0,bottom:0,right:0},n===e||(o=Nr(e,!0))&&(s=jr(l,[(a=br(o)).left-r.left,a.top-r.top]),u=jr(l,[a.right-r.right,a.bottom-r.bottom]),i.left=Ft(s[0],.1),i.top=Ft(s[1],.1),i.right=Ft(u[0],.1),i.bottom=Ft(u[1],.1)),l.snapOffset=i,l.guidelines=yi(t),l.enableSnap=!0)}function io(t,n,e,r,i,o){var a=ar(t,n,e,o?4:3);return Er(a,Qt(r,ni(a,i.map(function(t){return-t}))))}function oo(t,n,e,r,i,o,a,s){for(var u,l,c,f,p,d,h,g,v,m,b,x,E,S,y,M,C,D,R,w,O,P,G,B,z,T,k,A,I,N,F,j,_,Y,q,X,W,L,H,V,U=Sr(t.state),$=t.props.keepRatio,Z=0,K=0,J=0;J<2;++J){var Q,tt,nt=n(Z,K),et=(u=t,l=nt,p=a,d=s,y=S=E=x=b=m=v=g=h=void 0,g=f=$,v=[],m=[-(h=c=i)[0],-h[1]],h[0]&&h[1]?(v.push([m,[h[0],-h[1]]],[m,[-h[0],h[1]]]),g&&v.push([m,h])):h[0]?g?v.push([m,[m[0],-1]],[m,[m[0],1]],[m,[h[0],-1]],[m,h],[m,[h[0],1]]):v.push([[m[0],-1],[h[0],-1]],[[m[0],0],[h[0],0]],[[m[0],1],[h[0],1]]):h[1]?g?v.push([m,[-1,m[1]]],[m,[1,m[1]]],[m,[-1,h[1]]],[m,[1,h[1]]],[m,h]):v.push([[-1,m[1]],[-1,h[1]]],[[0,m[1]],[0,h[1]]],[[1,m[1]],[1,h[1]]]):v.push([m,[1,0]],[m,[-1,0]],[m,[0,-1]],[m,[0,1]],[[1,0],[1,-1]],[[1,0],[1,1]],[[0,1],[1,1]],[[0,1],[-1,1]],[[-1,0],[-1,-1]],[[-1,0],[-1,1]],[[0,-1],[1,-1]],[[0,-1],[-1,-1]]),b=v,x=Ni(l,c,f),E=Pe(no(u,l,b,f,p,d),Ai(u,x,ni(l,[0,0]),d)),S=Pi(E,0),y=Pi(E,1),{width:{isBound:S.isBound,offset:S.offset[0]},height:{isBound:y.isBound,offset:y.offset[1]}}),rt=et.width,it=et.height,ot=rt.isBound,at=it.isBound,st=rt.offset,ut=it.offset;if(1===J&&(ot||(st=0),at||(ut=0)),0===J&&a&&!ot&&!at)return[0,0];$&&(Q=Math.abs(st)*(e?1/e:1),tt=Math.abs(ut)*(r?1/r:1),(ot&&at?Q<tt:at||!ot&&Q<tt)?st=e*ut/r:ut=r*st/e),Z+=st,K+=ut}return i[0]&&i[1]&&(w=t,O=U,G=o,B=s,Y=[-(P=i)[0],-P[1]],q=w.state,X=q.width,W=q.height,L=w.props.bounds,V=H=1/0,L&&(z=[[P[0],-P[1]],[-P[0],P[1]]],T=L.left,k=void 0===T?-1/0:T,A=L.top,I=void 0===A?-1/0:A,N=L.right,F=void 0===N?1/0:N,j=L.bottom,_=void 0===j?1/0:j,z.forEach(function(t){var n,e,r,i,o,a,s,u=t[0]!==Y[0],l=t[1]!==Y[1],c=ni(O,t),f=360*At(G,c)/Math.PI;l&&(i=c.slice(),(Math.abs(f-360)<2||Math.abs(f-180)<2)&&(i[1]=G[1]),e=(n=Zi(G,i,(G[1]<c[1]?_:I)-c[1],!1,B)).offset[1],r=n.isOutside,isNaN(e)||(V=W+(r?1:-1)*Math.abs(e))),u&&(i=c.slice(),(Math.abs(f-90)<2||Math.abs(f-270)<2)&&(i[0]=G[0]),a=(o=Zi(G,i,(G[0]<c[0]?F:k)-c[0],!0,B)).offset[0],s=o.isOutside,isNaN(a)||(H=X+(s?1:-1)*Math.abs(a)))})),C=(M={maxWidth:H,maxHeight:V}).maxWidth,D=M.maxHeight,Z+=st=(R=function(t,n,e,r,i,o,a,s,u){var l=ni(n,a),c=Qi(t,s,{vertical:[l[0]],horizontal:[l[1]]}),f=c.horizontal.offset,p=c.vertical.offset;if(p||f){var d=Jr({datas:u,distX:-p,distY:-f}),h=d[0],g=d[1];return[Math.min(i||1/0,e+a[0]*h)-e,Math.min(o||1/0,r+a[1]*g)-r]}return[0,0]}(t,n(Z,K).map(function(t){return t.map(function(t){return Ft(t,je)})}),e+Z,r+K,C,D,i,a,s))[0],K+=ut=R[1]),[Z,K]}function ao(t,n,e,r){if(!mi(t,"rotatable"))return r;var i=n.pos1,o=n.pos2,a=n.pos3,s=n.pos4,u=r*Math.PI/180,l=[i,o,a,s].map(function(t){return Qt(t,e)}),c=l.map(function(t){return un(t,u)}),f=Pe(Wi(t,l,c,e,r),ji(t,l,c,e,r));return f.sort(function(t,n){return Math.abs(t-r)-Math.abs(n-r)}),f.length?f[0]:r}function so(t,s,u,n,l){var c=l.width,f=l.height,p=l.fixedPosition;if(!mi(t,"scalable"))return[0,0];var d=l.is3d,e=oo(t,function(t,n){return io((e=l,r=Jt(s,[t/c,n/f]),i=e.transformOrigin,o=e.offsetMatrix,a=e.is3d?4:3,ei(o,Kt(e.targetMatrix,dn(r,a),a),i,a)),c,f,p,u,d);var e,r,i,o,a},c,f,u,p,n,l);return[e[0]/c,e[1]/f]}function uo(t){var e=[];return t.forEach(function(t){t.guidelineInfos.forEach(function(t){var n=t.guideline;-1<e.indexOf(n)||e.push(n)})}),e}function lo(t,n,e,i,o,r){var a=_i(Yi(t,r),n,e),s=a.vertical,u=a.horizontal;s.forEach(function(t){t.isBound&&i.push({type:"bounds",pos:t.pos})}),u.forEach(function(t){t.isBound&&o.push({type:"bounds",pos:t.pos})});var l=function(t){var n=t.props.innerBounds;if(!n)return{vertical:[],horizontal:[]};var e=t.getRect(),r=e.pos1,i=e.pos2,o=e.pos3,a=e.pos4,u=ni([r,i,o,a],[0,0]),l=n.left,c=n.top,f=n.width,p=n.height,d=[[l,c],[l,c+p]],h=[[l,c],[l+f,c]],g=[[l+f,c],[l+f,c+p]],v=[[l,c+p],[l+f,c+p]],m=[],b=[],x={top:!1,bottom:!1,left:!1,right:!1};return[[r,i],[i,a],[a,o],[o,r]].forEach(function(t){var n=Gi(u,t),e=n.horizontal,r=n.vertical,i=ki(t,h,r,1,!0),o=ki(t,v,r,1,!0),a=ki(t,d,e,1,!0),s=ki(t,g,e,1,!0);i.isBound&&!x.top&&(m.push(c),x.top=!0),o.isBound&&!x.bottom&&(m.push(c+p),x.bottom=!0),a.isBound&&!x.left&&(b.push(l),x.left=!0),s.isBound&&!x.right&&(b.push(l+f),x.right=!0)}),{horizontal:m,vertical:b}}(t),c=l.vertical,f=l.horizontal;c.forEach(function(r){0<=Ot(i,function(t){var n=t.type,e=t.pos;return"bounds"===n&&e===r})||i.push({type:"bounds",pos:r})}),f.forEach(function(r){0<=Ot(o,function(t){var n=t.type,e=t.pos;return"bounds"===n&&e===r})||o.push({type:"bounds",pos:r})})}var co={name:"snappable",props:{snappable:[Boolean,Array],snapContainer:Object,snapDirections:[Boolean,Object],elementSnapDirections:[Boolean,Object],snapGap:Boolean,snapGridWidth:Number,snapGridHeight:Number,isDisplaySnapDigit:Boolean,isDisplayInnerSnapDigit:Boolean,snapDigit:Number,snapThreshold:Number,horizontalGuidelines:Array,verticalGuidelines:Array,elementGuidelines:Array,bounds:Object,innerBounds:Object,snapDistFormat:Function},events:{onSnap:"snap"},css:[":host {\n    --bounds-color: #d66;\n}\n.guideline {\n    pointer-events: none;\n    z-index: 2;\n}\n.guideline.bounds {\n    background: #d66;\n    background: var(--bounds-color);\n}\n.guideline-group {\n    position: absolute;\n    top: 0;\n    left: 0;\n}\n.guideline-group .size-value {\n    position: absolute;\n    color: #f55;\n    font-size: 12px;\n    font-weight: bold;\n}\n.guideline-group.horizontal .size-value {\n    transform-origin: 50% 100%;\n    transform: translateX(-50%);\n    left: 50%;\n    bottom: 5px;\n}\n.guideline-group.vertical .size-value {\n    transform-origin: 0% 50%;\n    top: 50%;\n    transform: translateY(-50%);\n    left: 5px;\n}\n.guideline.gap {\n    background: #f55;\n}\n.size-value.gap {\n    color: #f55;\n}\n"],render:function(t,n){var e=t.state,r=e.top,i=e.left,o=e.pos1,a=e.pos2,s=e.pos3,u=e.pos4,l=e.snapRenderInfo;if(!l||!mi(t,""))return[];e.guidelines=yi(t);var c,f=Math.min(o[0],a[0],s[0],u[0]),p=Math.min(o[1],a[1],s[1],u[1]),d=l.externalPoses||[],h=Sr(t.state),g=[],v=[],m=[],b=[],x=[],E=sr(h),S=E.width,y=E.height,M=E.top,C=E.left,D=E.bottom,R=E.right,w={left:C,right:R,top:M,bottom:D,center:(C+R)/2,middle:(M+D)/2},O=0<d.length,P=O?sr(d):{};l.request||(l.direction&&x.push(function(t,n,e){var r=[];if(e[0]&&e[1])r=[e,[-e[0],e[1]],[e[0],-e[1]]].map(function(t){return ni(n,t)});else if(e[0]||e[1])t.props.keepRatio?r=[[-1,-1],[-1,1],[1,-1],[1,1],e].map(function(t){return ni(n,t)}):1<(r=ti(n,e)).length&&r.push([(r[0][0]+r[1][0])/2,(r[0][1]+r[1][1])/2]);else for(var i=[n[0],n[1],n[3],n[2],n[0]],o=0;o<4;++o)r.push(i[o]),r.push([(i[o][0]+i[o+1][0])/2,(i[o][1]+i[o+1][1])/2]);return Mi(t,r.map(function(t){return t[0]}),r.map(function(t){return t[1]}),1)}(t,h,l.direction)),l.snap&&(c=sr(h),l.center&&(c.middle=(c.top+c.bottom)/2,c.center=(c.left+c.right)/2),x.push(Di(t,c,1))),O&&(l.center&&(P.middle=(P.top+P.bottom)/2,P.center=(P.left+P.right)/2),x.push(Di(t,P,1))),x.forEach(function(t){var n=t.vertical.posInfos,e=t.horizontal.posInfos;g.push.apply(g,n.filter(function(t){return t.guidelineInfos.some(function(t){return!t.guideline.hide})}).map(function(t){return{type:"snap",pos:t.pos}})),v.push.apply(v,e.filter(function(t){return t.guidelineInfos.some(function(t){return!t.guideline.hide})}).map(function(t){return{type:"snap",pos:t.pos}})),m.push.apply(m,uo(n)),b.push.apply(b,uo(e))})),lo(t,[C,R],[M,D],g,v),O&&lo(t,[P.left,P.right],[P.top,P.bottom],g,v,l.externalBounds);var G,B,z,T,k,A,I=Pe(m,b),N=I.filter(function(t){return t.element&&!t.gapRects}),F=I.filter(function(t){return t.gapRects});return Dr(t,"onSnap",{guidelines:I.filter(function(t){return!t.element}),elements:N,gaps:F},!0),Pe($i(t,N,[f,p],w,n),(G=t,B=F,z=[f,p],T=w,k=n,A=[],["horizontal","vertical"].forEach(function(n){var t=B.filter(function(t){return t.type===n}),s="vertical"===n?0:1,u=s?0:1,l=s?vi:gi,c=s?gi:vi,f=T[l.start],p=T[l.end],d=T[c.start],h=T[c.end];t.forEach(function(t){var r=t.gap,n=t.gapRects,i=t.className,e=Math.max.apply(Math,Pe([d],n.map(function(t){return t.rect[c.start]}))),o=Math.min.apply(Math,Pe([h],n.map(function(t){return t.rect[c.end]}))),a=(e+o)/2;e!==o&&a!=(d+h)/2&&n.forEach(function(t){var n=t.rect,e=[z[0],z[1]];if(n[l.end]<f)e[s]+=n[l.end]-f;else{if(!(p<n[l.start]))return;e[s]+=n[l.start]-f-r}e[u]+=a-d,A.push(Ui(G,s?"vertical":"horizontal","gap",A.length,r,e,i,k))})})}),A),Vi(t,"horizontal",b,[i,r],w,n),Vi(t,"vertical",m,[i,r],w,n),Hi(t,"horizontal",v,f,r,S,0,n),Hi(t,"vertical",g,p,i,y,1,n))},dragStart:function(t,n){t.state.snapRenderInfo={request:n.isRequest,snap:!0,center:!0},ro(t)},drag:function(t){t.state.guidelines=yi(t)},pinchStart:function(t){this.unset(t)},dragEnd:function(t){this.unset(t)},dragControlCondition:function(t,n){return!(!Ar(0,n)&&!So(t,n))||(!n.isRequest&&n.inputEvent?_t(n.inputEvent.target,Ve("snap-control")):void 0)},dragControlStart:function(t){t.state.snapRenderInfo=null,ro(t)},dragControl:function(t){this.drag(t)},dragControlEnd:function(t){this.unset(t)},dragGroupStart:function(t,n){this.dragStart(t,n)},dragGroup:function(t){this.drag(t)},dragGroupEnd:function(t){this.unset(t)},dragGroupControlStart:function(t){t.state.snapRenderInfo=null,ro(t)},dragGroupControl:function(t){this.drag(t)},dragGroupControlEnd:function(t){this.unset(t)},unset:function(t){var n=t.state;n.enableSnap=!1,n.guidelines=[],n.snapRenderInfo=null,n.elementRects=[]}},fo={name:"draggable",props:{draggable:Boolean,throttleDrag:Number,throttleDragRotate:Number,startDragRotate:Number,edgeDraggable:Boolean},events:{onDragStart:"dragStart",onDrag:"drag",onDragEnd:"dragEnd",onDragGroupStart:"dragGroupStart",onDragGroup:"dragGroup",onDragGroupEnd:"dragGroupEnd"},render:function(t,n){var e=t.props,r=e.throttleDragRotate,i=e.zoom,o=t.state,a=o.dragInfo,s=o.beforeOrigin;if(!r||!a)return[];var u=a.dist;if(!u[0]&&!u[1])return[];var l=cr(u),c=At(u,[0,0]);return[n.createElement("div",{className:Ve("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:l+"px",transform:"translate("+s[0]+"px, "+s[1]+"px) rotate("+c+"rad) scaleY("+i+")"}})]},dragStart:function(t,n){var e=n.datas,r=n.parentEvent,i=n.parentGesto,o=t.state,a=o.target;if(o.gesto)return!1;o.gesto=i||t.targetGesto;var s,u=Rr(a);e.datas={},e.left=parseFloat(u.left||"")||0,e.top=parseFloat(u.top||"")||0,e.bottom=parseFloat(u.bottom||"")||0,e.right=parseFloat(u.right||"")||0,e.startValue=[0,0],Vr(t,n),ii(n,"translate"),s=t,e.absolutePoses=Sr(s.state),e.prevDist=[0,0],e.prevBeforeDist=[0,0],e.isDrag=!1,e.deltaOffset=[0,0],e.distOffset=[0,0];var l=Mr(t,n,Oe({set:function(t){e.startValue=t}},ri(n)));return!1!==(r||Dr(t,"onDragStart",l))?(e.isDrag=!0,t.state.dragInfo={startRect:t.getRect(),dist:[0,0]}):(o.gesto=null,e.isPinch=!1),!!e.isDrag&&l},drag:function(t,n){if(n){Ur(n,"translate");var e=n.datas,r=n.parentEvent,i=n.parentFlag,o=n.isPinch,a=n.isRequest,s=n.distX,u=n.distY,l=e.isDrag,c=e.prevDist,f=e.prevBeforeDist,p=e.startValue,d=e.distOffset;if(l){s+=d[0],u+=d[1];var h,g,v,m,b,x,E,S,y,M,C,D,R=t.props,w=R.parentMoveable,O=!r&&R.throttleDrag||0,P=!r&&R.throttleDragRotate||0,G=!1,B=0;!r&&0<P&&(s||u)&&(g=Ft((h=R.startDragRotate||0)+180*At([0,0],[s,u])/Math.PI,P)-h,v=u*Math.abs(Math.cos((g-90)/180*Math.PI)),m=cr([s*Math.abs(Math.cos(g/180*Math.PI)),v]),B=g*Math.PI/180,s=m*Math.cos(B),u=m*Math.sin(B)),o||r||i||P&&!s&&!u||(x=(b=Ji(t,s,u,P,a,e))[0],E=b[1],S=x.isSnap,y=x.isBound,M=x.offset,C=E.isSnap,D=E.isBound,G=S||C||y||D,s+=M,u+=E.offset);var z,T,k,A=Jt(Kr({datas:e,distX:s,distY:u}),p),I=Jt((T=(z={datas:e,distX:s,distY:u}).datas,k=Kr({datas:T,distX:z.distX,distY:z.distY}),en(Zr(T,Vt([k[0],k[1]],4)),Ut([0,0,0],4),4)),p);P||G||(jt(I,O),jt(A,O));var N=Qt(A,p),F=Qt(I,p),j=Qt(F,c),_=Qt(N,f);e.prevDist=F,e.prevBeforeDist=N,e.passDelta=j,e.passDist=F;var Y=e.left+N[0],q=e.top+N[1],X=e.right-N[0],W=e.bottom-N[1],L=$r(e,"translate("+I[0]+"px, "+I[1]+"px)","translate("+F[0]+"px, "+F[1]+"px)");if(t.state.dragInfo.dist=r?[0,0]:F,r||w||!j.every(function(t){return!t})||!_.some(function(t){return!t})){var H=t.state,V=Mr(t,n,{transform:L,dist:F,delta:j,translate:I,beforeDist:N,beforeDelta:_,beforeTranslate:A,left:Y,top:q,right:X,bottom:W,width:H.width,height:H.height,isPinch:o});return r||Dr(t,"onDrag",V),V}}}},dragAfter:function(t,n){var e=n.datas,r=n.datas,i=r.deltaOffset,o=r.distOffset;return!(!i[0]&&!i[1])&&(e.deltaOffset=[0,0],o[0]+=i[0],o[1]+=i[1],this.drag(t,n))},dragEnd:function(t,n){var e=n.parentEvent,r=n.datas,i=n.isDrag;if(t.state.gesto=null,t.state.dragInfo=null,r.isDrag)return r.isDrag=!1,e||Dr(t,"onDragEnd",Cr(t,n,{})),i},dragGroupStart:function(t,n){var e=n.datas,r=n.clientX,i=n.clientY,o=this.dragStart(t,n);if(!o)return!1;var a=Wr(t,this,"dragStart",[r||0,i||0],n,!1),s=Dr(t,"onDragGroupStart",Oe(Oe({},o),{targets:t.props.targets,events:a}));return e.isDrag=!1!==s,!!e.isDrag&&o},dragGroup:function(t,n){if(n.datas.isDrag){var e=this.drag(t,n),r=Wr(t,this,"drag",n.datas.passDelta,n,!1);if(e){var i=Oe({targets:t.props.targets,events:r},e);return Dr(t,"onDragGroup",i),i}}},dragGroupEnd:function(t,n){var e=n.isDrag;if(n.datas.isDrag)return this.dragEnd(t,n),Wr(t,this,"dragEnd",[0,0],n,!1),Dr(t,"onDragGroupEnd",Cr(t,n,{targets:t.props.targets})),e},request:function(t){var n={},e=t.getRect(),r=0,i=0;return{isControl:!1,requestStart:function(){return{datas:n}},request:function(t){return"x"in t?r=t.x-e.left:"deltaX"in t&&(r+=t.deltaX),"y"in t?i=t.y-e.top:"deltaY"in t&&(i+=t.deltaY),{datas:n,distX:r,distY:i}},requestEnd:function(){return{datas:n,isDrag:!0}}}},unset:function(t){t.state.dragInfo=null}};function po(t,n,r,i){void 0===i&&(i="");var e=t.state,o=e.renderPoses,a=e.rotation,s=e.direction,u=t.props,l=u.renderDirections,c=void 0===l?n:l,f=u.zoom,p={};if(!c)return[];var d=0<s?1:-1,h=!0===c?Xe:c,g=a/Math.PI*180;return h.forEach(function(t){p[t]=!0}),h.map(function(t){var n=We[t];if(!n||!p[t])return null;var e=(Ft(g,15)+d*Le[t]+720)%180;return r.createElement("div",{className:Ve("control","direction",t,i),"data-rotation":e,"data-direction":t,key:"direction-"+t,style:dr.apply(void 0,Pe([a,f],n.map(function(t){return o[t]})))})})}function ho(t,n,e,r,i,o){for(var a=[],s=6;s<arguments.length;s++)a[s-6]=arguments[s];var u=At(e,r),l=n?Ft(u/Math.PI*180,15)%180:-1;return t.createElement("div",{key:"line"+o,className:Ve.apply(void 0,Pe(["line","direction",n],a)),"data-rotation":l,"data-line-index":o,"data-direction":n,style:pr(e,r,i,u)})}function go(t,n){return po(t,Xe,n)}function vo(t,n){return po(t,["nw","ne","sw","se"],n)}function mo(t,n,e,r,i,o){var a=t.state.is3d?4:3,s=or(t.state.rootMatrix,i,a),u=Jt([o.left,o.top],s);n.startAbsoluteOrigin=u,n.prevDeg=At(u,[e,r])/Math.PI*180,n.prevSnapDeg=n.prevDeg,n.startDeg=n.prevDeg,n.loop=0}function bo(t,n,e,r,i,o){var a=e.prevDeg,s=ao(t,n,e.origin,r);return[(e.prevDeg=s)-a,s,o+s]}function xo(t,n,e,r,i,o,a,s){var u=e.prevDeg,l=e.prevSnapDeg,c=e.startDeg,f=e.loop;r<u&&270<u&&r<90?++e.loop:u<r&&u<90&&270<r&&--e.loop;var p=e.loop,d=360*f+l-c+o,h=360*p+r-c+o;e.prevDeg=h-360*p+c-o;var g=i*((h=Ft(h,a))-o);return s&&(h=(g=ao(t,n,e.origin,g))/i+o),e.prevSnapDeg=h-360*p+c-o,[i*(h-d),g,o+g]}function Eo(t,n,e,r,i,o,a,s){return xo(t,n,e,At(e.startAbsoluteOrigin,[i,o])/Math.PI*180,r,a,s,!0)}function So(t,n){if(n.isRequest)return"rotatable"===n.requestAble;var e=n.inputEvent.target;if(_t(e,Ve("rotation-control")))return!0;var r=t.props.rotationTarget;return!!r&&Fr(r,!0).some(function(t){return!!t&&(e===t||e.contains(t))})}var yo={name:"rotatable",canPinch:!0,props:{rotatable:Boolean,rotationPosition:String,throttleRotate:Number,renderDirections:Object,rotationTarget:Object},events:{onRotateStart:"rotateStart",onRotate:"rotate",onRotateEnd:"rotateEnd",onRotateGroupStart:"rotateGroupStart",onRotateGroup:"rotateGroup",onRotateGroupEnd:"rotateGroupEnd"},css:[".rotation {\n            position: absolute;\n            height: 40px;\n            width: 1px;\n            transform-origin: 50% 100%;\n            height: calc(40px * var(--zoom));\n            top: auto;\n            left: 0;\n            bottom: 100%;\n            will-change: transform;\n        }\n        .rotation .rotation-line {\n            display: block;\n            width: 100%;\n            height: 100%;\n            transform-origin: 50% 50%;\n        }\n        .rotation .rotation-control {\n            border-color: #4af;\n            border-color: var(--moveable-color);\n            background:#fff;\n            cursor: alias;\n        }"],render:function(t,n){var e=t.props,r=e.rotatable,i=e.rotationPosition,o=e.zoom,a=e.renderDirections,s=t.state,u=s.renderPoses,l=s.direction;if(!r)return null;var c,f,p=function(t,n,e){var r=n[0],i=n[1],o=n[2],a=n[3];if("none"!==t){var s=(t||"top").split("-"),u=s[0],l=s[1],c=[r,i];"left"===u?c=[o,r]:"right"===u?c=[i,a]:"bottom"===u&&(c=[a,o]);var f,p,d=[(c[0][0]+c[1][0])/2,(c[0][1]+c[1][1])/2],h=gr(c,e);return l&&(p="bottom"===u||"left"===u,d=c[(f="top"===l||"left"===l)&&!p||!f&&p?0:1]),[d,h]}}(i,u,l),d=[];return p&&(c=p[0],f=p[1],d.push(n.createElement("div",{key:"rotation",className:Ve("rotation"),style:{transform:"translate(-50%) translate("+c[0]+"px, "+c[1]+"px) rotate("+f+"rad)"}},n.createElement("div",{className:Ve("line rotation-line"),style:{transform:"scaleX("+o+")"}}),n.createElement("div",{className:Ve("control rotation-control"),style:{transform:"translate(0.5px) scale("+o+")"}})))),a&&d.push.apply(d,po(t,[],n)),d},dragControlCondition:So,dragControlStart:function(t,n){var e=n.datas,r=n.clientX,i=n.clientY,o=n.parentRotate,a=n.parentFlag,s=n.isPinch,u=n.isRequest,l=t.state,c=l.target,f=l.left,p=l.top,d=l.origin,h=l.beforeOrigin,g=l.direction,v=l.beforeDirection,m=l.targetTransform,b=l.moveableClientRect;if(!u&&!c)return!1;var x,E=t.getRect();e.rect=E,e.transform=m,e.left=f,e.top=p,e.fixedPosition=ci(t,li(t)),e.absoluteInfo={origin:E.origin,startValue:E.rotation},mo(t,e.absoluteInfo,r,i,d,b),u||s||a?(x=o||0,e.beforeInfo={origin:E.beforeOrigin,prevDeg:x,startDeg:x,prevSnapDeg:x,loop:0},e.afterInfo={origin:E.origin,prevDeg:x,startDeg:x,prevSnapDeg:x,loop:0}):(e.beforeInfo={origin:E.beforeOrigin},e.afterInfo={origin:E.origin},mo(t,e.beforeInfo,r,i,h,b),mo(t,e.afterInfo,r,i,d,b)),e.direction=g,e.beforeDirection=v,e.startValue=0,e.datas={},ii(n,"rotate");var S=Mr(t,n,Oe(Oe({set:function(t){e.startValue=t*Math.PI/180}},ri(n)),{dragStart:fo.dragStart(t,(new qr).dragStart([0,0],n))})),y=Dr(t,"onRotateStart",S);return e.isRotate=!1!==y,t.state.snapRenderInfo={request:n.isRequest},!!e.isRotate&&S},dragControl:function(t,n){var e,r,i,o,a,s,u=n.datas,l=n.clientX,c=n.clientY,f=n.parentRotate,p=n.parentFlag,d=n.isPinch,h=n.groupDelta,g=u.beforeDirection,v=u.beforeInfo,m=u.afterInfo,b=u.absoluteInfo,x=u.isRotate,E=u.startValue,S=u.rect;if(x){Ur(n,"rotate");var y,M,C,D,R,w,O,P,G,B,z,T,k,A=g*lr(n.datas.beforeTransform,[50,50],100,100).direction,I=t.props,N=I.throttleRotate,F=void 0===N?0:N,j=I.parentMoveable,_=180/Math.PI*E,Y=b.startValue;if(k=!p&&"parentDist"in n?(C=(M=bo(t,S,m,y=n.parentDist,0,_))[0],D=M[1],R=M[2],O=(w=bo(t,S,v,y,0,_))[0],P=w[1],G=w[2],z=(B=bo(t,S,b,y,0,Y))[0],T=B[1],B[2]):d||p?(C=(e=xo(t,S,m,f,A,_,F))[0],D=e[1],R=e[2],O=(r=xo(t,S,v,f,g,_,F))[0],P=r[1],G=r[2],z=(i=xo(t,S,b,f,A,Y,F))[0],T=i[1],i[2]):(C=(o=Eo(t,S,m,A,l,c,_,F))[0],D=o[1],R=o[2],O=(a=Eo(t,S,v,g,l,c,_,F))[0],P=a[1],G=a[2],z=(s=Eo(t,S,b,A,l,c,Y,F))[0],T=s[1],s[2]),z||C||O||j){var q,X,W,L,H=$r(u,"rotate("+R+"deg)","rotate("+D+"deg)"),V=(q=t,X=D,W=u.fixedPosition,L=u,ui(q,"rotate("+X+"deg)",li(q),W,L)),U=Qt(Jt(h||[0,0],V),u.prevInverseDist||[0,0]);u.prevInverseDist=V;var $=Mr(t,n,Oe({delta:C,dist:D,rotate:R,beforeDist:P,beforeDelta:O,beforeRotate:G,absoluteDist:T,absoluteDelta:z,absoluteRotate:k,isPinch:!!d},si(t,H,U,d,n)));return Dr(t,"onRotate",$),$}}},dragControlEnd:function(t,n){var e=n.datas,r=n.isDrag;return!!e.isRotate&&(e.isRotate=!1,Dr(t,"onRotateEnd",Cr(t,n,{})),r)},dragGroupControlCondition:So,dragGroupControlStart:function(t,n){var e=n.datas,r=t.state,s=r.left,u=r.top,l=r.beforeOrigin,i=this.dragControlStart(t,n);if(!i)return!1;i.set(e.beforeDirection*t.rotation);var o=Lr(t,this,"dragControlStart",n,function(t,n){var e=t.state,r=e.left,i=e.top,o=e.beforeOrigin,a=Jt(Qt([r,i],[s,u]),Qt(o,l));return n.datas.groupClient=a,Oe(Oe({},n),{parentRotate:0})}),a=Dr(t,"onRotateGroupStart",Oe(Oe({},i),{targets:t.props.targets,events:o}));return e.isRotate=!1!==a,!!e.isRotate&&i},dragGroupControl:function(n,t){var e=t.datas;if(e.isRotate){var r=this.dragControl(n,t);if(r){var l=e.beforeDirection,c=r.beforeDist,f=r.beforeDelta/180*Math.PI,i=Lr(n,this,"dragControl",t,function(t,n){var e=n.datas.groupClient,r=e[0],i=e[1],o=un([r,i],f*l),a=o[0],s=o[1],u=[a-r,s-i];return n.datas.groupClient=[a,s],Oe(Oe({},n),{parentRotate:c,groupDelta:u})});n.rotation=l*r.beforeRotate;var o=Oe({targets:n.props.targets,events:i,set:function(t){n.rotation=t}},r);return Dr(n,"onRotateGroup",o),o}}},dragGroupControlEnd:function(t,n){var e=n.isDrag;if(n.datas.isRotate)return this.dragControlEnd(t,n),Lr(t,this,"dragControlEnd",n),Dr(t,"onRotateGroupEnd",Cr(t,n,{targets:t.props.targets})),e},request:function(t){var n={},e=0,r=t.getRotation();return{isControl:!0,requestStart:function(){return{datas:n}},request:function(t){return"deltaRotate"in t?e+=t.deltaRotate:"rotate"in t&&(e=t.rotate-r),{datas:n,parentDist:e}},requestEnd:function(){return{datas:n,isDrag:!0}}}}},Mo={name:"resizable",ableGroup:"size",canPinch:!0,props:{resizable:Boolean,throttleResize:Number,renderDirections:Array,keepRatio:Boolean},events:{onResizeStart:"resizeStart",onResize:"resize",onResizeEnd:"resizeEnd",onResizeGroupStart:"resizeGroupStart",onResizeGroup:"resizeGroup",onResizeGroupEnd:"resizeGroupEnd"},render:function(t,n){var e=t.props,r=e.resizable,i=e.edge;if(r)return(i?vo:go)(t,n)},dragControlCondition:Ar,dragControlStart:function(n,t){var e,r,i=t.inputEvent,o=t.isPinch,a=t.parentDirection,s=t.datas,u=t.parentFlag,l=a||(o?[0,0]:xr(i.target)),c=n.state,f=c.target,p=c.width,d=c.height;if(!l||!f)return!1;o||Vr(n,t),s.datas={},s.direction=l,s.startOffsetWidth=p,s.startOffsetHeight=d,s.prevWidth=0,s.prevHeight=0,r=Rr(f),e=[parseFloat(r.width),parseFloat(r.height)],s.startWidth=e[0],s.startHeight=e[1];var h,g,v,m,b,x,E,S,y,M,C,D=[Math.max(0,p-s.startWidth),Math.max(0,d-s.startHeight)];s.minSize=D,s.maxSize=[1/0,1/0],u||(g=(h=Rr(f)).position,v=h.minWidth,m=h.minHeight,b=h.maxWidth,x=h.maxHeight,M=p,C=d,(S=(E="static"===g||"relative"===g)?f.parentElement:f.offsetParent)&&(M=S.clientWidth,C=S.clientHeight,E&&(y=Rr(S),M-=parseFloat(y.paddingLeft)||0,C-=parseFloat(y.paddingTop)||0)),s.minSize=Jt([Bt(v,M)||0,Bt(m,C)||0],D),s.maxSize=Jt([Bt(b,M)||1/0,Bt(x,C)||1/0],D));var R=n.props.transformOrigin||"% %";function w(t){s.ratio=t&&isFinite(t)?t:0}function O(t){s.fixedDirection=t,s.fixedPosition=pi(n,t)}s.transformOrigin=R&&xt(R)?R.split(" "):R,s.isWidth=!l[0]&&!l[1]||l[0]||!l[1],w(p/d),O([-l[0],-l[1]]);var P=Mr(n,t,{direction:l,set:function(t){var n=t[0],e=t[1];s.startWidth=n,s.startHeight=e},setMin:function(t){s.minSize=t},setMax:function(t){s.maxSize=[t[0]||1/0,t[1]||1/0]},setRatio:w,setFixedDirection:O,setOrigin:function(t){s.transformOrigin=t},dragStart:fo.dragStart(n,(new qr).dragStart([0,0],t))});return!1!==Dr(n,"onResizeStart",P)&&(s.isResize=!0,n.state.snapRenderInfo={request:t.isRequest,direction:l}),!!s.isResize&&P},dragControl:function(t,n){var e,r=n.datas,i=n.distX,o=n.distY,a=n.parentFlag,s=n.isPinch,u=n.parentDistance,l=n.parentScale,c=n.parentKeepRatio,f=n.dragClient,p=n.parentDist,d=n.isRequest,h=r.isResize,g=r.transformOrigin,v=r.fixedDirection,m=r.startWidth,b=r.startHeight,x=r.prevWidth,E=r.prevHeight,S=r.minSize,y=r.maxSize,M=r.ratio,C=r.isWidth,D=r.startOffsetWidth,R=r.startOffsetHeight;if(h){var w=t.props,O=w.throttleResize,P=void 0===O?0:O,G=w.parentMoveable,B=w.snapThreshold,z=void 0===B?5:B,T=r.direction,k=T,A=0,I=0;T[0]||T[1]||(k=[1,1]);var N,F,j,_,Y,q,X,W,L,H,V=M&&(t.props.keepRatio||c),U=f;f||(U=!a&&s?pi(t,[0,0]):r.fixedPosition),p?(A=p[0],I=p[1],V&&(A?I=I||A/M:A=I*M)):l?(A=(l[0]-1)*D,I=(l[1]-1)*R):s?u&&(I=(A=u)*R/D):(N=Jr({datas:r,distX:i,distY:o}),A=k[0]*N[0],I=k[1]*N[1],V&&D&&R?(F=At([0,0],N),j=At([0,0],k),_=cr([A,I]),Y=Math.cos(F-j)*_,k[0]?I=k[1]?(q=2*k[0]*D,X=2*k[1]*R,W=cr([q+N[0],X+N[1]])-cr([q,X]),L=At([0,0],[M,1]),A=Math.cos(L)*W,Math.sin(L)*W):(A=Y)*M:A=(I=Y)/M):V||(H=Pe(T),D||(N[0]<0?H[0]=-1:0<N[0]&&(H[0]=1)),R||(N[1]<0?H[1]=-1:0<N[1]&&(H[1]=1)),A=(k=T=H)[0]*N[0],I=k[1]*N[1]));var $=k[0]||V?Math.max(D+A,_e):D,Z=k[1]||V?Math.max(R+I,_e):R;V&&D&&R&&(C?Z=$/M:$=Z*M);var K,J=[0,0];s||(J=function(t,e,r,i,o,n,a){if(!mi(t,"resizable"))return[0,0];var s=t.state,u=s.allMatrix,l=s.is3d;return oo(t,function(t,n){return io(u,e+t,r+n,o,i,l)},e,r,i,o,n,a)}(t,$,Z,T,U,d,r)),p&&(p[0]||(J[0]=0),p[1]||(J[1]=0)),V?(k[0]&&k[1]&&J[0]&&J[1]&&(Math.abs(J[0])>Math.abs(J[1])?J[1]=0:J[0]=0),(K=!J[0]&&!J[1])&&(C?$=Ft($,P):Z=Ft(Z,P)),k[0]&&!k[1]||J[0]&&!J[1]||K&&C?Z=($+=J[0])/M:(!k[0]&&k[1]||!J[0]&&J[1]||K&&!C)&&($=(Z+=J[1])*M)):(D+A<-z&&(J[0]=0),D+I<-z&&(J[1]=0),$+=J[0],Z+=J[1],J[0]||($=Ft($,P)),J[1]||(Z=Ft(Z,P))),$=(e=Tt([$,Z],S,y,V))[0],Z=e[1];var Q=[(A=($=Math.round($))-D)-x,(I=(Z=Math.round(Z))-R)-E];r.prevWidth=A,r.prevHeight=I;var tt=fi(t,$,Z,v,U,g);if(G||!Q.every(function(t){return!t})||!tt.every(function(t){return!t})){var nt=Mr(t,n,{width:m+A,height:b+I,offsetWidth:$,offsetHeight:Z,direction:T,dist:[A,I],delta:Q,isPinch:!!s,drag:fo.drag(t,Yr(n,t.state,tt,!!s,!1))});return Dr(t,"onResize",nt),nt}}},dragControlAfter:function(t,n){var e=n.datas,r=e.isResize,i=e.startOffsetWidth,o=e.startOffsetHeight,a=e.prevWidth,s=e.prevHeight;if(r){var u=t.state,l=u.width-(i+a),c=u.height-(o+s),f=3<Math.abs(l),p=3<Math.abs(c);return f&&(e.startWidth+=l,e.startOffsetWidth+=l,e.prevWidth+=l),p&&(e.startHeight+=c,e.startOffsetHeight+=c,e.prevHeight+=c),f||p?(this.dragControl(t,n),!0):void 0}},dragControlEnd:function(t,n){var e=n.datas,r=n.isDrag;return!!e.isResize&&(e.isResize=!1,Dr(t,"onResizeEnd",Cr(t,n,{})),r)},dragGroupControlCondition:Ar,dragGroupControlStart:function(u,t){var l=t.datas,n=this.dragControlStart(u,t);if(!n)return!1;var r=Xr(u,"resizable",t);function i(t,n){var e=l.fixedDirection,r=l.fixedPosition,i=pi(t,e),o=en(fn(-u.rotation/180*Math.PI,3),[i[0]-r[0],i[1]-r[1],1],3),a=o[0],s=o[1];return n.datas.originalX=a,n.datas.originalY=s,n}var o=Lr(u,this,"dragControlStart",t,i),e=Oe(Oe({},n),{targets:u.props.targets,events:o,setFixedDirection:function(e){n.setFixedDirection(e),o.forEach(function(t,n){t.setFixedDirection(e),i(u.moveables[n],r[n])})}}),a=Dr(u,"onResizeGroupStart",e);return l.isResize=!1!==a,!!l.isResize&&n},dragGroupControl:function(o,t){var n=t.datas;if(n.isResize){var e=this.dragControl(o,t);if(e){var r=e.offsetWidth,i=e.offsetHeight,a=e.dist,s=o.props.keepRatio,u=[r/(r-a[0]),i/(i-a[1])],l=n.fixedPosition,c=Lr(o,this,"dragControl",t,function(t,n){var e=en(fn(o.rotation/180*Math.PI,3),[n.datas.originalX*u[0],n.datas.originalY*u[1],1],3),r=e[0],i=e[1];return Oe(Oe({},n),{parentDist:null,parentScale:u,dragClient:Jt(l,[r,i]),parentKeepRatio:s})}),f=Oe({targets:o.props.targets,events:c},e);return Dr(o,"onResizeGroup",f),f}}},dragGroupControlEnd:function(t,n){var e=n.isDrag;if(n.datas.isResize)return this.dragControlEnd(t,n),Lr(t,this,"dragControlEnd",n),Dr(t,"onResizeGroupEnd",Cr(t,n,{targets:t.props.targets})),e},request:function(t){var n={},e=0,r=0,i=t.getRect();return{isControl:!0,requestStart:function(t){return{datas:n,parentDirection:t.direction||[1,1]}},request:function(t){return"offsetWidth"in t?e=t.offsetWidth-i.offsetWidth:"deltaWidth"in t&&(e+=t.deltaWidth),"offsetHeight"in t?r=t.offsetHeight-i.offsetHeight:"deltaHeight"in t&&(r+=t.deltaHeight),{datas:n,parentDist:[e,r]}},requestEnd:function(){return{datas:n,isDrag:!0}}}}},Co={name:"scalable",ableGroup:"size",canPinch:!0,props:{scalable:Boolean,throttleScale:Number,renderDirections:String,keepRatio:Boolean},events:{onScaleStart:"scaleStart",onScale:"scale",onScaleEnd:"scaleEnd",onScaleGroupStart:"scaleGroupStart",onScaleGroup:"scaleGroup",onScaleGroupEnd:"scaleGroupEnd"},render:function(t,n){var e=t.props,r=e.resizable,i=e.scalable,o=e.edge;if(!r&&i)return(o?vo:go)(t,n)},dragControlCondition:Ar,dragControlStart:function(n,t){var e=t.datas,r=t.isPinch,i=t.inputEvent,o=t.parentDirection||(r?[0,0]:xr(i.target)),a=n.state,s=a.width,u=a.height,l=a.targetTransform,c=a.target,f=a.pos1,p=a.pos2,d=a.pos4;if(!o||!c)return!1;r||Vr(n,t),e.datas={},e.transform=l,e.prevDist=[1,1],e.direction=o,e.width=s,e.height=u,e.startValue=[1,1];var h=Nt(f,p),g=Nt(p,d),v=!o[0]&&!o[1]||o[0]||!o[1];function m(t){e.ratio=t&&isFinite(t)?t:0}function b(t){e.fixedDirection=t,e.fixedPosition=pi(n,t)}e.scaleWidth=h,e.scaleHeight=g,e.scaleXRatio=h/s,e.scaleYRatio=g/u,ii(t,"scale"),e.isWidth=v,m(Nt(f,p)/Nt(p,d)),b([-o[0],-o[1]]);var x=Mr(n,t,Oe(Oe({direction:o,set:function(t){e.startValue=t},setRatio:m,setFixedDirection:b},ri(t)),{dragStart:fo.dragStart(n,(new qr).dragStart([0,0],t))}));return!1!==Dr(n,"onScaleStart",x)&&(e.isScale=!0,n.state.snapRenderInfo={request:t.isRequest,direction:o}),!!e.isScale&&x},dragControl:function(t,n){Ur(n,"scale");var e=n.datas,r=n.distX,i=n.distY,o=n.parentScale,a=n.parentDistance,s=n.parentKeepRatio,u=n.parentFlag,l=n.isPinch,c=n.dragClient,f=n.parentDist,p=n.isRequest,d=e.prevDist,h=e.direction,g=e.width,v=e.height,m=e.isScale,b=e.startValue,x=e.isWidth,E=e.ratio,S=e.fixedDirection,y=e.scaleXRatio,M=e.scaleYRatio;if(!m)return!1;var C=t.props,D=C.throttleScale,R=C.parentMoveable,w=h;h[0]||h[1]||(w=[1,1]);var O,P,G,B,z,T,k,A,I=E&&(t.props.keepRatio||s),N=t.state,F=1,j=1,_=c;c||(_=!u&&l?pi(t,[0,0]):e.fixedPosition),f?(F=(g+f[0])/g,j=(v+f[1])/v):o?(F=o[0],j=o[1]):l?a&&(F=(g+a)/g,j=(v+a*v/g)/v):(O=Jr({datas:e,distX:r,distY:i}),k=w[0]*O[0]*y,A=w[1]*O[1]*M,I&&g&&v&&(w[0]?A=w[1]?(P=cr([k,A]),G=At([0,0],O),B=At([0,0],w),z=Math.cos(G-B)*P,T=At([0,0],[E,1]),k=Math.cos(T)*z,Math.sin(T)*z):k/E:k=A*E),F=(g+k/y)/g,j=(v+A/M)/v),F=w[0]||I?F*b[0]:b[0],j=w[1]||I?j*b[1]:b[1],0===F&&(F=1e-9*(0<d[0]?1:-1)),0===j&&(j=1e-9*(0<d[1]?1:-1));var Y,q=[F/b[0],j/b[1]],X=[F,j];l||!t.props.groupable||bt(Y=(N.snapRenderInfo||{}).direction)&&(Y[0]||Y[1])&&(N.snapRenderInfo={direction:h,request:n.isRequest});var W,L,H,V=[0,0];l||(V=so(t,q,h,p,e)),I?(w[0]&&w[1]&&V[0]&&V[1]&&(Math.abs(V[0]*g)>Math.abs(V[1]*v)?V[1]=0:V[0]=0),(W=!V[0]&&!V[1])&&(x?q[0]=Ft(q[0]*b[0],D)/b[0]:q[1]=Ft(q[1]*b[1],D)/b[1]),w[0]&&!w[1]||V[0]&&!V[1]||W&&x?(q[0]+=V[0],L=g*q[0]*b[0]/E,q[1]=L/v/b[1]):(!w[0]&&w[1]||!V[0]&&V[1]||W&&!x)&&(q[1]+=V[1],H=v*q[1]*b[1]*E,q[0]=H/g/b[0])):(q[0]+=V[0],q[1]+=V[1],V[0]||(q[0]=Ft(q[0]*b[0],D)/b[0]),V[1]||(q[1]=Ft(q[1]*b[1],D)/b[1])),0===q[0]&&(q[0]=1e-9*(0<d[0]?1:-1)),0===q[1]&&(q[1]=1e-9*(0<d[1]?1:-1));var U,$,Z=[q[0]/d[0],q[1]/d[1]];$=b,X=[(U=q)[0]*$[0],U[1]*$[1]];var K,J,Q,tt=(K=S,J=_,Q=e,ui(t,"scale("+q.join(", ")+")",K,J,Q)),nt=Qt(tt,e.prevInverseDist||[0,0]);if(e.prevDist=q,e.prevInverseDist=tt,F===d[0]&&j===d[1]&&nt.every(function(t){return!t})&&!R)return!1;var et=$r(e,"scale("+X.join(", ")+")","scale("+q.join(", ")+")"),rt=Mr(t,n,Oe({offsetWidth:g,offsetHeight:v,direction:h,scale:X,dist:q,delta:Z,isPinch:!!l},si(t,et,nt,l,n)));return Dr(t,"onScale",rt),rt},dragControlEnd:function(t,n){var e=n.datas,r=n.isDrag;return!!e.isScale&&(e.isScale=!1,Dr(t,"onScaleEnd",Cr(t,n,{})),r)},dragGroupControlCondition:Ar,dragGroupControlStart:function(u,t){var l=t.datas,n=this.dragControlStart(u,t);if(!n)return!1;var r=Xr(u,"resizable",t);function i(t,n){var e=l.fixedDirection,r=l.fixedPosition,i=pi(t,e),o=en(fn(-u.rotation/180*Math.PI,3),[i[0]-r[0],i[1]-r[1],1],3),a=o[0],s=o[1];return n.datas.originalX=a,n.datas.originalY=s,n}l.moveableScale=u.scale;var o=Lr(u,this,"dragControlStart",t,i),e=Oe(Oe({},n),{targets:u.props.targets,events:o,setFixedDirection:function(e){n.setFixedDirection(e),o.forEach(function(t,n){t.setFixedDirection(e),i(u.moveables[n],r[n])})}}),a=Dr(u,"onScaleGroupStart",e);return l.isScale=!1!==a,!!l.isScale&&e},dragGroupControl:function(o,t){var n=t.datas;if(n.isScale){var e=this.dragControl(o,t);if(e){var r=n.moveableScale;o.scale=[e.scale[0]*r[0],e.scale[1]*r[1]];var a=o.props.keepRatio,s=e.dist,u=e.scale,l=n.fixedPosition,i=Lr(o,this,"dragControl",t,function(t,n){var e=en(fn(o.rotation/180*Math.PI,3),[n.datas.originalX*s[0],n.datas.originalY*s[1],1],3),r=e[0],i=e[1];return Oe(Oe({},n),{parentDist:null,parentScale:u,parentKeepRatio:a,dragClient:Jt(l,[r,i])})}),c=Oe({targets:o.props.targets,events:i},e);return Dr(o,"onScaleGroup",c),c}}},dragGroupControlEnd:function(t,n){var e=n.isDrag;if(n.datas.isScale)return this.dragControlEnd(t,n),Lr(t,this,"dragControlEnd",n),Dr(t,"onScaleGroupEnd",Cr(t,n,{targets:t.props.targets})),e},request:function(){var n={},e=0,r=0;return{isControl:!0,requestStart:function(t){return{datas:n,parentDirection:t.direction||[1,1]}},request:function(t){return e+=t.deltaWidth,r+=t.deltaHeight,{datas:n,parentDist:[e,r]}},requestEnd:function(){return{datas:n,isDrag:!0}}}}};function Do(t,a){return t.map(function(t,n){return e=t,r=a[n],(e*(o=2)+r*(i=1))/(i+o);var e,r,i,o})}function Ro(t,n,e){var r=At(t,n),i=At(t,e)-r;return 0<=i?i:i+2*Math.PI}var wo={name:"warpable",ableGroup:"size",props:{warpable:Boolean,renderDirections:Array},events:{onWarpStart:"warpStart",onWarp:"warp",onWarpEnd:"warpEnd"},render:function(t,n){var e=t.props,r=e.resizable,i=e.scalable,o=e.warpable,a=e.zoom;if(r||i||!o)return[];var s=t.state,u=s.pos1,l=s.pos2,c=s.pos3,f=s.pos4,p=Do(u,l),d=Do(l,u),h=Do(u,c),g=Do(c,u),v=Do(c,f),m=Do(f,c),b=Do(l,f),x=Do(f,l);return Pe([n.createElement("div",{className:Ve("line"),key:"middeLine1",style:pr(p,v,a)}),n.createElement("div",{className:Ve("line"),key:"middeLine2",style:pr(d,m,a)}),n.createElement("div",{className:Ve("line"),key:"middeLine3",style:pr(h,b,a)}),n.createElement("div",{className:Ve("line"),key:"middeLine4",style:pr(g,x,a)})],go(t,n))},dragControlCondition:function(t,n){return!n.isRequest&&_t(n.inputEvent.target,Ve("direction"))},dragControlStart:function(t,n){var r=n.datas,e=n.inputEvent,i=t.props.target,o=xr(e.target);if(!o||!i)return!1;var a=t.state,s=a.transformOrigin,u=a.is3d,l=a.targetTransform,c=a.targetMatrix,f=a.width,p=a.height,d=a.left,h=a.top;return r.datas={},r.targetTransform=l,r.warpTargetMatrix=u?c:$t(c,3,4),r.targetInverseMatrix=Wt(Lt(r.warpTargetMatrix,4),3,4),r.direction=o,r.left=d,r.top=h,r.poses=[[0,0],[f,0],[0,p],[f,p]].map(function(t){return Qt(t,s)}),r.nextPoses=r.poses.map(function(t){var n=t[0],e=t[1];return en(r.warpTargetMatrix,[n,e,0,1],4)}),r.startValue=pn(4),r.prevMatrix=pn(4),r.absolutePoses=Sr(a),r.posIndexes=Qr(o),Vr(t,n),ii(n,"matrix3d"),!(a.snapRenderInfo={request:n.isRequest,direction:o})!==Dr(t,"onWarpStart",Mr(t,n,Oe({set:function(t){r.startValue=t}},ri(n))))&&(r.isWarp=!0),r.isWarp},dragControl:function(t,n){var e,r,i,o,a=n.datas,s=n.isRequest,u=n.distX,l=n.distY,c=a.targetInverseMatrix,f=a.prevMatrix,p=a.isWarp,d=a.startValue,h=a.poses,g=a.posIndexes,v=a.absolutePoses;if(!p)return!1;Ur(n,"matrix3d"),mi(t,"warpable")&&(1<(e=g.map(function(t){return v[t]})).length&&e.push([(e[0][0]+e[1][0])/2,(e[0][1]+e[1][1])/2]),i=(r=Qi(t,s,{horizontal:e.map(function(t){return t[1]+l}),vertical:e.map(function(t){return t[0]+u})})).horizontal,o=r.vertical,l-=i.offset,u-=o.offset);var m=Jr({datas:a,distX:u,distY:l},!0),b=a.nextPoses.slice();if(g.forEach(function(t){b[t]=Jt(b[t],m)}),!Fe.every(function(t){return n=t.map(function(t){return h[t]}),e=t.map(function(t){return b[t]}),r=Ro(n[0],n[1],n[2]),i=Ro(e[0],e[1],e[2]),!((o=Math.PI)<=r&&i<=o||r<=o&&o<=i);var n,e,r,i,o}))return!1;var x=gn(h[0],h[2],h[1],h[3],b[0],b[2],b[1],b[3]);if(!x.length)return!1;var E=Zr(a,Kt(c,x,4),!0),S=Kt(Lt(f,4),E,4),y=Kt(d,a.prevMatrix=E,4),M=$r(a,"matrix3d("+y.join(", ")+")","matrix3d("+E.join(", ")+")");return ai(n,M),Dr(t,"onWarp",Mr(t,n,{delta:S,matrix:y,dist:E,multiply:Kt,transform:M})),!0},dragControlEnd:function(t,n){var e=n.datas,r=n.isDrag;return!!e.isWarp&&(e.isWarp=!1,Dr(t,"onWarpEnd",Cr(t,n,{})),r)}},Oo=Ve("area-pieces"),Po=Ve("area-piece"),Go=Ve("avoid");function Bo(t){var n,e,r,i=t.areaElement,o=t.state,a=o.width,s=o.height;e=Go,(n=i).classList?n.classList.remove(e):(r=new RegExp("(\\s|^)"+e+"(\\s|$)"),n.className=n.className.replace(r," ")),i.style.cssText+="left: 0px; top: 0px; width: "+a+"px; height: "+s+"px"}function zo(t){return t.createElement("div",{key:"area_pieces",className:Oo},t.createElement("div",{className:Po}),t.createElement("div",{className:Po}),t.createElement("div",{className:Po}),t.createElement("div",{className:Po}))}var To={name:"dragArea",props:{dragArea:Boolean,passDragArea:Boolean},events:{onClick:"click",onClickGroup:"clickGroup"},render:function(t,n){var e=t.props,r=e.target,i=e.dragArea,o=e.groupable,a=e.passDragArea,s=t.state,u=s.width,l=s.height,c=s.renderPoses,f=a?Ve("area","pass"):Ve("area");if(o)return[n.createElement("div",{key:"area",ref:S(t,"areaElement"),className:f}),zo(n)];if(!r||!i)return[];var p=gn([0,0],[u,0],[0,l],[u,l],c[0],c[1],c[2],c[3]),d=p.length?rr(p,!0):"none";return[n.createElement("div",{key:"area",ref:S(t,"areaElement"),className:f,style:{top:"0px",left:"0px",width:u+"px",height:l+"px",transformOrigin:"0 0",transform:d}}),zo(n)]},dragStart:function(t,n){var e=n.datas,r=n.clientX,i=n.clientY;if(!n.inputEvent)return!1;e.isDragArea=!1;var o,a,s=t.areaElement,u=t.state,l=u.moveableClientRect,c=u.renderPoses,f=u.rootMatrix,p=u.is3d,d=l.left,h=l.top,g=sr(c),v=g.left,m=g.top,b=g.width,x=g.height,E=Gr(f,[r-d,i-h],p?4:3),S=E[0],y=E[1],M=[{left:v,top:m,width:b,height:(y-=m)-10},{left:v,top:m,width:(S-=v)-10,height:x},{left:v,top:m+y+10,width:b,height:x-y-10},{left:v+S+10,top:m,width:b-S-10,height:x}],C=[].slice.call(s.nextElementSibling.children);M.forEach(function(t,n){C[n].style.cssText="left: "+t.left+"px;top: "+t.top+"px; width: "+t.width+"px; height: "+t.height+"px;"}),a=Go,(o=s).classList?o.classList.add(a):o.className+=" "+a,u.disableNativeEvent=!0},drag:function(t,n){var e=n.datas,r=n.inputEvent;if(this.enableNativeEvent(t),!r)return!1;e.isDragArea||(e.isDragArea=!0,Bo(t))},dragEnd:function(t,n){this.enableNativeEvent(t);var e=n.inputEvent,r=n.datas;if(!e)return!1;r.isDragArea||Bo(t)},dragGroupStart:function(t,n){return this.dragStart(t,n)},dragGroup:function(t,n){return this.drag(t,n)},dragGroupEnd:function(t,n){return this.dragEnd(t,n)},unset:function(t){Bo(t),t.state.disableNativeEvent=!1},enableNativeEvent:function(t){var n=t.state;n.disableNativeEvent&&requestAnimationFrame(function(){n.disableNativeEvent=!1})}},ko=Ge("origin",{render:function(t,n){var e=t.props.zoom,r=t.state,i=r.beforeOrigin,o=r.rotation;return[n.createElement("div",{className:Ve("control","origin"),style:dr(o,e,i),key:"beforeOrigin"})]}});function Ao(t){var n=t.scrollContainer;return[n.scrollLeft,n.scrollTop]}var Io={name:"scrollable",canPinch:!0,props:{scrollable:Boolean,scrollContainer:Object,scrollThreshold:Number,getScrollPosition:Function},events:{onScroll:"scroll",onScrollGroup:"scrollGroup"},dragStart:function(o,a){var t=o.props.scrollContainer,n=void 0===t?o.getContainer():t,e=new Kn,r=Nr(n,!0);a.datas.dragScroll=e;var i=a.isControl?"controlGesto":"targetGesto",s=a.targets;e.on("scroll",function(t){var n=t.container,e=t.direction,r=Mr(o,a,{scrollContainer:n,direction:e}),i=s?"onScrollGroup":"onScroll";s&&(r.targets=s),Dr(o,i,r)}).on("move",function(t){var n=t.offsetX,e=t.offsetY;o[i].scrollBy(n,e,a.inputEvent,!1)}),e.dragStart(a,{container:r})},checkScroll:function(t,n){var e=n.datas.dragScroll;if(e){var r=t.props,i=r.scrollContainer,o=void 0===i?t.getContainer():i,a=r.scrollThreshold,s=void 0===a?0:a,u=r.getScrollPosition,l=void 0===u?Ao:u;return e.drag(n,{container:o,threshold:s,getScrollPosition:function(t){return l({scrollContainer:t.container,direction:t.direction})}}),!0}},drag:function(t,n){return this.checkScroll(t,n)},dragEnd:function(t,n){n.datas.dragScroll.dragEnd(),n.datas.dragScroll=null},dragControlStart:function(t,n){return this.dragStart(t,Oe(Oe({},n),{isControl:!0}))},dragControl:function(t,n){return this.drag(t,n)},dragControlEnd:function(t,n){return this.dragEnd(t,n)},dragGroupStart:function(t,n){return this.dragStart(t,Oe(Oe({},n),{targets:t.props.targets}))},dragGroup:function(t,n){return this.drag(t,Oe(Oe({},n),{targets:t.props.targets}))},dragGroupEnd:function(t,n){return this.dragEnd(t,Oe(Oe({},n),{targets:t.props.targets}))},dragGroupControlStart:function(t,n){return this.dragStart(t,Oe(Oe({},n),{targets:t.props.targets,isControl:!0}))},dragGroupContro:function(t,n){return this.drag(t,Oe(Oe({},n),{targets:t.props.targets}))},dragGroupControEnd:function(t,n){return this.dragEnd(t,Oe(Oe({},n),{targets:t.props.targets}))}},No={name:"",props:{target:Object,dragTarget:Object,container:Object,portalContainer:Object,rootContainer:Object,zoom:Number,transformOrigin:Array,edge:Boolean,ables:Array,className:String,pinchThreshold:Number,pinchOutside:Boolean,triggerAblesSimultaneously:Boolean,checkInput:Boolean,cspNonce:String,translateZ:Number,hideDefaultLines:Boolean,props:Object},events:{}},Fo=Ge("padding",{render:function(t,o){var n=t.props;if(n.dragArea)return[];var e=n.padding||{},r=e.left,i=void 0===r?0:r,a=e.top,s=void 0===a?0:a,u=e.right,l=void 0===u?0:u,c=e.bottom,f=void 0===c?0:c,p=t.state,d=p.renderPoses,h=[p.pos1,p.pos2,p.pos3,p.pos4],g=[];return 0<i&&g.push([0,2]),0<s&&g.push([0,1]),0<l&&g.push([1,3]),0<f&&g.push([2,3]),g.map(function(t,n){var e=t[0],r=t[1],i=gn([0,0],[100,0],[0,100],[100,100],h[e],h[r],d[e],d[r]);if(i.length)return o.createElement("div",{key:"padding"+n,className:Ve("padding"),style:{transform:rr(i,!0)}})})}}),jo=["nw","ne","se","sw"];function _o(t,n){var e=t[0]+t[1],r=n<e?n/e:1;return t[0]*=r,t[1]=n-t[1]*r,t}var Yo=[1,2,5,6],qo=[0,3,4,7],Xo=[1,-1,-1,1],Wo=[1,1,-1,-1];function Lo(t,a,s,u,l,c,f,p,d){void 0===c&&(c=0),void 0===f&&(f=0),void 0===p&&(p=u),void 0===d&&(d=l);var h=[],g=!1,n=t.map(function(t,n){var e=a[n],r=e.horizontal,i=e.vertical;if(i&&!g&&(g=!0,h.push("/")),g){var o=Math.max(0,1===i?t[1]-f:d-t[1]);return h.push(Tr(o,l,s)),o}o=Math.max(0,1===r?t[0]-c:p-t[0]);return h.push(Tr(o,u,s)),o});return{styles:h,raws:n}}function Ho(t){for(var n=[0,0],e=[0,0],r=t.length,i=0;i<r;++i){var o=t[i];o.sub&&(o.horizontal&&(0===n[1]&&(n[0]=i),n[1]=i-n[0]+1,e[0]=i+1),o.vertical&&(0===e[1]&&(e[0]=i),e[1]=i-e[0]+1))}return{horizontalRange:n,verticalRange:e}}function Vo(t,r,i,o,a,n){var e,s,u;void 0===n&&(n=[0,0]);var l=t.indexOf("/"),c=(-1<l?t.slice(0,l):t).length,f=t.slice(0,c),p=t.slice(c+1),d=f[0],h=void 0===d?"0px":d,g=f[1],v=void 0===g?h:g,m=f[2],b=void 0===m?h:m,x=f[3],E=void 0===x?v:x,S=p[0],y=void 0===S?h:S,M=p[1],C=void 0===M?y:M,D=p[2],R=void 0===D?y:D,w=p[3],O=void 0===w?C:w,P=[h,v,b,E].map(function(t){return Bt(t,r)}),G=[y,C,R,O].map(function(t){return Bt(t,i)}),B=P.slice(),z=G.slice(),T=_o([B[0],B[1]],r);B[0]=T[0],B[1]=T[1],e=_o([B[3],B[2]],r),B[3]=e[0],B[2]=e[1],s=_o([z[0],z[3]],i),z[0]=s[0],z[3]=s[1],u=_o([z[1],z[2]],i),z[1]=u[0],z[2]=u[1];var k=B.slice(0,Math.max(n[0],f.length)),A=z.slice(0,Math.max(n[1],p.length));return Pe(k.map(function(t,n){var e=jo[n];return{horizontal:Xo[n],vertical:0,pos:[o+t,a+(-1===Wo[n]?i:0)],sub:!0,raw:P[n],direction:e}}),A.map(function(t,n){var e=jo[n];return{horizontal:0,vertical:Wo[n],pos:[o+(-1===Xo[n]?r:0),a+t],sub:!0,raw:G[n],direction:e}}))}function Uo(t,n,e,r,i){void 0===i&&(i=n.length);var o=Ho(t.slice(r)),a=o.horizontalRange,s=o.verticalRange,u=e-r,l=0;if(0==u)l=i;else if(0<u&&u<a[1])l=a[1]-u;else{if(!(u>=s[0]))return;l=s[0]+s[1]-u}t.splice(e,l),n.splice(e,l)}function $o(t,n,e,r,i,o,a,s,u,l,c){void 0===l&&(l=0),void 0===c&&(c=0);var f=Ho(t.slice(e)),p=f.horizontalRange,d=f.verticalRange;if(-1<r)for(var h=1===Xo[r]?o-l:s-o,g=p[1];g<=r;++g){var v=1===Wo[g]?c:u,m=0;if(r===g?m=o:0===g?m=l+h:-1===Xo[g]&&(m=s-(n[e][0]-l)),t.splice(e+g,0,{horizontal:Xo[g],vertical:0,pos:[m,v]}),n.splice(e+g,0,[m,v]),0===g)break}else if(-1<i){var b,x=1===Wo[i]?a-c:u-a;0===p[1]&&0===d[1]&&(b=[l+x,c],t.push({horizontal:Xo[0],vertical:0,pos:b}),n.push(b));for(var E=d[0],g=d[1];g<=i;++g){m=1===Xo[g]?l:s,v=0;if(i===g?v=a:0===g?v=c+x:1===Wo[g]?v=n[e+E][1]:-1===Wo[g]&&(v=u-(n[e+E][1]-c)),t.push({horizontal:0,vertical:Wo[g],pos:[m,v]}),n.push([m,v]),0===g)break}}}function Zo(t,e){return void 0===e&&(e=t.map(function(t){return t.raw})),{horizontals:t.map(function(t,n){return t.horizontal?e[n]:null}).filter(function(t){return null!=t}),verticals:t.map(function(t,n){return t.vertical?e[n]:null}).filter(function(t){return null!=t})}}var Ko=[[0,-1,"n"],[1,0,"e"]],Jo=[[-1,-1,"nw"],[0,-1,"n"],[1,-1,"ne"],[1,0,"e"],[1,1,"se"],[0,1,"s"],[-1,1,"sw"],[-1,0,"w"]];function Qo(t,n,e){var r=t.props.clipRelative,i=t.state,o=i.width,a=i.height,s=n.type,u=n.poses,l="rect"===s,c="circle"===s;if("polygon"===s)return e.map(function(t){return Tr(t[0],o,r)+" "+Tr(t[1],a,r)});if(l||"inset"===s){var f=e[1][1],p=e[3][0],d=e[7][0],h=e[5][1];if(l)return[f,p,h,d].map(function(t){return t+"px"});var g,v,m,b=[f,o-p,a-h,d].map(function(t,n){return Tr(t,n%2?o:a,r)});return 8<e.length&&(v=(g=Qt(e[4],e[0]))[0],m=g[1],b.push.apply(b,Pe(["round"],Lo(e.slice(8),u.slice(8),r,v,m,d,f,p,h).styles))),b}if(c||"ellipse"===s){var x=e[0],E=Tr(Math.abs(e[1][1]-x[1]),c?Math.sqrt((o*o+a*a)/2):a,r);return(b=c?[E]:[Tr(Math.abs(e[2][0]-x[0]),o,r),E]).push("at",Tr(x[0],o,r),Tr(x[1],a,r)),b}}function ta(t,n,e,r){var a=[r,(r+n)/2,n],s=[t,(t+e)/2,e];return Jo.map(function(t){var n=t[0],e=t[1],r=t[2],i=a[n+1],o=s[e+1];return{vertical:Math.abs(e),horizontal:Math.abs(n),direction:r,pos:[i,o]}})}function na(t,i,o,n,e){var r,a,s,u=e;if(u||(u="none"!==(s=(a=Rr(t)).clipPath)?s:a.clip),u&&"none"!==u&&"auto"!==u||(u=n)){var l=Rt(u),c=l.prefix,f=void 0===c?u:c,p=l.value,d=void 0===p?"":p,h="circle"===f,g=" ";if("polygon"===f){g=",";return{type:f,clipText:u,poses:B=(P=Dt(d||"0% 0%, 100% 0%, 100% 100%, 0% 100%")).map(function(t){var n=t.split(" "),e=n[0],r=n[1];return{vertical:1,horizontal:1,pos:[Bt(e,i),Bt(r,o)]}}),splitter:g}}if(h||"ellipse"===f){var v,m,b,x,E,S,y,M,C,D="",R="",w=0,O=0,P=Ct(d);O=h?(m="",m=void 0===(v=P[0])?"50%":v,D=void 0===(b=P[2])?"50%":b,R=void 0===(x=P[3])?"50%":x,w=Bt(m,Math.sqrt((i*i+o*o)/2))):(M=S="",S=void 0===(E=P[0])?"50%":E,M=void 0===(y=P[1])?"50%":y,D=void 0===(C=P[3])?"50%":C,R=void 0===(r=P[4])?"50%":r,w=Bt(S,i),Bt(M,o));var G=[Bt(D,i),Bt(R,o)],B=Pe([{vertical:1,horizontal:1,pos:G,direction:"nesw"}],Ko.slice(0,h?1:2).map(function(t){return{vertical:Math.abs(t[1]),horizontal:t[0],direction:t[2],sub:!0,pos:[G[0]+t[0]*w,G[1]+t[1]*O]}}));return{type:f,clipText:u,radiusX:w,radiusY:O,left:G[0]-w,top:G[1]-O,poses:B,splitter:g}}if("inset"===f){var z=(P=Ct(d||"0 0 0 0")).indexOf("round"),T=(-1<z?P.slice(0,z):P).length,k=P.slice(T+1),A=P.slice(0,T),I=A[0],N=A[1],F=void 0===N?I:N,j=A[2],_=void 0===j?I:j,Y=A[3],q=void 0===Y?F:Y,X=[I,_].map(function(t){return Bt(t,o)}),W=X[0],L=X[1],H=[q,F].map(function(t){return Bt(t,i)}),V=H[0],U=H[1],$=i-U,Z=o-L,K=Vo(k,$-V,Z-W,V,W);return{type:"inset",clipText:u,poses:B=Pe(ta(W,$,Z,V),K),top:W,left:V,right:$,bottom:Z,radius:k,splitter:g}}if("rect"===f){g=",";var J=(P=Dt(d||"0px, "+i+"px, "+o+"px, 0px")).map(function(t){return wt(t).value});return{type:"rect",clipText:u,poses:B=ta(W=J[0],U=J[1],L=J[2],V=J[3]),top:W,right:U,bottom:L,left:V,values:P,splitter:g}}}}var ea={name:"clippable",props:{clippable:Boolean,defaultClipPath:String,customClipPath:String,clipRelative:Boolean,clipArea:Boolean,dragWithClip:Boolean,clipTargetBounds:Boolean,clipVerticalGuidelines:Array,clipHorizontalGuidelines:Array,clipSnapThreshold:Boolean},events:{onClipStart:"clipStart",onClip:"clip",onClipEnd:"clipEnd"},css:[".control.clip-control {\n    background: #6d6;\n    cursor: pointer;\n}\n.control.clip-control.clip-radius {\n    background: #d66;\n}\n.line.clip-line {\n    background: #6e6;\n    cursor: move;\n    z-index: 1;\n}\n.clip-area {\n    position: absolute;\n    top: 0;\n    left: 0;\n}\n.clip-ellipse {\n    position: absolute;\n    cursor: move;\n    border: 1px solid #6d6;\n    border: var(--zoompx) solid #6d6;\n    border-radius: 50%;\n    transform-origin: 0px 0px;\n}",":host {\n    --bounds-color: #d66;\n}",".guideline {\n    pointer-events: none;\n    z-index: 2;\n}",".line.guideline.bounds {\n    background: #d66;\n    background: var(--bounds-color);\n}"],render:function(t,s){var n=t.props,e=n.customClipPath,r=n.defaultClipPath,i=n.clipArea,u=n.zoom,o=t.state,a=o.target,l=o.width,c=o.height,f=o.allMatrix,p=o.is3d,d=o.left,h=o.top,g=o.pos1,v=o.pos2,m=o.pos3,b=o.pos4,x=o.clipPathState,E=o.snapBoundInfos;if(!a)return[];var S=na(a,l,c,r||"inset",x||e);if(!S)return[];var y,M,C,D,R,w,O=p?4:3,P=S.type,G=S.poses.map(function(t){var n=or(f,t.pos,O);return[n[0]-d,n[1]-h]}),B=[],z=[],T="rect"===P,k="inset"===P,A="polygon"===P;if((T||k||A)&&(y=k?G.slice(0,8):G,z=y.map(function(t,n){var e=0===n?y[y.length-1]:y[n-1],r=At(e,t),i=fr(e,t);return s.createElement("div",{key:"clipLine"+n,className:Ve("line","clip-line","snap-control"),"data-clip-index":n,style:{width:i+"px",transform:"translate("+e[0]+"px, "+e[1]+"px) rotate("+r+"rad) scaleY("+u+")"}})})),B=G.map(function(t,n){return s.createElement("div",{key:"clipControl"+n,className:Ve("control","clip-control","snap-control"),"data-clip-index":n,style:{transform:"translate("+t[0]+"px, "+t[1]+"px) scale("+u+")"}})}),k&&B.push.apply(B,G.slice(8).map(function(t,n){return s.createElement("div",{key:"clipRadiusControl"+n,className:Ve("control","clip-control","clip-radius","snap-control"),"data-clip-index":8+n,style:{transform:"translate("+t[0]+"px, "+t[1]+"px) scale("+u+")"}})})),"circle"===P||"ellipse"===P){var I=S.left,N=S.top,F=S.radiusX,j=S.radiusY,_=Qt(or(f,[I,N],O),or(f,[0,0],O)),Y=_[0],q=_[1],X="none";if(!i){for(var W=Math.max(10,F/5,j/5),L=[],H=0;H<=W;++H){var V=2*Math.PI/W*H;L.push([F+(F-u)*Math.cos(V),j+(j-u)*Math.sin(V)])}L.push([F,-2]),L.push([-2,-2]),L.push([-2,2*j+2]),L.push([2*F+2,2*j+2]),L.push([2*F+2,-2]),L.push([F,-2]),X="polygon("+L.map(function(t){return t[0]+"px "+t[1]+"px"}).join(", ")+")"}B.push(s.createElement("div",{key:"clipEllipse",className:Ve("clip-ellipse","snap-control"),style:{width:2*F+"px",height:2*j+"px",clipPath:X,transform:"translate("+(-d+Y)+"px, "+(-h+q)+"px) "+rr(f)}}))}return i&&(C=(M=sr(Pe([g,v,m,b],G))).width,D=M.height,R=M.left,w=M.top,(A||T||k)&&(L=k?G.slice(0,8):G,B.push(s.createElement("div",{key:"clipArea",className:Ve("clip-area","snap-control"),style:{width:C+"px",height:D+"px",transform:"translate("+R+"px, "+w+"px)",clipPath:"polygon("+L.map(function(t){return t[0]-R+"px "+(t[1]-w)+"px"}).join(", ")+")"}})))),E&&["vertical","horizontal"].forEach(function(o){var t=E[o],a="horizontal"===o;t.isSnap&&z.push.apply(z,t.snap.posInfos.map(function(t,n){var e=t.pos,r=Qt(or(f,a?[0,e]:[e,0],O),[d,h]),i=Qt(or(f,a?[l,e]:[e,c],O),[d,h]);return ho(s,"",r,i,u,"clip"+o+"snap"+n,"guideline")})),t.isBound&&z.push.apply(z,t.bounds.map(function(t,n){var e=t.pos,r=Qt(or(f,a?[0,e]:[e,0],O),[d,h]),i=Qt(or(f,a?[l,e]:[e,c],O),[d,h]);return ho(s,"",r,i,u,"clip"+o+"bounds"+n,"guideline","bounds","bold")}))}),Pe(B,z)},dragControlCondition:function(t,n){return n.inputEvent&&-1<(n.inputEvent.target.getAttribute("class")||"").indexOf("clip")},dragStart:function(t,n){var e=t.props.dragWithClip;return void 0!==e&&!e&&this.dragControlStart(t,n)},drag:function(t,n){return this.dragControl(t,n)},dragEnd:function(t,n){return this.dragControlEnd(t,n)},dragControlStart:function(t,n){var e=t.state,r=t.props,i=r.defaultClipPath,o=r.customClipPath,a=e.target,s=e.width,u=e.height,l=n.inputEvent?n.inputEvent.target:null,c=l?l.getAttribute("class"):"",f=n.datas,p=na(a,s,u,i||"inset",o);if(!p)return!1;var d=p.clipText;return!1===Dr(t,"onClipStart",Mr(t,n,{clipType:p.type,clipStyle:d,poses:p.poses.map(function(t){return t.pos})}))?f.isClipStart=!1:(f.isControl=-1<c.indexOf("clip-control"),f.isLine=-1<c.indexOf("clip-line"),f.isArea=-1<c.indexOf("clip-area")||-1<c.indexOf("clip-ellipse"),f.index=l?parseInt(l.getAttribute("data-clip-index"),10):-1,f.clipPath=p,f.isClipStart=!0,e.clipPathState=d,Vr(t,n),!0)},dragControl:function(t,n){var e=n.datas,r=n.originalDatas;if(!e.isClipStart)return!1;var i=r&&r.draggable||{},o=e.isControl,a=e.isLine,s=e.isArea,u=e.index,l=e.clipPath;if(!l)return!1;var c=i.isDrag?i.prevDist:Jr(n),f=c[0],p=c[1],d=t.props,h=t.state,g=h.width,v=h.height,m=!s&&!o&&!a,b=l.type,x=l.poses,E=l.splitter,S=x.map(function(t){return t.pos});m&&(f=-f,p=-p);var y,M,C,D,R,w,O,P,G,B,z,T,k,A,I,N=!o||"nesw"===x[u].direction,F="inset"===b||"rect"===b,j=x.map(function(){return[0,0]});o&&!N?(M=(y=x[u]).horizontal,C=y.vertical,D=[f*Math.abs(M),p*Math.abs(C)],O=D,P=F,z=(R=x)[w=u],T=z.direction,k=z.sub,A=R.map(function(){return[0,0]}),I=T?T.split(""):[],P&&w<8?(G=I.filter(function(t){return"w"===t||"e"===t})[0],B=I.filter(function(t){return"n"===t||"s"===t})[0],A[w]=O,R.forEach(function(t,n){var e=t.direction;e&&(-1<e.indexOf(G)&&(A[n][0]=O[0]),-1<e.indexOf(B)&&(A[n][1]=O[1]))}),G&&(A[1][0]=O[0]/2,A[5][0]=O[0]/2),B&&(A[3][1]=O[1]/2,A[7][1]=O[1]/2)):T&&!k?I.forEach(function(o){var a="n"===o||"s"===o;R.forEach(function(t,n){var e=t.direction,r=t.horizontal,i=t.vertical;e&&-1!==e.indexOf(o)&&(A[n]=[a||!r?0:O[0],a&&i?O[1]:0])})}):A[w]=O,j=A):N&&(j=S.map(function(){return[f,p]}));var _=S.map(function(t,n){return Jt(t,j[n])}),Y=Pe(_);h.snapBoundInfos=null;var q,X,W,L,H,V,U="circle"===l.type,$="ellipse"===l.type;(U||$)&&(q=sr(_),X=Math.abs(q.bottom-q.top),W=Math.abs($?q.right-q.left:X),L=_[0][1]+X,H=_[0][0]-W,V=_[0][0]+W,U&&(Y.push([V,q.bottom]),j.push([1,0])),Y.push([q.left,L]),j.push([0,1]),Y.push([H,q.bottom]),j.push([1,0]));var Z,K=Ei((d.clipHorizontalGuidelines||[]).map(function(t){return Bt(""+t,v)}),(d.clipVerticalGuidelines||[]).map(function(t){return Bt(""+t,g)}),g,v),J=[],Q=[];Q=U||$?(J=[Y[4][0],Y[2][0]],[Y[1][1],Y[3][1]]):F?(et=[Y[0],Y[2],Y[4],Y[6]],Z=[j[0],j[2],j[4],j[6]],J=et.filter(function(t,n){return Z[n][0]}).map(function(t){return t[0]}),et.filter(function(t,n){return Z[n][1]}).map(function(t){return t[1]})):(J=Y.filter(function(t,n){return j[n][0]}).map(function(t){return t[0]}),Y.filter(function(t,n){return j[n][1]}).map(function(t){return t[1]}));for(var tt=[0,0],nt=0;nt<2;++nt){if("break"===function(){var t=to(K,d.clipTargetBounds&&{left:0,top:0,right:g,bottom:v},J,Q,5),n=t.horizontal,e=t.vertical,r=n.offset,i=e.offset;if(n.isBound&&(tt[1]+=r),e.isBound&&(tt[0]+=i),!$&&!U||0!==j[0][0]||0!==j[0][1])return Y.forEach(function(t,n){var e=j[n];e[0]&&(t[0]-=i),e[1]&&(t[1]-=r)}),"break";var o=sr(_),a=o.bottom-o.top,s=$?o.right-o.left:a;s-=e.isBound?Math.abs(i):0===e.snapIndex?-i:i,a-=n.isBound?Math.abs(r):0===n.snapIndex?-r:r,U&&(s=a=0<Oi(e,n)?a:s);var u=Y[0];Y[1][1]=u[1]-a,Y[2][0]=u[0]+s,Y[3][1]=u[1]+a,Y[4][0]=u[0]-s}())break}var et,rt=Qo(t,l,_),it=b+"("+rt.join(E)+")";return h.clipPathState=it,Q=U||$?(J=[Y[4][0],Y[2][0]],[Y[1][1],Y[3][1]]):F?(et=[Y[0],Y[2],Y[4],Y[6]],J=et.map(function(t){return t[0]}),et.map(function(t){return t[1]})):(J=Y.map(function(t){return t[0]}),Y.map(function(t){return t[1]})),h.snapBoundInfos=to(K,d.clipTargetBounds&&{left:0,top:0,right:g,bottom:v},J,Q,1),r.draggable&&(r.draggable.deltaOffset=tt),Dr(t,"onClip",Mr(t,n,{clipEventType:"changed",clipType:b,poses:_,clipStyle:it,clipStyles:rt,distX:f,distY:p})),!0},dragControlEnd:function(t,n){this.unset(t);var e=n.isDrag,r=n.datas,i=n.isDouble,o=r.isLine,a=r.isClipStart,s=r.isControl;return!!a&&(Dr(t,"onClipEnd",Cr(t,n,{})),i&&(s?function(t,n){var e=n.datas,r=e.clipPath,i=e.index,o=r.type,a=r.poses,s=r.splitter,u=a.map(function(t){return t.pos}),l=u.length;if("polygon"===o)a.splice(i,1),u.splice(i,1);else{if("inset"!==o)return;if(i<8)return;if(Uo(a,u,i,8,l),l===a.length)return}var c=Qo(t,r,u);Dr(t,"onClip",Mr(t,n,{clipEventType:"removed",clipType:o,poses:u,clipStyles:c,clipStyle:o+"("+c.join(s)+")",distX:0,distY:0}))}(t,n):o&&function(t,n){var e=Hr(t,n),r=e[0],i=e[1],o=n.datas,a=o.clipPath,s=o.index,u=a.type,l=a.poses,c=a.splitter,f=l.map(function(t){return t.pos});if("polygon"===u)f.splice(s,0,[r,i]);else{if("inset"!==u)return;var p=Yo.indexOf(s),d=qo.indexOf(s),h=l.length;if($o(l,f,8,p,d,r,i,f[4][0],f[4][1],f[0][0],f[0][1]),h===l.length)return}var g=Qo(t,a,f);Dr(t,"onClip",Mr(t,n,{clipEventType:"added",clipType:u,poses:f,clipStyles:g,clipStyle:u+"("+g.join(c)+")",distX:0,distY:0}))}(t,n)),i||e)},unset:function(t){t.state.clipPathState="",t.state.snapBoundInfos=null}},ra={name:"originDraggable",props:{originDraggable:Boolean,originRelative:Boolean},events:{onDragOriginStart:"dragOriginStart",onDragOrigin:"dragOrigin",onDragOriginEnd:"dragOriginEnd"},css:[":host[data-able-origindraggable] .control.origin {\n    pointer-events: auto;\n}"],dragControlCondition:function(t,n){return n.isRequest?"originDraggable"===n.requestAble:_t(n.inputEvent.target,Ve("origin"))},dragControlStart:function(t,n){var e=n.datas;Vr(t,n);var r=Mr(t,n,{dragStart:fo.dragStart(t,(new qr).dragStart([0,0],n))}),i=Dr(t,"onDragOriginStart",r);return e.startOrigin=t.state.transformOrigin,e.startTargetOrigin=t.state.targetOrigin,e.prevOrigin=[0,0],!(e.isDragOrigin=!0)===i?e.isDragOrigin=!1:r},dragControl:function(t,n){var e=n.datas,r=n.isPinch,i=n.isRequest;if(!e.isDragOrigin)return!1;var o,a=Jr(n),s=a[0],u=a[1],l=t.state,c=l.width,f=l.height,p=l.offsetMatrix,d=l.targetMatrix,h=l.is3d,g=t.props.originRelative,v=void 0===g||g,m=h?4:3,b=[s,u];!i||((o=n.distOrigin)[0]||o[1])&&(b=o);var x=Jt(e.startOrigin,b),E=Jt(e.startTargetOrigin,b),S=Qt(b,e.prevOrigin),y=ei(p,d,x,m),M=t.getRect(),C=sr(ar(y,c,f,m)),D=[M.left-C.left,M.top-C.top],R=Mr(t,n,{width:c,height:f,origin:x,dist:e.prevOrigin=b,delta:S,transformOrigin:[Tr(E[0],c,v),Tr(E[1],f,v)].join(" "),drag:fo.drag(t,Yr(n,t.state,D,!!r,!1))});return Dr(t,"onDragOrigin",R),R},dragControlEnd:function(t,n){return!!n.datas.isDragOrigin&&(Dr(t,"onDragOriginEnd",Cr(t,n,{})),!0)},dragGroupControlCondition:function(t,n){return this.dragControlCondition(t,n)},dragGroupControlStart:function(t,n){return!!this.dragControlStart(t,n)},dragGroupControl:function(t,n){var e=this.dragControl(t,n);return!!e&&(t.transformOrigin=e.transformOrigin,!0)},request:function(t){var n={},e=t.getRect(),r=0,i=0,o=e.transformOrigin,a=[0,0];return{isControl:!0,requestStart:function(){return{datas:n}},request:function(t){return"deltaOrigin"in t?(a[0]+=t.deltaOrigin[0],a[1]+=t.deltaOrigin[1]):"origin"in t?(a[0]=t.origin[0]-o[0],a[1]=t.origin[1]-o[1]):("x"in t?r=t.x-e.left:"deltaX"in t&&(r+=t.deltaX),"y"in t?i=t.y-e.top:"deltaY"in t&&(i+=t.deltaY)),{datas:n,distX:r,distY:i,distOrigin:a}},requestEnd:function(){return{datas:n,isDrag:!0}}}}};function ia(t,n,e,r,i){void 0===r&&(r=[0,0]);var o,a;return Vo(!(a=i||((o=Rr(t))&&o.borderRadius||""))||!i&&"0px"===a?[]:Ct(a),n,e,0,0,r)}function oa(t,n,e,r,i,o){var a=t.state,s=a.width,u=a.height,l=Lo(o,i,t.props.roundRelative,s,u),c=l.raws,f=l.styles,p=Zo(i,c),d=p.horizontals,h=p.verticals,g=f.join(" ");Dr(t,"onRound",Mr(t,n,{horizontals:d,verticals:h,borderRadius:a.borderRadiusState=g,width:s,height:u,delta:r,dist:e}))}var aa={name:"roundable",props:{roundable:Boolean,roundRelative:Boolean,minRoundControls:Array,maxRoundControls:Array,roundClickable:Boolean},events:{onRoundStart:"roundStart",onRound:"round",onRoundEnd:"roundEnd"},css:[".control.border-radius {\n    background: #d66;\n    cursor: pointer;\n}",":host[data-able-roundable] .line.direction {\n    cursor: pointer;\n}"],render:function(t,i){var n=t.state,e=n.target,r=n.width,o=n.height,a=n.allMatrix,s=n.is3d,u=n.left,l=n.top,c=n.borderRadiusState,f=t.props,p=f.minRoundControls,d=void 0===p?[0,0]:p,h=f.maxRoundControls,g=void 0===h?[4,4]:h,v=f.zoom;if(!e)return null;var m=s?4:3,b=ia(e,r,o,d,c);if(!b)return null;var x=0,E=0;return b.map(function(t,n){E+=Math.abs(t.horizontal),x+=Math.abs(t.vertical);var e=Qt(or(a,t.pos,m),[u,l]),r=t.vertical?x<=g[1]:E<=g[0];return i.createElement("div",{key:"borderRadiusControl"+n,className:Ve("control","border-radius"),"data-radius-index":n,style:{display:r?"block":"none",transform:"translate("+e[0]+"px, "+e[1]+"px) scale("+v+")"}})})},dragControlCondition:function(t,n){if(!n.inputEvent||n.isRequest)return!1;var e=n.inputEvent.target.getAttribute("class")||"";return-1<e.indexOf("border-radius")||-1<e.indexOf("moveable-line")&&-1<e.indexOf("moveable-direction")},dragControlStart:function(t,n){var e=n.inputEvent,r=n.datas,i=e.target,o=i.getAttribute("class")||"",a=-1<o.indexOf("border-radius"),s=-1<o.indexOf("moveable-line")&&-1<o.indexOf("moveable-direction"),u=a?parseInt(i.getAttribute("data-radius-index"),10):-1,l=s?parseInt(i.getAttribute("data-line-index"),10):-1;if(!a&&!s)return!1;if(!1===Dr(t,"onRoundStart",Mr(t,n,{})))return!1;r.lineIndex=l,r.controlIndex=u,r.isControl=a,r.isLine=s,Vr(t,n);var c=t.props,f=c.roundRelative,p=c.minRoundControls,d=void 0===p?[0,0]:p,h=t.state,g=h.target,v=h.width,m=h.height;r.isRound=!0,r.prevDist=[0,0];var b=ia(g,v,m,d)||[];return r.controlPoses=b,h.borderRadiusState=Lo(b.map(function(t){return t.pos}),b,f,v,m).styles.join(" "),!0},dragControl:function(t,n){var e=n.datas;if(!e.isRound||!e.isControl||!e.controlPoses.length)return!1;var r=e.controlIndex,i=e.controlPoses,o=Jr(n),a=o[0],s=o[1],u=[a,s],l=Qt(u,e.prevDist),c=t.props.maxRoundControls,f=void 0===c?[4,4]:c,p=t.state,d=p.width,h=p.height,g=i[r],v=g.vertical,m=g.horizontal,b=i.map(function(t){var n=t.horizontal,e=t.vertical,r=[n*m*u[0],e*v*u[1]];if(n){if(1===f[0])return r;if(f[0]<4&&n!==m)return r}else{if(0===f[1])return r[1]=e*m*u[0]/d*h,r;if(v){if(1===f[1])return r;if(f[1]<4&&e!==v)return r}}return[0,0]});b[r]=u;var x=i.map(function(t,n){return Jt(t.pos,b[n])});return e.prevDist=[a,s],oa(t,n,u,l,i,x),!0},dragControlEnd:function(t,n){var e=t.state;e.borderRadiusState="";var r=n.datas,i=n.isDouble;if(!r.isRound)return!1;var o,a,s,u,l,c,f,p,d,h,g,v,m,b,x,E,S,y=e.width,M=e.height,C=r.isControl,D=r.controlIndex,R=r.isLine,w=r.lineIndex,O=r.controlPoses,P=O.map(function(t){return t.pos}),G=P.length,B=t.props.roundClickable;return i&&(void 0===B||B)&&(C?Uo(O,P,D,0):R&&(a=(o=Hr(t,n))[0],s=o[1],l=P,c=w,f=a,p=s,d=y,h=M,g=Zo(u=O),v=g.horizontals,m=g.verticals,b=v.length,x=m.length,S=E=-1,0===c?0===b?E=0:1===b&&(E=1):3===c&&(b<=2?E=2:b<=3&&(E=3)),2===c?0===x?S=0:x<4&&(S=3):1===c&&(x<=1?S=1:x<=2&&(S=2)),$o(u,l,0,E,S,f,p,d,h)),G!==O.length&&oa(t,n,[0,0],[0,0],O,P)),Dr(t,"onRoundEnd",Cr(t,n,{})),!(e.borderRadiusState="")},unset:function(t){t.state.borderRadiusState=""}},sa={isPinch:!0,name:"beforeRenderable",props:{},events:{onBeforeRenderStart:"beforeRenderStart",onBeforeRender:"beforeRender",onBeforeRenderEnd:"beforeRenderEnd",onBeforeRenderGroupStart:"beforeRenderGroupStart",onBeforeRenderGroup:"beforeRenderGroup",onBeforeRenderGroupEnd:"beforeRenderGroupEnd"},setTransform:function(t,n){var e=t.state,r=e.is3d,i=e.target,o=e.targetMatrix,a=null==i?void 0:i.style.transform,s=r?"matrix3d("+o.join(",")+")":"matrix("+nn(o,!0)+")";n.datas.startTransforms=a&&"none"!==a?Ct(a):[s]},resetTransform:function(t,n){n.datas.nextTransforms=n.datas.startTransforms,n.datas.nextTransformAppendedIndexes=[]},fillDragStartParams:function(t,n){return Mr(t,n,{setTransform:function(t){n.datas.startTransforms=bt(t)?t:Ct(t)},isPinch:!!n.isPinch})},fillDragParams:function(t,n){return Mr(t,n,{isPinch:!!n.isPinch})},dragStart:function(t,n){this.setTransform(t,n),Dr(t,"onBeforeRenderStart",this.fillDragStartParams(t,n))},drag:function(t,n){this.resetTransform(t,n),Dr(t,"onBeforeRender",Mr(t,n,{isPinch:!!n.isPinch}))},dragEnd:function(t,n){Dr(t,"onBeforeRenderEnd",Mr(t,n,{isPinch:!!n.isPinch,isDrag:n.isDrag}))},dragGroupStart:function(t,n){var r=this;this.dragStart(t,n);var e=Xr(t,"beforeRenderable",n),i=t.moveables,o=e.map(function(t,n){var e=i[n];return r.setTransform(e,t),r.fillDragStartParams(e,t)});Dr(t,"onBeforeRenderGroupStart",Mr(t,n,{isPinch:!!n.isPinch,targets:t.props.targets,setTransform:function(){},events:o}))},dragGroup:function(t,n){var r=this;this.drag(t,n);var e=Xr(t,"beforeRenderable",n),i=t.moveables,o=e.map(function(t,n){var e=i[n];return r.resetTransform(e,t),r.fillDragParams(e,t)});Dr(t,"onBeforeRenderGroup",Mr(t,n,{isPinch:!!n.isPinch,targets:t.props.targets,events:o}))},dragGroupEnd:function(t,n){this.dragEnd(t,n),Dr(t,"onBeforeRenderGroupEnd",Mr(t,n,{isPinch:!!n.isPinch,isDrag:n.isDrag,targets:t.props.targets}))},dragControlStart:function(t,n){return this.dragStart(t,n)},dragControl:function(t,n){return this.drag(t,n)},dragControlEnd:function(t,n){return this.dragEnd(t,n)},dragGroupControlStart:function(t,n){return this.dragGroupStart(t,n)},dragGroupControl:function(t,n){return this.dragGroup(t,n)},dragGroupControlEnd:function(t,n){return this.dragGroupEnd(t,n)}},ua={name:"renderable",props:{},events:{onRenderStart:"renderStart",onRender:"render",onRenderEnd:"renderEnd",onRenderGroupStart:"renderGroupStart",onRenderGroup:"renderGroup",onRenderGroupEnd:"renderGroupEnd"},dragStart:function(t,n){Dr(t,"onRenderStart",Mr(t,n,{isPinch:!!n.isPinch}))},drag:function(t,n){Dr(t,"onRender",Mr(t,n,{isPinch:!!n.isPinch}))},dragEnd:function(t,n){Dr(t,"onRenderEnd",Mr(t,n,{isPinch:!!n.isPinch,isDrag:n.isDrag}))},dragGroupStart:function(t,n){Dr(t,"onRenderGroupStart",Mr(t,n,{isPinch:!!n.isPinch,targets:t.props.targets}))},dragGroup:function(t,n){Dr(t,"onRenderGroup",Mr(t,n,{isPinch:!!n.isPinch,targets:t.props.targets}))},dragGroupEnd:function(t,n){Dr(t,"onRenderGroupEnd",Mr(t,n,{isPinch:!!n.isPinch,isDrag:n.isDrag,targets:t.props.targets}))},dragControlStart:function(t,n){return this.dragStart(t,n)},dragControl:function(t,n){return this.drag(t,n)},dragControlEnd:function(t,n){return this.dragEnd(t,n)},dragGroupControlStart:function(t,n){return this.dragGroupStart(t,n)},dragGroupControl:function(t,n){return this.dragGroup(t,n)},dragGroupControlEnd:function(t,n){return this.dragGroupEnd(t,n)}};function la(r,t,n,e,i,o,a){var s="Start"===i,u=r.state.target,l=o.isRequest;if(!u||s&&-1<e.indexOf("Control")&&!l&&r.areaElement===o.inputEvent.target)return!1;var c=""+n+e+i,f=""+n+e+"Condition",p="End"===i,d=-1<i.indexOf("After"),h=!(!s||r.targetGesto&&r.controlGesto&&r.targetGesto.isFlag()&&r.controlGesto.isFlag());h&&r.updateRect(i,!0,!1),""!==i||d||l||Br(r.state,o);var g,v=Pe([sa],r[t],[ua]);if(l&&(g=o.requestAble,v.some(function(t){return t.name===g})||v.push.apply(v,r.props.ables.filter(function(t){return t.name===g}))),!v.length)return!1;var m=v.filter(function(t){return t[c]}),b=o.datas;h&&m.forEach(function(t){t.unset&&t.unset(r)});var x,E=o.inputEvent;p&&E&&(x=document.elementFromPoint(o.clientX,o.clientY)||E.target);var S=m.filter(function(t){var n=t.name,e=b[n]||(b[n]={});return s&&(e.isEventStart=!t[f]||t[f](r,o)),!!e.isEventStart&&t[c](r,Oe(Oe({},o),{datas:e,originalDatas:b,inputTarget:x}))}).length,y=s&&m.length&&!S;return(p||y)&&(r.state.gesto=null,r.moveables&&r.moveables.forEach(function(t){t.state.gesto=null})),h&&y&&m.forEach(function(t){t.unset&&t.unset(r)}),!r.isUnmounted&&!y&&((!s&&S&&!a||p)&&(r.updateRect(i,!0,!1),r.forceUpdate()),s||p||d||!S||a||la(r,t,n,e,i+"After",o),!0)}function ca(e,t,n){var r=e.controlBox.getElement(),i=[];i.push(r),e.props.dragArea&&!e.props.dragTarget||i.push(t);function o(t){var n=t.inputEvent.target;return n===e.areaElement||!e.isMoveableElement(n)||_t(n,"moveable-area")||_t(n,"moveable-padding")}return fa(e,i,"targetAbles",n,{dragStart:o,pinchStart:o})}function fa(i,t,o,a,s){void 0===s&&(s={});var n=i.props,e=n.pinchOutside,r=n.pinchThreshold,u={container:window,pinchThreshold:r,pinchOutside:e},l=new fe(t,u);return["drag","pinch"].forEach(function(r){["Start","","End"].forEach(function(e){l.on(""+r+e,function(t){var n=t.eventType;(!s[n]||s[n](t))&&la(i,o,r,a,e,t)||t.stop()})})}),l}var pa=function(){function t(t,n,e){var i=this;this.target=t,this.moveable=n,this.eventName=e,this.ables=[],this.onEvent=function(n){var e=i.eventName,r=i.moveable;r.state.disableNativeEvent||i.ables.forEach(function(t){t[e](r,{inputEvent:n})})},this.target.addEventListener(this.eventName.toLowerCase(),this.onEvent)}var n=t.prototype;return n.setAbles=function(t){this.ables=t},n.destroy=function(){this.target.removeEventListener(this.eventName.toLowerCase(),this.onEvent),this.target=null,this.moveable=null},t}(),da=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.state=Oe({container:null,gesto:null,renderPoses:[[0,0],[0,0],[0,0],[0,0]],disableNativeEvent:!1},vr(null)),n.enabledAbles=[],n.targetAbles=[],n.controlAbles=[],n.rotation=0,n.scale=[1,1],n.isUnmounted=!1,n.events={mouseEnter:null,mouseLeave:null},n.onPreventClick=function(t){t.stopPropagation(),Yt(window,"click",n.onPreventClick,!0)},n}we(n,t);var e=n.prototype;return e.render=function(){var t=this.props,n=this.state,e=t.parentPosition,r=t.className,i=t.target,o=t.zoom,a=t.cspNonce,s=t.translateZ,u=t.cssStyled,l=t.portalContainer;this.checkUpdate(),this.updateRenderPoses();var c=e||{left:0,top:0},f=c.left,p=c.top,d=n.left,h=n.top,g=n.target,v=n.direction,m=t.targets,b=(m&&m.length||i)&&g,x=this.isDragging(),E={};return this.getEnabledAbles().forEach(function(t){E["data-able-"+t.name.toLowerCase()]=!0}),B(u,Oe({cspNonce:a,ref:S(this,"controlBox"),className:Ve("control-box",-1===v?"reverse":"",x?"dragging":"")+" "+r},E,{onClick:this.onPreventClick,portalContainer:l,style:{position:"absolute",display:b?"block":"none",transform:"translate3d("+(d-f)+"px, "+(h-p)+"px, "+s+")","--zoom":o,"--zoompx":o+"px"}}),this.renderAbles(),this._renderLines())},e.componentDidMount=function(){this.controlBox.getElement();var t=this.props,n=t.parentMoveable,e=t.container,r=t.wrapperMoveable;this.updateEvent(t),this.updateNativeEvents(t),e||n||r||this.updateRect("",!1,!0),this.updateCheckInput()},e.componentDidUpdate=function(t){this.updateNativeEvents(t),this.updateEvent(t),this.updateCheckInput()},e.componentWillUnmount=function(){this.isUnmounted=!0,yr(this,"targetGesto"),yr(this,"controlGesto");var t=this.events;for(var n in t){var e=t[n];e&&e.destroy()}},e.getContainer=function(){var t=this.props,n=t.parentMoveable,e=t.wrapperMoveable;return t.container||e&&e.getContainer()||n&&n.getContainer()||this.controlBox.getElement().parentElement},e.isMoveableElement=function(t){return t&&-1<(t.getAttribute("class")||"").indexOf(Ie)},e.dragStart=function(t){return this.targetGesto&&this.targetGesto.triggerDragStart(t),this},e.hitTest=function(t){var n,e,r=this.state,i=r.target,o=r.pos1,a=r.pos2,s=r.pos3,u=r.pos4,l=r.targetClientRect;if(!i)return 0;var c=(e=t instanceof Element?{left:(n=t.getBoundingClientRect()).left,top:n.top,width:n.width,height:n.height}:Oe({width:0,height:0},t)).left,f=e.top,p=e.width,d=e.height,h=Fn([o,a,u,s],l),g=Ln(h,[[c,f],[c+p,f],[c+p,f+d],[c,f+d]]),v=Nn(h);return g&&v?Math.min(100,g/v*100):0},e.isInside=function(t,n){var e=this.state,r=e.target,i=e.pos1,o=e.pos2,a=e.pos3,s=e.pos4,u=e.targetClientRect;return!!r&&_n([t,n],Fn([i,o,s,a],u))},e.updateRect=function(t,n,e){void 0===e&&(e=!0);var r=this.props,i=r.parentMoveable,o=this.state.target||this.props.target,a=this.getContainer(),s=i?i.props.rootContainer:r.rootContainer;this.updateState(vr(this.controlBox&&this.controlBox.getElement(),o,a,a,s||a),!i&&e)},e.isTargetChanged=function(t,n){var e=this.props,r=e.dragTarget||e.target,i=t.dragTarget||t.target,o=e.dragArea,a=t.dragArea;return!o&&i!==r||(n||o)&&a!==o},e.updateNativeEvents=function(t){var i,o=this,a=this.props.dragArea?this.areaElement:this.state.target,s=this.events,n=Gt(s);if(this.isTargetChanged(t))for(var e in s){var r=s[e];r&&r.destroy(),s[e]=null}a&&(i=this.enabledAbles,n.forEach(function(t){var n=wr(i,[t]),e=0<n.length,r=s[t];e?(r||(r=new pa(a,o,t),s[t]=r),r.setAbles(n)):r&&(r.destroy(),s[t]=null)}))},e.updateEvent=function(t){var n=this.controlBox.getElement(),e=this.targetAbles.length,r=this.controlAbles.length,i=this.props,o=i.dragTarget||i.target,a=this.isTargetChanged(t,!0),s=!e&&this.targetGesto||a;s&&(yr(this,"targetGesto"),this.updateState({gesto:null})),r||yr(this,"controlGesto"),o&&e&&!this.targetGesto&&(this.targetGesto=ca(this,o,"")),!this.controlGesto&&r&&(this.controlGesto=fa(this,n,"controlAbles","Control")),s&&this.unsetAbles()},e.isDragging=function(){return!!this.targetGesto&&this.targetGesto.isFlag()||!!this.controlGesto&&this.controlGesto.isFlag()},e.updateTarget=function(t){this.updateRect(t,!0)},e.getRect=function(){var t=this.state,n=Sr(this.state),e=n[0],r=n[1],i=n[2],o=n[3],a=sr(n),s=t.width,u=t.height,l=a.width,c=a.height,f=a.left,p=a.top,d=[t.left,t.top],h=Jt(d,t.origin);return{width:l,height:c,left:f,top:p,pos1:e,pos2:r,pos3:i,pos4:o,offsetWidth:s,offsetHeight:u,beforeOrigin:Jt(d,t.beforeOrigin),origin:h,transformOrigin:t.transformOrigin,rotation:this.getRotation()}},e.getManager=function(){return this},e.getRotation=function(){var t,n,e=this.state,r=e.pos1,i=e.pos2,o=e.direction;return t=o,n=At(r,i)/Math.PI*180,n=0<=(n=0<=t?n:180-n)?n:360+n},e.request=function(n,t,e){void 0===t&&(t={});var r=this.props,i=r.ables,o=r.groupable,a=i.filter(function(t){return t.name===n})[0];if(this.isDragging()||!a||!a.request)return{request:function(){return this},requestEnd:function(){return this}};var s=this,u=a.request(this),l=e||t.isInstant,c=u.isControl?"controlAbles":"targetAbles",f=(o?"Group":"")+(u.isControl?"Control":""),p={request:function(t){return la(s,c,"drag",f,"",Oe(Oe({},u.request(t)),{requestAble:n,isRequest:!0}),l),this},requestEnd:function(){return la(s,c,"drag",f,"End",Oe(Oe({},u.requestEnd()),{requestAble:n,isRequest:!0}),l),this}};return la(s,c,"drag",f,"Start",Oe(Oe({},u.requestStart(t)),{requestAble:n,isRequest:!0}),l),l?p.request(t).requestEnd():p},e.destroy=function(){this.componentWillUnmount()},e.updateRenderPoses=function(){var t=this.state,n=this.props,e=t.originalBeforeOrigin,r=t.transformOrigin,i=t.allMatrix,o=t.is3d,a=t.pos1,s=t.pos2,u=t.pos3,l=t.pos4,c=t.left,f=t.top,p=n.padding||{},d=p.left,h=void 0===d?0:d,g=p.top,v=void 0===g?0:g,m=p.bottom,b=void 0===m?0:m,x=p.right,E=void 0===x?0:x,S=o?4:3,y=n.groupable?e:Jt(e,[c,f]);t.renderPoses=[Jt(a,zr(i,[-h,-v],r,y,S)),Jt(s,zr(i,[E,-v],r,y,S)),Jt(u,zr(i,[-h,b],r,y,S)),Jt(l,zr(i,[E,b],r,y,S))]},e.checkUpdate=function(){var t=this.props,n=t.target,e=t.container,r=t.parentMoveable,i=this.state,o=i.target,a=i.container;(o||n)&&(this.updateAbles(),Or(o,n)&&Or(a,e)||(this.updateState({target:n,container:e}),r||!e&&!this.controlBox||this.updateRect("End",!1,!1)))},e.triggerEvent=function(t,n){var e=this.props[t];return e&&e(n)},e.useCSS=function(t,n){var e=this.props.customStyledMap,r=t+n;return e[r]||(e[r]=De(t,n)),e[r]},e.unsetAbles=function(){var n=this;this.targetAbles.filter(function(t){return!!t.unset&&(t.unset(n),!0)}).length&&this.forceUpdate()},e.updateAbles=function(t,n){void 0===t&&(t=this.props.ables),void 0===n&&(n="");var e=this.props,r=e.triggerAblesSimultaneously,i=t.filter(function(t){return t&&(t.always||e[t.name])}),o="drag"+n+"ControlStart",a=wr(i,["drag"+n+"Start","pinch"+n+"Start"],r),s=wr(i,[o],r);this.enabledAbles=i,this.targetAbles=a,this.controlAbles=s},e.updateState=function(t,n){if(n)this.setState(t);else{var e=this.state;for(var r in t)e[r]=t[r]}},e.getEnabledAbles=function(){var n=this.props;return n.ables.filter(function(t){return t&&n[t.name]})},e.renderAbles=function(){var i,o,a,s,t,n=this,e=this.props.triggerAblesSimultaneously,r={createElement:B};return t=wr(this.getEnabledAbles(),["render"],e).map(function(t){return(0,t.render)(n,r)||[]}),i=t.reduce(function(t,n){return t.concat(n)},[]).filter(function(t){return t}),o=function(t){return t.key},a=[],s={},i.forEach(function(t,n){var e=o(t,n,i),r=s[e];r||(r=[],s[e]=r,a.push(r)),r.push(t)}),a.map(function(t){return t[0]})},e.updateCheckInput=function(){this.targetGesto&&(this.targetGesto.options.checkInput=this.props.checkInput)},e._renderLines=function(){var t=this.props,n=t.edge,e=t.zoom;if(t.hideDefaultLines)return[];var r=this.state.renderPoses,i={createElement:B};return[ho(i,n?"n":"",r[0],r[1],e,0),ho(i,n?"e":"",r[1],r[3],e,1),ho(i,n?"w":"",r[0],r[2],e,2),ho(i,n?"s":"",r[2],r[3],e,3)]},n.defaultProps={target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,edge:!1,parentMoveable:null,wrapperMoveable:null,parentPosition:null,portalContainer:null,ables:[],pinchThreshold:20,dragArea:!1,passDragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0,checkInput:!1,groupable:!1,hideDefaultLines:!1,cspNonce:"",translateZ:0,cssStyled:null,customStyledMap:{},props:{}},n}(q),ha={name:"groupable",props:{defaultGroupRotate:Number,defaultGroupOrigin:String,groupable:Boolean},events:{},render:function(e,r){var t=e.props.targets||[];e.moveables=[];var n=e.state,i={left:n.left,top:n.top};return t.map(function(t,n){return r.createElement(da,{key:"moveable"+n,ref:o(e,"moveables",n),target:t,origin:!1,cssStyled:e.props.cssStyled,customStyledMap:e.props.customStyledMap,parentMoveable:e,parentPosition:i})})}},ga=Ge("clickable",{props:{},events:{onClick:"click",onClickGroup:"clickGroup"},always:!0,dragStart:function(t,n){var e,r,i,o;n.isRequest||(e=window,r="click",i=t.onPreventClick,o=!0,e.addEventListener(r,i,o))},dragControlStart:function(t,n){this.dragStart(t,n)},dragGroupStart:function(t,n){this.dragStart(t,n),n.datas.inputTarget=n.inputEvent&&n.inputEvent.target},dragEnd:function(t,n){this.endEvent(t);var e,r=t.state.target,i=n.inputEvent,o=n.inputTarget;n.isDrag||this.unset(t),i&&o&&!n.isDrag&&!t.isMoveableElement(o)&&(e=r.contains(o),Dr(t,"onClick",Mr(t,n,{isDouble:n.isDouble,inputTarget:o,isTarget:r===o,containsTarget:e})))},dragGroupEnd:function(t,n){this.endEvent(t);var e,r,i,o,a=n.inputEvent,s=n.inputTarget;a&&s&&!n.isDrag&&!t.isMoveableElement(s)&&n.datas.inputTarget!==s&&(i=-1<(r=(e=t.props.targets).indexOf(s)),o=!1,-1===r&&(o=-1<(r=Ot(e,function(t){return t.contains(s)}))),Dr(t,"onClickGroup",Mr(t,n,{isDouble:n.isDouble,targets:e,inputTarget:s,targetIndex:r,isTarget:i,containsTarget:o})))},dragControlEnd:function(t){this.endEvent(t)},dragGroupControlEnd:function(t){this.endEvent(t)},endEvent:function(t){var n=this;requestAnimationFrame(function(){n.unset(t)})},unset:function(t){Yt(window,"click",t.onPreventClick,!0)}});function va(t){var n=t.originalDatas.draggable;return n||(t.originalDatas.draggable={},n=t.originalDatas.draggable),Oe(Oe({},t),{datas:n})}var ma=Ge("edgeDraggable",{dragControlCondition:function(t,n){if(!t.props.edgeDraggable||!n.inputEvent)return!1;var e=n.inputEvent.target;return _t(e,Ve("direction"))&&_t(e,Ve("line"))},dragControlStart:function(t,n){return fo.dragStart(t,va(n))},dragControl:function(t,n){return fo.drag(t,va(n))},dragControlEnd:function(t,n){return fo.dragEnd(t,va(n))},dragGroupControlCondition:function(t,n){if(!t.props.edgeDraggable||!n.inputEvent)return!1;var e=n.inputEvent.target;return _t(e,Ve("direction"))&&_t(e,Ve("line"))},dragGroupControlStart:function(t,n){return fo.dragGroupStart(t,va(n))},dragGroupControl:function(t,n){return fo.dragGroup(t,va(n))},dragGroupControlEnd:function(t,n){return fo.dragGroupEnd(t,va(n))},unset:function(t){t.state.dragInfo=null}}),ba={name:"individualGroupable",props:{individualGroupable:Boolean},events:{}},xa=[sa,No,co,_r,fo,ma,yo,Mo,Co,wo,Io,Fo,ko,ra,ea,aa,ha,ba,ga,To,ua],Ea=xa.reduce(function(t,n){return Oe(Oe({},t),"events"in n?n.events:{})},{}),Sa=xa.reduce(function(t,n){return Oe(Oe({},t),n.props)},{}),ya=Ir(Ea),Ma=Object.keys(ya),Ca=Object.keys(Sa);function Da(t,o){return Math.max.apply(Math,t.map(function(t){var n=t[0],e=t[1],r=t[2],i=t[3];return Math.max(n[o],e[o],r[o],i[o])}))}function Ra(t,o){return Math.min.apply(Math,t.map(function(t){var n=t[0],e=t[1],r=t[2],i=t[3];return Math.min(n[o],e[o],r[o],i[o])}))}var wa=function(r){function t(){var t=null!==r&&r.apply(this,arguments)||this;return t.differ=new Gn,t.moveables=[],t.transformOrigin="50% 50%",t}we(t,r);var n=t.prototype;return n.updateEvent=function(t){var n=this.state,e=this.props,r=t.dragTarget||n.target,i=e.dragTarget||this.areaElement;r!==i&&(yr(this,"targetGesto"),yr(this,"controlGesto"),n.target=null),n.target||(n.target=this.areaElement,this.controlBox.getElement().style.display="block",this.targetGesto=ca(this,i,"Group"),this.controlGesto=fa(this,this.controlBox.getElement(),"controlAbles","GroupControl"));var o=!Or(t.container,e.container);o&&(n.container=e.container);var a=this.differ.update(e.targets),s=a.added,u=a.changed,l=a.removed;(o||s.length||u.length||l.length)&&this.updateRect()},n.checkUpdate=function(){this.updateAbles()},n.updateRect=function(n,t,e){var r,i,o,a,s,u,l,c,f,p,d,h,g,v,m,b,x,E,S,y,M,C,D;void 0===e&&(e=!0),this.controlBox&&(this.moveables.forEach(function(t){t.updateRect(n,!1,!1)}),r=this.state,i=this.props,o=r.target||i.target,(!t||""!==n&&i.updateGroup)&&(this.rotation=i.defaultGroupRotate,this.transformOrigin=i.defaultGroupOrigin||"50% 50%",this.scale=[1,1]),a=this.rotation,s=this.scale,l=(u=function(t,n){if(!t.length)return[0,0,0,0];var o,i,a,r,s,e,u,l=t.map(function(t){return Sr(t.state)}),c=Ye,f=Ye,p=0,d=0,h=Ft(n,_e);return h%90?(o=h/180*Math.PI,i=Math.tan(o),a=-1/i,r=[qe,Ye],s=[qe,Ye],l.forEach(function(t){t.forEach(function(t){var n=t[1]-i*t[0],e=t[1]-a*t[0];r[0]=Math.max(r[0],n),r[1]=Math.min(r[1],n),s[0]=Math.max(s[0],e),s[1]=Math.min(s[1],e)})}),r.forEach(function(r){s.forEach(function(t){var n=(t-r)/(i-a),e=i*n+r;c=Math.min(c,n),f=Math.min(f,e)})}),p=Da(e=l.map(function(t){var n=t[0],e=t[1],r=t[2],i=t[3];return[un(n,-o),un(e,-o),un(r,-o),un(i,-o)]}),0)-Ra(e,0),d=Da(e,1)-Ra(e,1)):(c=Ra(l,0),f=Ra(l,1),p=Da(l,0)-c,d=Da(l,1)-f,h%180&&(u=p,p=d,d=u)),[c,f,p,d]}(this.moveables,a))[0],c=u[1],f=u[2],p=u[3],d="rotate("+a+"deg) scale("+(0<=s[0]?1:-1)+", "+(0<=s[1]?1:-1)+")",o.style.cssText+="left:0px;top:0px; transform-origin: "+this.transformOrigin+"; width:"+f+"px; height:"+p+"px;transform:"+d,r.width=f,r.height=p,h=this.getContainer(),v=[(g=vr(this.controlBox.getElement(),o,this.controlBox.getElement(),this.getContainer(),this.props.rootContainer||h)).left,g.top],M=[(y=jn([b=(m=Sr(g))[0],x=m[1],E=m[2],S=m[3]])).minX,y.minY],g.pos1=Qt(b,M),g.pos2=Qt(x,M),g.pos3=Qt(E,M),g.pos4=Qt(S,M),g.left=l-g.left+M[0],g.top=c-g.top+M[1],g.origin=Qt(Jt(v,g.origin),M),g.beforeOrigin=Qt(Jt(v,g.beforeOrigin),M),g.originalBeforeOrigin=Jt(v,g.originalBeforeOrigin),C=g.targetClientRect,D=0<s[0]*s[1]?1:-1,C.top+=g.top-r.top,C.left+=g.left-r.left,o.style.transform="translate("+-M[0]+"px, "+-M[1]+"px) "+d,this.updateState(Oe(Oe({},g),{direction:D,beforeDirection:D}),e))},n.getRect=function(){return Oe(Oe({},r.prototype.getRect.call(this)),{children:this.moveables.map(function(t){return t.getRect()})})},n.triggerEvent=function(t,n,e){if(e||-1<t.indexOf("Group"))return r.prototype.triggerEvent.call(this,t,n)},n.updateAbles=function(){r.prototype.updateAbles.call(this,Pe(this.props.ables,[ha]),"Group")},t.defaultProps=Oe(Oe({},da.defaultProps),{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,keepRatio:!0,targets:[],defaultGroupRotate:0,defaultGroupOrigin:"50% 50%"}),t}(da),Oa=function(n){function t(){var t=null!==n&&n.apply(this,arguments)||this;return t.moveables=[],t}we(t,n);var e=t.prototype;return e.render=function(){var e=this,t=this.props,n=t.cspNonce,r=t.cssStyled,i=t.targets;return B(r,{cspNonce:n,ref:S(this,"controlBox"),className:Ve("control-box")},i.map(function(t,n){return B(da,Oe({key:"moveable"+n,ref:o(e,"moveables",n)},e.props,{target:t,wrapperMoveable:e}))}))},e.componentDidUpdate=function(){},e.updateRect=function(n,e,r){void 0===r&&(r=!0),this.moveables.forEach(function(t){t.updateRect(n,e,r)})},e.getRect=function(){return Oe(Oe({},n.prototype.getRect.call(this)),{children:this.moveables.map(function(t){return t.getRect()})})},e.request=function(){return{request:function(){return this},requestEnd:function(){return this}}},e.dragStart=function(){return this},e.hitTest=function(){return 0},e.isInside=function(){return!1},e.isDragging=function(){return!1},e.updateRenderPoses=function(){},e.updateEvent=function(){},e.checkUpdate=function(){},e.triggerEvent=function(){},e.updateAbles=function(){},t}(da),Pa=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return we(n,t),n.defaultAbles=xa,n}(function(n){function t(){var t=null!==n&&n.apply(this,arguments)||this;return t.refTargets=[],t.selectorMap={},t}we(t,n);var e,r,i=t.prototype;return t.makeStyled=function(){var e={};this.getTotalAbles().forEach(function(t){var n=t.css;n&&n.forEach(function(t){e[t]=!0})});var r,t=Gt(e).join("\n");this.defaultStyled=De("div",(r=Ie,(Ne+t).replace(/([^}{]*){/gm,function(t,n){return n.replace(/\.([^{,\s\d.]+)/g,"."+r+"$1")+"{"})))},t.getTotalAbles=function(){return Pe([No,ha,ba,To],this.defaultAbles)},i.render=function(){var t=this.constructor;t.defaultStyled||t.makeStyled();var n,e,r,i=this.props,o=i.ables,a=i.props,s=function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e}(i,["ables","props"]),u=Fr(s.target||s.targets),l=(n=u,e=this.selectorMap,r=[],n.forEach(function(t){t&&(xt(t)?e[t]&&r.push.apply(r,e[t]):r.push(t))}),r);this.refTargets=u;var c=1<l.length,f=Pe(t.getTotalAbles(),o||[]),p=Oe(Oe(Oe({},s),a||{}),{ables:f,cssStyled:t.defaultStyled,customStyledMap:t.customStyledMap});return c?s.individualGroupable?B(Oa,Oe({key:"individual-group",ref:S(this,"moveable")},p,{target:null,targets:l})):B(wa,Oe({key:"group",ref:S(this,"moveable")},p,{target:null,targets:l})):B(da,Oe({key:"single",ref:S(this,"moveable")},p,{target:l[0]}))},i.componentDidMount=function(){this.updateRefs()},i.componentDidUpdate=function(){this.updateRefs()},i.updateRefs=function(t){var r=Fr(this.props.target||this.props.targets),n=this.refTargets.some(function(t,n){var e=r[n];return!(!t&&!e)&&t!==e}),e=t?{}:this.selectorMap,i={};this.refTargets.forEach(function(t){xt(t)&&(e[t]?i[t]=e[t]:(n=!0,i[t]=[].slice.call(document.querySelectorAll(t))))}),this.selectorMap=i,n&&this.forceUpdate()},i.getManager=function(){return this.moveable},t.defaultAbles=[],t.customStyledMap={},t.defaultStyled=null,function(t,n,e,r){var i,o=arguments.length,a=o<3?n:null===r?r=Object.getOwnPropertyDescriptor(n,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,n,e,r);else for(var s=t.length-1;0<=s;s--)(i=t[s])&&(a=(o<3?i(a):3<o?i(n,e,a):i(n,e))||a);3<o&&a&&Object.defineProperty(n,e,a)}([(e=He,void 0===r&&(r={}),function(n,o){e.forEach(function(i){var t=r[i]||i;t in n||(n[t]=function(){for(var t,n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var r=(t=this[o])[i].apply(t,n);return r===this[o]?this:r})})})],t.prototype,"moveable",void 0),t}(q)),Ga=function(e){function t(t){var n=e.call(this,t)||this;return n.state={},n.state=n.props,n}return i(t,e),t.prototype.render=function(){return t=B(Pa,u({ref:S(this,"moveable")},this.state)),n=this.state.parentElement,B(X,{element:t,container:n});var t,n},t}(Y);var Ba="function",za="object",Ta="string",ka="undefined",Aa=[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}],Ia=1e-7,Na={cm:function(t){return 96*t/2.54},mm:function(t){return 96*t/254},in:function(t){return 96*t},pt:function(t){return 96*t/72},pc:function(t){return 96*t/6},"%":function(t,n){return t*n/100},vw:function(t,n){return void 0===n&&(n=window.innerWidth),t/100*n},vh:function(t,n){return void 0===n&&(n=window.innerHeight),t/100*n},vmax:function(t,n){return void 0===n&&(n=Math.max(window.innerWidth,window.innerHeight)),t/100*n},vmin:function(t,n){return void 0===n&&(n=Math.min(window.innerWidth,window.innerHeight)),t/100*n}};function Fa(t){return typeof t===ka}function ja(t){return t&&typeof t===za}function _a(t){return Array.isArray(t)}function Ya(t){return typeof t===Ta}function qa(t){return typeof t===Ba}function Xa(t,n,e,r,i){return Wa(t,n,e)?e:function(i,o,t,a,s){for(var u,n=t;n<a;++n){var e=function(t){var n=o[t].trim();if(n===i.close&&!Wa(i,o,t))return{value:t};var e=t,r=Ka(s,function(t){return t.open===n});if(r&&(e=Xa(r,o,t,a,s)),-1===e)return u=t,"break";u=t=e}(n);if(n=u,"object"==typeof e)return e.value;if("break"===e)break}return-1}(t,n,e+1,r,i)}function Wa(t,n,e){if(!t.ignore)return null;var r=n.slice(Math.max(e-3,0),e+3).join("");return new RegExp(t.ignore).exec(r)}function La(t,n){var e=Ya(n)?{separator:n}:n,r=e.separator,s=void 0===r?",":r,u=e.isSeparateFirst,l=e.isSeparateOnlyOpenClose,i=e.isSeparateOpenClose,c=void 0===i?l:i,o=e.openCloseCharacters,f=void 0===o?Aa:o,a=f.map(function(t){var n=t.open,e=t.close;return n===e?n:n+"|"+e}).join("|"),p=new RegExp("(\\s*"+s+"\\s*|"+a+"|\\s+)","g"),d=t.split(p).filter(Boolean),h=d.length,g=[],v=[];function m(){return v.length&&(g.push(v.join("")),v=[])}for(var b,x=0;x<h;++x){var E=function(t){var n,e,r=d[t].trim(),i=t,o=Ka(f,function(t){return t.open===r}),a=Ka(f,function(t){return t.close===r});if(o){if(-1!==(i=Xa(o,d,t,h,f))&&c)return m()&&u?(b=t,"break"):(g.push(d.slice(t,i+1).join("")),t=i,u?(b=t,"break"):(b=t,"continue"))}else{if(a&&!Wa(a,d,t))throw new Error("invalid format: "+a.close);if(n=r,!((""!==(e=s)&&" "!=e||""!==n&&" "!=n)&&n!==e||l))return m(),u?(b=t,"break"):(b=t,"continue")}-1===i&&(i=h-1),v.push(d.slice(t,i+1).join("")),b=t=i}(x),x=b;if("break"===E)break}return v.length&&g.push(v.join("")),g}function Ha(t){return La(t,"")}function Va(t){return La(t,",")}function Ua(t){var n=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t);return!n||n.length<4?{}:{prefix:n[1],value:n[2],suffix:n[3]}}function $a(t){var n=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);if(!n)return{prefix:"",unit:"",value:NaN};var e=n[1],r=n[2];return{prefix:e,unit:n[3],value:parseFloat(r)}}function Za(t,n,e){void 0===e&&(e=-1);for(var r=t.length,i=0;i<r;++i)if(n(t[i],i,t))return i;return e}function Ka(t,n,e){var r=Za(t,n);return-1<r?t[r]:e}function Ja(t,n){var e=$a(t),r=e.value,i=e.unit;if(ja(n)){var o=n[i];if(o){if(qa(o))return o(r);if(Na[i])return Na[i](r,o)}}else if("%"===i)return r*n/100;return Na[i]?Na[i](r):r}function Qa(t,e,r){return[[os(e[0],Ia),os(e[0]*t[1]/t[0],Ia)],[os(e[1]*t[0]/t[1],Ia),os(e[1],Ia)]].filter(function(t){return t.every(function(t,n){return r?t<=e[n]:t>=e[n]})})[0]||t}function ts(t,o,a,n){if(!n)return t.map(function(t,n){return e=t,r=o[n],i=a[n],Math.max(r,Math.min(e,i));var e,r,i});var e=t[0],r=t[1],i=Qa(t,o,!1),s=i[0],u=i[1],l=Qa(t,a,!0),c=l[0],f=l[1];return e<s||r<u?(e=s,r=u):(c<e||f<r)&&(e=c,r=f),[e,r]}function ns(t){for(var n=t.length,e=0,r=n-1;0<=r;--r)e+=t[r];return n?e/n:0}function es(t,n){var e=n[0]-t[0],r=n[1]-t[1],i=Math.atan2(r,e);return 0<=i?i:i+2*Math.PI}function rs(t){var e,n=(e=t,[0,1].map(function(n){return ns(e.map(function(t){return t[n]}))})),r=es(n,t[0]),i=es(n,t[1]);return r<i&&i-r<Math.PI||i<r&&i-r<-Math.PI?1:-1}function is(t,n){return Math.sqrt(Math.pow((n?n[0]:0)-t[0],2)+Math.pow((n?n[1]:0)-t[1],2))}function os(t,n){return n?Math.round(t/n)*n:t}function as(e,r){return e.forEach(function(t,n){e[n]=os(e[n],r)}),e}function ss(t,n){return t.classList?t.classList.contains(n):!!t.className.match(new RegExp("(\\s|^)"+n+"(\\s|$)"))}function us(t,n,e,r){t.removeEventListener(n,e,r)}var ls=function(t,n){return(ls=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(t,n)};function cs(t,n){function e(){this.constructor=t}ls(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}var fs=function(){return(fs=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var i in n=arguments[e])Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t}).apply(this,arguments)};var ps=function(n){function t(){var t=null!==n&&n.apply(this,arguments)||this;return t.injectResult=null,t.tag="div",t}cs(t,n);var e=t.prototype;return e.render=function(){var t=this.props,n=t.className,e=void 0===n?"":n,r=(t.cspNonce,t.portalContainer),i=function(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]]);return e}(t,["className","cspNonce","portalContainer"]),o=this.injector.className,a=this.tag,s={};return-1<U.indexOf("simple")&&r&&(s={portalContainer:r}),B(a,fs({ref:S(this,"element"),"data-styled-id":o,className:e+" "+o},s,i))},e.componentDidMount=function(){this.injectResult=this.injector.inject(this.element,{nonce:this.props.cspNonce})},e.componentWillUnmount=function(){this.injectResult.destroy(),this.injectResult=null},e.getElement=function(){return this.element},t}(Y);var ds=function(t,n){return(ds=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(t,n)};var hs=function(){return(hs=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var i in n=arguments[e])Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t}).apply(this,arguments)};function gs(){for(var t=0,n=0,e=arguments.length;n<e;n++)t+=arguments[n].length;for(var r=Array(t),i=0,n=0;n<e;n++)for(var o=arguments[n],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}function vs(t,n){var e;return hs({events:{},props:((e={})[t]=Boolean,e),name:t},n)}var ms,bs,xs=ut().browser.webkit,Es=xs&&(ms="undefined"==typeof window?{userAgent:""}:window.navigator,!!(bs=/applewebkit\/([^\s]+)/g.exec(ms.userAgent.toLowerCase()))&&parseFloat(bs[1])<605),Ss="moveable-",ys=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],Ms=1e-4,Cs=1e-7,Ds=["n","w","s","e","nw","ne","sw","se"],Rs={n:[0,1],s:[2,3],w:[2,0],e:[1,3],nw:[0],ne:[1],sw:[2],se:[3]},ws={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135};function Os(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.apply(void 0,gs([Ss],t))}function Ps(t,n,e){return Zt(n,hn(e,n),t,hn(e.map(function(t){return-t}),n))}function Gs(s){return Bs(su(s,":before")).map(function(t,n){var e,r,i=$a(t),o=i.value,a=i.unit;return o*(e=s,r=0===n,"%"!==a?1:js(e.ownerSVGElement)[r?"width":"height"]/100)})}function Bs(t){var n=t.transformOrigin;return n?n.split(" "):["0","0"]}function zs(t,n,e){for(var r=document.body,i=!t||e?t:t.parentElement,o=t===n||i===n,a="relative";i&&i!==r;){n===i&&(o=!0);var s=su(i),u=s.transform,a=s.position;if("svg"===i.tagName.toLowerCase()||"static"!==a||u&&"none"!==u)break;i=i.parentElement,a="relative"}return{isStatic:"static"===a,isEnd:o||!i||i===r,offsetParent:i||r}}function Ts(t,n,e,r){var i,o,a=t.tagName.toLowerCase(),s=t.offsetLeft,u=t.offsetTop;r&&(s-=(o=(n||document.documentElement).getBoundingClientRect()).left,u-=o.top);var l,c,f=Fa(s),p=!f;return p||"svg"===a?c=(l=Bs(e).map(function(t){return parseFloat(t)})).slice():(c=(l=Es?Gs(t):Bs(e).map(function(t){return parseFloat(t)})).slice(),p=!0,s=(i=function(t,n){if(!t.getBBox)return[0,0];var e=t.getBBox(),r=js(t.ownerSVGElement),i=e.x-r.x,o=e.y-r.y;return[i,o,n[0]-i,n[1]-o]}(t,l))[0],u=i[1],l[0]=i[2],l[1]=i[3]),{tagName:a,isSVG:f,hasOffset:p,offset:[s||0,u||0],origin:l,targetOrigin:c}}function ks(t,n,e){void 0===e&&(e=su(t));var r=su(document.body),i=r.position;if(!(n||i&&"static"!==i))return[0,0];var o=parseInt(r.marginLeft,10),a=parseInt(r.marginTop,10);return"absolute"===e.position&&("auto"===e.top&&"auto"===e.bottom||(a=0),"auto"===e.left&&"auto"===e.right||(o=0)),[o,a]}function As(t){t.forEach(function(t){var n=t.matrix;n&&(t.matrix=$t(n,3,4))})}function Is(t,n,e){for(var r,i,o,a,s=t,u=[],l=!e&&t===n,c=l,f=!1,p=3,d=zs(n,n,!0).offsetParent;s&&!c;){c=l;var h=su(s),g=h.position,v="fixed"===g,m=tn((a=h.transform)&&"none"!==a?ja(a)?a:Ua(a).value.split(/s*,\s*/g).map(function(t){return parseFloat(t)}):[1,0,0,1,0,0]),b=m.length;f||16!==b||(f=!0,p=4,As(u),o=o&&$t(o,3,4)),f&&9===b&&(m=$t(m,3,4));var x=Ts(s,n,h,v),E=x.tagName,S=x.hasOffset,y=x.isSVG,M=x.origin,C=x.targetOrigin,D=x.offset,R=D[0],w=D[1];"svg"===E&&o?(u.push({type:"target",target:s,matrix:function(t,n){var e=js(t),r=e.width,i=e.height,o=e.clientWidth,a=e.clientHeight,s=o/r,u=a/i,l=t.preserveAspectRatio.baseVal,c=l.align,f=l.meetOrSlice,p=[0,0],d=[s,u],h=[0,0];{var g,v,m;1!==c&&(g=(c-2)%3,v=Math.floor((c-2)/3),p[0]=r*g/2,p[1]=i*v/2,m=2===f?Math.max(u,s):Math.min(s,u),d[0]=m,d[1]=m,h[0]=(o-r)/2*g,h[1]=(a-i)/2*v)}var b=dn(d,n);return b[n*(n-1)]=h[0],b[n*(n-1)+1]=h[1],Ps(b,n,p)}(s,p)}),u.push({type:"offset",target:s,matrix:pn(p)})):"g"===E&&t!==s&&(w=R=0);var O=zs(s,n),P=O.offsetParent,G=O.isEnd,B=O.isStatic;xs&&S&&!y&&B&&("relative"===g||"static"===g)&&(R-=P.offsetLeft,w-=P.offsetTop,l=l||G);var z,T=0,k=0;if(S&&d!==P&&(T=P.clientLeft,k=P.clientTop),S&&P===document.body&&(R+=(z=ks(s,!1,h))[0],w+=z[1]),u.push({type:"target",target:s,matrix:Ps(m,p,M)}),S?u.push({type:"offset",target:s,matrix:hn([R-s.scrollLeft+T,w-s.scrollTop+k],p)}):u.push({type:"offset",target:s,origin:M}),o=o||m,r=r||M,i=i||C,c||v)break;s=P,l=G,e&&s!==document.body||(c=l)}return{offsetContainer:d,matrixes:u,targetMatrix:o=o||pn(p),transformOrigin:r=r||[0,0],targetOrigin:i=i||[0,0],is3d:f}}function Ns(t,n,e,r){var i;void 0===e&&(e=n);var o,a,s,u,l=0,c=0,f=0,p={};t&&(o=su(t),l=t.offsetWidth,c=t.offsetHeight,Fa(l)&&(l=(i=$s(t,o,!0))[0],c=i[1])),t&&(s=Ws((a=function(t,n,e,r){void 0===e&&(e=n);var i=Is(t,n),o=i.matrixes,a=i.is3d,s=i.targetMatrix,u=i.transformOrigin,l=i.targetOrigin,c=Is(i.offsetContainer,e,!0),f=c.matrixes,p=c.is3d,d=r||p||a,h=d?4:3,g="svg"!==t.tagName.toLowerCase()&&"ownerSVGElement"in t,v=s,m=pn(h),b=pn(h),x=pn(h),E=pn(h),S=o.length,y=e||document.body,M=zs(y,y,!0).offsetParent;f.reverse(),o.reverse(),!a&&d&&(v=$t(v,3,4),As(o));!p&&d&&As(f);f.forEach(function(t){b=Kt(b,t.matrix,h)}),o.forEach(function(t,n){var e;S-2===n&&(x=m.slice()),S-1===n&&(E=m.slice()),t.matrix||(e=function(t,n,e,r,i){var o,a=t.target,s=t.origin,u=n.matrix,l=$s(a,void 0,!0),c=l[0],f=l[1],p=e.getBoundingClientRect(),d=[0,0];e===document.body&&(d=ks(a,!0));var h=a.getBoundingClientRect(),g=h.left-p.left+e.scrollLeft-(e.clientLeft||0)+d[0],v=h.top-p.top+e.scrollTop-(e.clientTop||0)+d[1],m=h.width,b=h.height,x=Zt(r,i,u),E=Xs(x,c,f,r),S=E.left,y=E.top,M=E.width,C=E.height,D=_s(x,s,r),R=Qt(D,[S,y]),w=[g+R[0]*m/M,v+R[1]*b/C],O=[0,0],P=0;for(;++P<10;){var G=Lt(i,r);o=Qt(_s(G,w,r),_s(G,D,r)),O[0]=o[0],O[1]=o[1];var B=Xs(Zt(r,i,hn(O,r),u),c,f,r),z=B.left,T=B.top,k=z-g,A=T-v;if(Math.abs(k)<2&&Math.abs(A)<2)break;w[0]-=k,w[1]-=A}return O.map(function(t){return Math.round(t)})}(t,o[n+1],M,h,Kt(b,m,h)),t.matrix=hn(e,h)),m=Kt(m,t.matrix,h)});var C=!g&&a;v=v||pn(C?4:3);var D=Fs(g&&16===v.length?$t(v,4,3):v,C);return{rootMatrix:b=Wt(b,h,h),beforeMatrix:x,offsetMatrix:E,allMatrix:m,targetMatrix:v,targetTransform:D,transformOrigin:u,targetOrigin:l,is3d:d}}(t,n,e,r)).allMatrix,a.transformOrigin,l,c),p=hs(hs({},a),s),f=Zs([(u=Ws(a.allMatrix,[50,50],100,100)).pos1,u.pos2],u.direction));var d=r?4:3;return hs({width:l,height:c,rotation:f,rootMatrix:pn(d),beforeMatrix:pn(d),offsetMatrix:pn(d),allMatrix:pn(d),targetMatrix:pn(d),targetTransform:"",transformOrigin:[0,0],targetOrigin:[0,0],is3d:!!r,left:0,top:0,right:0,bottom:0,origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],direction:1},p)}function Fs(t,n){return void 0===n&&(n=9<t.length),(n?"matrix3d":"matrix")+"("+nn(t,!n).join(",")+")"}function js(t){var n=t.clientWidth,e=t.clientHeight;if(!t)return{x:0,y:0,width:0,height:0,clientWidth:n,clientHeight:e};var r=t.viewBox,i=r&&r.baseVal||{x:0,y:0,width:0,height:0};return{x:i.x,y:i.y,width:i.width||n,height:i.height||e,clientWidth:n,clientHeight:e}}function _s(t,n,e){return en(t,Ut(n,e),e)}function Ys(n,t,e,r){return[[0,0],[t,0],[0,e],[t,e]].map(function(t){return _s(n,t,r)})}function qs(t){var n=t.map(function(t){return t[0]}),e=t.map(function(t){return t[1]}),r=Math.min.apply(Math,n),i=Math.min.apply(Math,e),o=Math.max.apply(Math,n),a=Math.max.apply(Math,e);return{left:r,top:i,right:o,bottom:a,width:o-r,height:a-i}}function Xs(t,n,e,r){return qs(Ys(t,n,e,r))}function Ws(t,n,e,r){var i=16===t.length?4:3,o=Ys(t,e,r,i),a=o[0],s=a[0],u=a[1],l=o[1],c=l[0],f=l[1],p=o[2],d=p[0],h=p[1],g=o[3],v=g[0],m=g[1],b=_s(t,n,i),x=b[0],E=b[1],S=Math.min(s,c,d,v),y=Math.min(u,f,h,m);return{left:S,top:y,right:Math.max(s,c,d,v),bottom:Math.max(u,f,h,m),origin:[x=x-S||0,E=E-y||0],pos1:[s=s-S||0,u=u-y||0],pos2:[c=c-S||0,f=f-y||0],pos3:[d=d-S||0,h=h-y||0],pos4:[v=v-S||0,m=m-y||0],direction:rs(o)}}function Ls(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function Hs(t,n){return Ls([n[0]-t[0],n[1]-t[1]])}function Vs(t,n,e,r){void 0===e&&(e=1),void 0===r&&(r=es(t,n));var i=Hs(t,n);return{transform:"translateY(-50%) translate("+t[0]+"px, "+t[1]+"px) rotate("+r+"rad) scaleY("+e+")",width:i+"px"}}function Us(t,n){for(var e=[],r=2;r<arguments.length;r++)e[r-2]=arguments[r];var i=e.length;return{transform:"translateZ(0px) translate("+e.reduce(function(t,n){return t+n[0]},0)/i+"px, "+e.reduce(function(t,n){return t+n[1]},0)/i+"px) rotate("+t+"rad) scale("+n+")"}}function $s(t,n,e,r){void 0===n&&(n=su(t)),void 0===r&&(r=e||"border-box"===n.boxSizing);var i=t.offsetWidth,o=t.offsetHeight,a=!Fa(i);if((e||r)&&a)return[i,o];if(a||"svg"===t.tagName.toLowerCase())return i=t.clientWidth,o=t.clientHeight,e||r?[i+(parseFloat(n.borderLeftWidth)||0)+(parseFloat(n.borderRightWidth)||0),o+(parseFloat(n.borderTopWidth)||0)+(parseFloat(n.borderBottomWidth)||0)]:[i-(parseFloat(n.paddingLeft)||0)-(parseFloat(n.paddingRight)||0),o-(parseFloat(n.paddingTop)||0)-(parseFloat(n.paddingBottom)||0)];var s=t.getBBox();return[s.width,s.height]}function Zs(t,n){return es(0<n?t[0]:t[1],0<n?t[1]:t[0])}function Ks(t,n,e,r,i){var o,a,s=1,u=[0,0],l=Js(),c=Js(),f=Js(),p=Ns(n,e,i,!1);return n&&(o=p.is3d?4:3,s=(a=Ws(p.offsetMatrix,Jt(p.transformOrigin,Ht(p.targetMatrix,o)),p.width,p.height)).direction,u=Jt(a.origin,[a.left-p.left,a.top-p.top]),l=Qs(n),c=Qs(zs(r,r,!0).offsetParent||document.body,!0),t&&(f=Qs(t))),hs({targetClientRect:l,containerClientRect:c,moveableClientRect:f,beforeDirection:s,beforeOrigin:u,originalBeforeOrigin:u,target:n},p)}function Js(){return{left:0,right:0,top:0,bottom:0,width:0,height:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0}}function Qs(t,n){var e,r=0,i=0,o=0,a=0;t===document.body||t===document.documentElement?(o=window.innerWidth,a=window.innerHeight,r=-(document.documentElement.scrollLeft||document.body.scrollLeft),i=-(document.documentElement.scrollTop||document.body.scrollTop)):(r=(e=t.getBoundingClientRect()).left,i=e.top,o=e.width,a=e.height);var s={left:r,right:r+o,top:i,bottom:i+a,width:o,height:a};return n&&(s.clientLeft=t.clientLeft,s.clientTop=t.clientTop,s.clientWidth=t.clientWidth,s.clientHeight=t.clientHeight,s.scrollWidth=t.scrollWidth,s.scrollHeight=t.scrollHeight,s.overflow="visible"!==su(t).overflow),s}function tu(t){if(t){var n=t.getAttribute("data-direction");if(n){var e=[0,0];return-1<n.indexOf("w")&&(e[0]=-1),-1<n.indexOf("e")&&(e[0]=1),-1<n.indexOf("n")&&(e[1]=-1),-1<n.indexOf("s")&&(e[1]=1),e}}}function nu(t,n){return[Jt(n,t[0]),Jt(n,t[1]),Jt(n,t[2]),Jt(n,t[3])]}function eu(t){var n=t.left,e=t.top;return nu([t.pos1,t.pos2,t.pos3,t.pos4],[n,e])}function ru(t,n){t[n]&&(t[n].unset(),t[n]=null)}function iu(t,n,e){var r=n.datas;r.datas||(r.datas={});var i=hs(hs({},e),{target:t.state.target,clientX:n.clientX,clientY:n.clientY,inputEvent:n.inputEvent,currentTarget:t,moveable:t,datas:r.datas});return r.isStartEvent?r.lastEvent=i:r.isStartEvent=!0,i}function ou(t,n,e){var r=n.datas,i="isDrag"in e?e.isDrag:n.isDrag;return r.datas||(r.datas={}),hs(hs({isDrag:i},e),{moveable:t,target:t.state.target,clientX:n.clientX,clientY:n.clientY,inputEvent:n.inputEvent,currentTarget:t,lastEvent:r.lastEvent,isDouble:n.isDouble,datas:r.datas})}function au(t,n,e,r){return t.triggerEvent(n,e,r)}function su(t,n){return window.getComputedStyle(t,n)}function uu(t,e,r){var i={},o={};return t.filter(function(n){var t=n.name;if(i[t]||!e.some(function(t){return n[t]}))return!1;if(!r&&n.ableGroup){if(o[n.ableGroup])return!1;o[n.ableGroup]=!0}return i[t]=!0})}function lu(t,n){return t===n||null==t&&null==n}function cu(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return t.sort(function(t,n){return Math.abs(n)-Math.abs(t)}),t[0]}function fu(t,n,e){return en(Lt(t,e),Ut(n,e),e)}function pu(t,n){var e=t.is3d?4:3,r=fu(t.rootMatrix,[n.distX,n.distY],e);return n.distX=r[0],n.distY=r[1],n}function du(t,n,e,r,i){return Qt(_s(t,Jt(e,n),i),r)}function hu(t,n,e){return e?t/n*100+"%":t+"px"}function gu(t){return Math.abs(t)<=Cs?0:t}function vu(t,n){return n.isRequest?("resizable"===n.requestAble||"scalable"===n.requestAble)&&n.parentDirection:ss(n.inputEvent.target,Os("direction"))}function mu(t,n){return t?Ya(t)?n?document.querySelector(t):t:qa(t)?t():"current"in t?t.current:t:null}function bu(t,e){return t?((n=t)&&ja(n)&&(_a(n)||"length"in n)?[].slice.call(t):[t]).reduce(function(t,n){return Ya(n)&&e?gs(t,[].slice.call(document.querySelectorAll(n))):(t.push(mu(n,e)),t)},[]):[];var n}function xu(t,n){var e=t.rootMatrix,r=t.is3d,i=Lt(e,r?4:3);return r||(i=$t(i,3,4)),i[12]=0,i[13]=0,i[14]=0,Cn(i,n)}var Eu=vs("pinchable",{events:{onPinchStart:"pinchStart",onPinch:"pinch",onPinchEnd:"pinchEnd",onPinchGroupStart:"pinchGroupStart",onPinchGroup:"pinchGroup",onPinchGroupEnd:"pinchGroupEnd"},dragStart:function(){return!0},pinchStart:function(e,r){var t=r.datas,n=r.targets,i=r.angle,o=r.originalDatas,a=e.props,s=a.pinchable,u=a.ables;if(!s)return!1;var l="onPinch"+(n?"Group":"")+"Start",c="drag"+(n?"Group":"")+"ControlStart",f=(!0===s?e.controlAbles:u.filter(function(t){return-1<s.indexOf(t.name)})).filter(function(t){return t.canPinch&&t[c]}),p=iu(e,r,{});n&&(p.targets=n);var d=au(e,l,p);t.isPinch=!1!==d,t.ables=f;var h=t.isPinch;return!!h&&(f.forEach(function(t){var n;o[t.name]=o[t.name]||{},t[c]&&(n=hs(hs({},r),{datas:o[t.name],parentRotate:i,isPinch:!0}),t[c](e,n))}),e.state.snapRenderInfo={request:r.isRequest,direction:[0,0]},h)},pinch:function(n,e){var t=e.datas,r=e.scale,i=e.distance,o=e.originalDatas,a=e.inputEvent,s=e.targets,u=e.angle;if(t.isPinch){var l=i*(1-1/r),c=iu(n,e,{});s&&(c.targets=s),au(n,"onPinch"+(s?"Group":""),c);var f=t.ables,p="drag"+(s?"Group":"")+"Control";return f.forEach(function(t){t[p]&&t[p](n,hs(hs({},e),{datas:o[t.name],inputEvent:a,parentDistance:l,parentRotate:u,isPinch:!0}))}),c}},pinchEnd:function(n,e){var t=e.datas,r=e.isPinch,i=e.inputEvent,o=e.targets,a=e.originalDatas;if(t.isPinch){var s="onPinch"+(o?"Group":"")+"End",u=ou(n,e,{isDrag:r});o&&(u.targets=o),au(n,s,u);var l=t.ables,c="drag"+(o?"Group":"")+"ControlEnd";return l.forEach(function(t){t[c]&&t[c](n,hs(hs({},e),{isDrag:r,datas:a[t.name],inputEvent:i,isPinch:!0}))}),r}},pinchGroupStart:function(t,n){return this.pinchStart(t,hs(hs({},n),{targets:t.props.targets}))},pinchGroup:function(t,n){return this.pinch(t,hs(hs({},n),{targets:t.props.targets}))},pinchGroupEnd:function(t,n){return this.pinchEnd(t,hs(hs({},n),{targets:t.props.targets}))}});function Su(t,n,e,r,i){var o=n.gesto.move(e,t.inputEvent),a=o.originalDatas||o.datas,s=a.draggable||(a.draggable={});return hs(hs({},i?pu(n,o):o),{isDrag:!0,isPinch:!!r,parentEvent:!0,datas:s,originalDatas:t.originalDatas})}var yu=function(){function t(){this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}}}var n=t.prototype;return n.dragStart=function(t,n){this.isDrag=!1,this.isFlag=!1;var e=n.originalDatas;return(this.datas=e).draggable||(e.draggable={}),hs(hs({},this.move(t,n.inputEvent)),{type:"dragstart"})},n.drag=function(t,n){return this.move([t[0]-this.prevX,t[1]-this.prevY],n)},n.move=function(t,n){var e,r;return this.isFlag?(e=this.prevX+t[0],r=this.prevY+t[1],this.isDrag=!0):(this.prevX=t[0],this.prevY=t[1],this.startX=t[0],this.startY=t[1],e=t[0],r=t[1],this.isFlag=!0),{type:"drag",clientX:this.prevX=e,clientY:this.prevY=r,inputEvent:n,isDrag:this.isDrag,distX:e-this.startX,distY:r-this.startY,deltaX:t[0],deltaY:t[1],datas:this.datas.draggable,originalDatas:this.datas,parentEvent:!0,parentGesto:this}},t}();function Mu(t,e,r){var n=r.originalDatas;n.groupable=n.groupable||{};var i=n.groupable;i.childDatas=i.childDatas||[];var o=i.childDatas;return t.moveables.map(function(t,n){return o[n]=o[n]||{},o[n][e]=o[n][e]||{},hs(hs({},r),{datas:o[n][e],originalDatas:o[n]})})}function Cu(t,o,a,s,n,u){var l=!!a.match(/Start$/g),c=!!a.match(/End$/g),f=n.isPinch,p=n.datas,e=Mu(t,o.name,n),d=t.moveables,r=e.map(function(t,n){var e=d[n],r=t,r=l?(new yu).dragStart(s,t):(e.state.gesto||(e.state.gesto=p.childGestos[n]),Su(t,e.state,s,f,u)),i=o[a](e,hs(hs({},r),{parentFlag:!0}));return c&&(e.state.gesto=null),i});return l&&(p.childGestos=d.map(function(t){return t.state.gesto})),r}function Du(t,o,a,n,s,u){void 0===s&&(s=function(t,n){return n});var l=!!a.match(/End$/g),e=Mu(t,o.name,n),c=t.moveables;return e.map(function(t,n){var e=c[n],r=s(e,t),i=o[a](e,hs(hs({},r),{parentFlag:!0}));return i&&u&&u(e,t,i,n),l&&(e.state.gesto=null),i})}function Ru(t,n){var e=n.clientX,r=n.clientY,i=n.datas,o=t.state,a=o.moveableClientRect,s=o.rootMatrix,u=o.is3d,l=o.pos1,c=Qt(fu(s,[e-a.left,r-a.top],u?4:3),l),f=zu({datas:i,distX:c[0],distY:c[1]});return[f[0],f[1]]}function wu(t,n){var e=n.datas,r=t.state,i=r.allMatrix,o=r.beforeMatrix,a=r.is3d,s=r.left,u=r.top,l=r.origin,c=r.offsetMatrix,f=r.targetMatrix,p=r.transformOrigin,d=a?4:3;e.is3d=a,e.matrix=i,e.targetMatrix=f,e.beforeMatrix=o,e.offsetMatrix=c,e.transformOrigin=p,e.inverseMatrix=Lt(i,d),e.inverseBeforeMatrix=Lt(o,d),e.absoluteOrigin=Ut(Jt([s,u],l),d),e.startDragBeforeDist=en(e.inverseBeforeMatrix,e.absoluteOrigin,d),e.startDragDist=en(e.inverseMatrix,e.absoluteOrigin,d)}function Ou(t,n){var e,r,i,o,a,s,u,l,c,f,p,d,h,g,v,m,b,x=t.datas,E=t.originalDatas.beforeRenderable,S=x.transformIndex,y=E.nextTransforms,M=E.nextTransformAppendedIndexes,C=-1===S?y.length:S+M.filter(function(t){return t<S}).length,D=(r=C,i=(e=y).slice(0,r<0?void 0:r),o=e.slice(0,r<0?void 0:r+1),a=e[r]||"",s=r<0?[]:e.slice(r),u=r<0?[]:e.slice(r+1),l=Rn(i),c=Rn(o),f=Rn([a]),p=Rn(s),d=Rn(u),h=Dn(l),g=Dn(c),v=Dn(p),m=Dn(d),b=Kt(h,v,4),{transforms:e,beforeFunctionMatrix:h,beforeFunctionMatrix2:g,targetFunctionMatrix:Dn(f),afterFunctionMatrix:v,afterFunctionMatrix2:m,allFunctionMatrix:b,beforeFunctions:l,beforeFunctions2:c,targetFunction:f[0],afterFunctions:p,afterFunctions2:d,beforeFunctionTexts:i,beforeFunctionTexts2:o,targetFunctionText:a,afterFunctionTexts:s,afterFunctionTexts2:u}),R=D.targetFunction,w="rotate"===n?"rotateZ":n;x.beforeFunctionTexts=D.beforeFunctionTexts,x.afterFunctionTexts=D.afterFunctionTexts,x.beforeTransform=D.beforeFunctionMatrix,x.beforeTransform2=D.beforeFunctionMatrix2,x.targetTansform=D.targetFunctionMatrix,x.afterTransform=D.afterFunctionMatrix,x.afterTransform2=D.afterFunctionMatrix2,x.targetAllTransform=D.allFunctionMatrix,R.functionName===w?(x.afterFunctionTexts.splice(0,1),x.isAppendTransform=!1):(x.isAppendTransform=!0,E.nextTransformAppendedIndexes=gs(M,[C]))}function Pu(t,n,e){return t.beforeFunctionTexts.join(" ")+" "+(t.isAppendTransform?e:n)+" "+t.afterFunctionTexts.join(" ")}function Gu(t,n,e){var r=t.beforeTransform,i=t.afterTransform,o=t.beforeTransform2,a=t.afterTransform2,s=t.targetAllTransform,u=e?Kt(s,n,4):Kt(n,s,4),l=Kt(Lt(e?o:r,4),u,4);return Kt(l,Lt(e?a:i,4),4)}function Bu(t){var n=t.datas,e=t.distX,r=t.distY,i=n.inverseBeforeMatrix,o=n.is3d,a=n.startDragBeforeDist,s=o?4:3;return Qt(en(i,Jt(n.absoluteOrigin,[e,r]),s),a)}function zu(t,n){var e=t.datas,r=t.distX,i=t.distY,o=e.inverseBeforeMatrix,a=e.inverseMatrix,s=e.is3d,u=e.startDragBeforeDist,l=e.startDragDist,c=s?4:3;return Qt(en(n?o:a,Jt(e.absoluteOrigin,[r,i]),c),n?u:l)}function Tu(t){var n=[];return 0<=t[1]&&(0<=t[0]&&n.push(3),t[0]<=0&&n.push(2)),t[1]<=0&&(0<=t[0]&&n.push(1),t[0]<=0&&n.push(0)),n}function ku(n,t){return Tu(t).map(function(t){return n[t]})}function Au(t,n){var e=ku(t,n);return[ns(e.map(function(t){return t[0]})),ns(e.map(function(t){return t[1]}))]}function Iu(t,n,e,r){return Kt(t,Ps(n,r,e),r)}function Nu(e){var r=e.originalDatas.beforeRenderable;return{setTransform:function(t,n){void 0===n&&(n=-1),r.startTransforms=_a(t)?t:Ha(t),ju(e,n)},setTransformIndex:function(t){ju(e,t)}}}function Fu(t,n){ju(t,Za(t.originalDatas.beforeRenderable.startTransforms,function(t){return 0===t.indexOf(n+"(")}))}function ju(t,n){var e,r,i=t.originalDatas.beforeRenderable,o=t.datas;-1===(o.transformIndex=n)||(e=i.startTransforms[n])&&(r=Rn([e]),o.startValue=r[0].functionValue)}function _u(t,n){t.originalDatas.beforeRenderable.nextTransforms=Ha(n)}function Yu(t,n,e,r,i){return _u(i,n),{transform:n,drag:Ll.drag(t,Su(i,t.state,e,r,!1))}}function qu(t,n,e,r,i){var o,a,s,u,l,c,f,p,d,h=t.state,g=h.left,v=h.top,m=t.props.groupable,b=m?g:0,x=m?v:0,E=Qt(r,Wu(t,e,(o=t.state,a=i,s=n,u=o.transformOrigin,l=o.offsetMatrix,c=o.is3d,f=a.beforeTransform,p=a.afterTransform,d=c?4:3,Iu(l,$t(Kt(Kt(f,Mn([s]),4),p,4),4,d),u,d))));return Qt(E,[b,x])}function Xu(t){var n=t.state,e=n.width,r=n.height,i=n.transformOrigin;return[i[0]/(e/2)-1,i[1]/(r/2)-1]}function Wu(t,n,e){void 0===e&&(e=t.state.allMatrix);var r=t.state,i=r.width,o=r.height,a=r.is3d?4:3;return _s(e,[i/2*(1+n[0]),o/2*(1+n[1])],a)}function Lu(t,n,e,r,i,o){var a,s,u,l,c,f,p,d,h,g=t.props.groupable,v=t.state,m=v.transformOrigin,b=v.targetMatrix,x=v.offsetMatrix,E=v.is3d,S=v.width,y=v.height,M=v.left,C=v.top,D=E?4:3,R=g?M:0,w=g?C:0,O=Iu(x,b,(s=n,u=e,void 0===(l=S)&&(l=s),void 0===(c=y)&&(c=u),void 0===(f=m)&&(f=[0,0]),(a=o)?a.map(function(t,n){var e=$a(t),r=e.value,i=e.unit,o=n?c:l,a=n?u:s;return"%"===t||isNaN(r)?a*(o?f[n]/o:0):"%"!==i?r:a*r/100}):f),D);return Qt((p=i,d=r,h=Au(Ys(O,n,e,D),d),[p[0]-h[0],p[1]-h[1]]),[R,w])}function Hu(t,n){return Au(eu(t.state),n)}var Vu=["left","right","center"],Uu=["top","bottom","middle"],$u={start:"left",end:"right",center:"center"},Zu={start:"top",end:"bottom",center:"middle"};function Ku(t,n){var e=t.props,r=e.snappable,i=e.bounds,o=e.innerBounds,a=e.verticalGuidelines,s=e.horizontalGuidelines,u=e.snapGridWidth,l=e.snapGridHeight,c=t.state,f=c.guidelines,p=c.enableSnap;return r&&p&&!(n&&!0!==r&&r.indexOf(n)<0)&&!!(u||l||i||o||f&&f.length||a&&a.length||s&&s.length)}function Ju(t){return!1===t?{}:!0!==t&&t?t:{left:!0,right:!0,top:!0,bottom:!0}}function Qu(t,n){var e=function(t,n){var e=Ju(t),r={};for(var i in e)i in n&&e[i]&&(r[i]=n[i]);return r}(t,n),r=Uu.filter(function(t){return t in e}),i=Vu.filter(function(t){return t in e});return{horizontal:r.map(function(t){return e[t]}),vertical:i.map(function(t){return e[t]})}}function tl(t,n,e,r,i,o,a){void 0===i&&(i=0),void 0===o&&(o=0),void 0===a&&(a={left:0,top:0,right:0,bottom:0});var s=[],u=a.left,l=a.top,c=a.bottom,f=e+a.right-u,p=r+c-l;return t&&t.forEach(function(t){s.push({type:"horizontal",pos:[u,os(t-o+l,.1)],size:f})}),n&&n.forEach(function(t){s.push({type:"vertical",pos:[os(t-i+u,.1),l],size:p})}),s}function nl(t,n){if(!n.length)return[];var e,r,i,o=t.state,a=o.containerClientRect,s=o.targetClientRect,u=s.top,l=s.left,p=o.rootMatrix,d=o.is3d?4:3,c=(r=d,i=_s(p,[(e=a).clientLeft,e.clientTop],r),[e.left+i[0],e.top+i[1]]),h=c[0],g=c[1],f=jn(eu(o)),v=Qt([f.minX,f.minY],fu(p,[l-h,u-g],d)).map(function(t){return n=t,Math.round(n%1==-.5?n-1:n);var n}),m=v[0],b=v[1];return n.map(function(t){var n=t.element.getBoundingClientRect(),e=n.left-h,r=n.top-g,i=r+n.height,o=e+n.width,a=fu(p,[e,r],d),s=a[0],u=a[1],l=fu(p,[o,i],d),c=l[0],f=l[1];return hs(hs({},t),{rect:{left:s+m,right:c+m,top:u+b,bottom:f+b,center:(s+c)/2+m,middle:(u+f)/2+b}})})}function el(t){var n,e,r,i,o,a,x,l,E,s=t.state,u=s.snapOffset,c=s.containerClientRect,f=c.overflow,p=c.scrollHeight,d=c.scrollWidth,h=c.clientHeight,g=c.clientWidth,v=c.clientLeft,m=c.clientTop,b=t.props,S=b.snapGap,y=void 0===S||S,M=b.verticalGuidelines,C=b.horizontalGuidelines,D=b.snapThreshold,R=void 0===D?5:D,w=b.snapGridWidth,O=void 0===w?0:w,P=b.snapGridHeight,G=void 0===P?0:P,B=gs(function(t){var n=t.state,e=t.props.elementGuidelines,r=void 0===e?[]:e;if(!r.length)return n.elementRects=[],[];var i=(n.elementRects||[]).filter(function(t){return!t.refresh}),o=r.map(function(t){return ja(t)&&"element"in t?t:{element:mu(t,!0)}}).filter(function(t){return t.element}),a=Bn(i.map(function(t){return t.element}),o.map(function(t){return t.element})),s=a.maintained,u=a.added,l=[];s.forEach(function(t){var n=t[0],e=t[1];l[e]=i[n]}),nl(t,u.map(function(t){return o[t]})).map(function(t,n){l[u[n]]=t}),n.elementRects=l;var C=Ju(t.props.elementSnapDirections),D=[];return l.forEach(function(n){var e=n.element,t=n.top,r=void 0===t?C.top:t,i=n.left,o=void 0===i?C.left:i,a=n.right,s=void 0===a?C.right:a,u=n.bottom,l=void 0===u?C.bottom:u,c=n.center,f=void 0===c?C.center:c,p=n.middle,d=void 0===p?C.middle:p,h=n.className,g=n.rect,v=Qu({top:r,right:s,left:o,bottom:l,center:f,middle:d},g),m=v.horizontal,b=v.vertical,x=g.top,E=g.left,S=g.right-E,y=g.bottom-x,M=[S,y];b.forEach(function(t){D.push({type:"vertical",element:e,pos:[os(t,.1),x],size:y,sizes:M,className:h,elementRect:n})}),m.forEach(function(t){D.push({type:"horizontal",element:e,pos:[E,os(t,.1)],size:S,sizes:M,className:h,elementRect:n})})}),D}(t));return y&&(e=(n=qs(eu(t.state))).top,r=n.left,i=n.bottom,o=n.right,B.push.apply(B,(a={top:e,left:r,bottom:i,right:o,center:(r+o)/2,middle:(e+i)/2},x=R,l=t.state.elementRects,E=[],[["vertical",$u,Zu],["horizontal",Zu,$u]].forEach(function(t){var h=t[0],g=t[1],s=t[2],v=a[g.start],m=a[g.end],b=a[g.center],e=a[s.start],r=a[s.end];function i(t){var n=t.rect;return n[g.end]<v+x?v-n[g.end]:m-x<n[g.start]?n[g.start]-m:-1}var n=l.filter(function(t){var n=t.rect;return!(n[s.start]>r||n[s.end]<e)&&0<i(t)}).sort(function(t,n){return i(t)-i(n)}),u=[];n.forEach(function(a){n.forEach(function(t){var n,e,r,i,o;a!==t&&(n=a.rect,e=t.rect,r=n[s.start],i=n[s.end],o=e[s.start],e[s.end]<r||i<o||u.push([a,t]))})}),u.forEach(function(t){var n=t[0],e=t[1],r=n.rect,i=e.rect,o=r[g.start],a=r[g.end],s=i[g.start],u=i[g.end],l=0,c=0,f=!1,p=!1,d=!1;if(a<=v&&m<=s){if(p=!0,c=a+(l=(s-a-(m-v))/2)+(m-v)/2,Math.abs(c-b)>x)return}else if(a<s&&u<v+x){if(f=!0,c=u+(l=s-a),Math.abs(c-v)>x)return}else{if(!(a<s&&m-x<o))return;if(d=!0,c=o-(l=s-a),Math.abs(c-m)>x)return}l&&E.push({type:h,pos:"vertical"===h?[c,0]:[0,c],element:e.element,size:0,className:e.className,isStart:f,isCenter:p,isEnd:d,gap:l,hide:!0,gapRects:[n,e]})})}),E))),B.push.apply(B,function(t,n,e,r,i,o){void 0===i&&(i=0);void 0===o&&(o=0);var a=[];if(n)for(var s=0;s<=r;s+=n)a.push({type:"horizontal",pos:[0,os(s-o,.1)],size:e,hide:!0});if(t)for(s=0;s<=e;s+=t)a.push({type:"vertical",pos:[os(s-i,.1),0],size:r,hide:!0});return a}(O,G,f?d:g,f?p:h,v,m)),B.push.apply(B,tl(C||!1,M||!1,f?d:g,f?p:h,v,m,u)),B}function rl(t,n,e,r){var i=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var e=t.length-1,r=0;r<e;++r){var i=t[r];if(!Fa(i))return i}return t[e]}(r,t.props.snapThreshold,5);return il(t.state.guidelines,n,e,i)}function il(t,n,e,r){return{vertical:sl(t,"vertical",n,r),horizontal:sl(t,"horizontal",e,r)}}function ol(t,n,e){var r=Qu(t.props.snapDirections,n);return rl(t,r.vertical,r.horizontal,e)}function al(t){var n=t.isSnap;if(!n)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var e=t.posInfos[0],r=e.guidelineInfos[0],i=r.offset,o=r.dist,a=r.guideline;return{isSnap:n,offset:i,dist:o,pos:e.pos,guideline:a}}function sl(e,i,t,o){if(!e||!e.length)return{isSnap:!1,index:-1,posInfos:[]};var a="vertical"===i?0:1,n=t.map(function(r,t){var n=e.map(function(t){var n=t.pos,e=r-n[a];return{offset:e,dist:Math.abs(e),guideline:t}}).filter(function(t){var n=t.guideline,e=t.dist;return!(n.type!==i||o<e)}).sort(function(t,n){return t.dist-n.dist});return{pos:r,index:t,guidelineInfos:n}}).filter(function(t){return 0<t.guidelineInfos.length}).sort(function(t,n){return t.guidelineInfos[0].dist-n.guidelineInfos[0].dist}),r=0<n.length;return{isSnap:r,index:r?n[0].index:-1,posInfos:n}}function ul(t,n){var e=Math.abs(t.offset),r=Math.abs(n.offset);return t.isBound&&n.isBound?r-e:t.isBound?-1:n.isBound?1:t.isSnap&&n.isSnap?r-e:t.isSnap?-1:n.isSnap||e<Cs?1:r<Cs?-1:e-r}function ll(t,a){return t.slice().sort(function(t,n){var e=t.sign[a],r=n.sign[a],i=t.offset[a],o=n.offset[a];return e?r?ul({isBound:t.isBound,isSnap:t.isSnap,offset:i},{isBound:n.isBound,isSnap:n.isSnap,offset:o}):-1:1})[0]}function cl(t,n){var e=ns([n[0][0],n[1][0]]),r=ns([n[0][1],n[1][1]]);return{vertical:e<=t[0],horizontal:r<=t[1]}}function fl(t,n){var e,r,i=n[0],o=n[1],a=o[0]-i[0],s=o[1]-i[1];return Math.abs(a)<Cs&&(a=0),Math.abs(s)<Cs&&(s=0),r=a?(e=s?s/a*(t[0]-i[0])+i[1]:i[1],t[1]):(e=i[0],t[0]),e-r}function pl(t,e,r){void 0===r&&(r=Cs);var i=fl(t[0],e)<=0;return t.slice(1).every(function(t){var n=fl(t,e);return n<=0==i||Math.abs(n)<=r})}function dl(t,n,e,r,i){return void 0===i&&(i=0),r&&n-i<=t||!r&&t<=e+i?{isBound:!0,offset:r?n-t:e-t}:{isBound:!1,offset:0}}function hl(t,n,e,r,i){var o=t[0],a=t[1],s=n[0],u=n[1],l=gu(a[1]-o[1]),c=gu(a[0]-o[0]),f=gu(u[1]-s[1]);if(!gu(u[0]-s[0])){if(i&&!l)return{isBound:!1,offset:0};if(c)return dl(l/c*(s[0]-o[0])+o[1],s[1],u[1],e,r);var p=s[0]-o[0];return{isBound:d=Math.abs(p)<=(r||0),offset:d?p:0}}if(f)return{isBound:!1,offset:0};if(i&&!c)return{isBound:!1,offset:0};if(l)return dl((s[1]-o[1])/(l/c)+o[0],s[0],u[0],e,r);var d,p=s[1]-o[1];return{isBound:d=Math.abs(p)<=(r||0),offset:d?p:0}}function gl(c,t,f,p){return t.map(function(t){var e=t[0],n=t[1],r=t[2],i=function(t,n,e){var r=t.props.innerBounds;if(!r)return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var i=r.left,o=r.top,a=r.width,s=r.height,u=[[i,o],[i,o+s]],l=[[i,o],[i+a,o]],c=[[i+a,o],[i+a,o+s]],f=[[i,o+s],[i+a,o+s]],p=cl(e,n),d=p.horizontal,h=p.vertical;if(pl([e,[i,o],[i+a,o],[i,o+s],[i+a,o+s]],n))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var g=hl(n,l,h),v=hl(n,f,h),m=hl(n,u,d),b=hl(n,c,d),x=g.isBound&&v.isBound,E=g.isBound||v.isBound,S=m.isBound&&b.isBound,y=m.isBound||b.isBound,M=cu(g.offset,v.offset),C=cu(m.offset,b.offset),D=[0,0],R=!1;return{isAllBound:Math.abs(C)<Math.abs(M)?(D=[M,0],R=E,x):(D=[0,C],R=y,S),isVerticalBound:E,isHorizontalBound:y,isBound:R,offset:D}}(c,[n,r],f),o=i.isBound,a=i.offset,s=i.isVerticalBound,u=i.isHorizontalBound,l=zu({datas:p,distX:a[0],distY:a[1]}).map(function(t,n){return t*(e[n]?2/e[n]:0)});return{sign:e,isBound:o,isVerticalBound:s,isHorizontalBound:u,isSnap:!1,offset:l}})}function vl(t,n,e){var r,i,o,a,s,u,l,c,f,p,d,h,g,v=gl(t,ml(n,[0,0],!1).map(function(t){var n=t[0],e=t[1],r=t[2];return[n.map(function(t){return 2*Math.abs(t)}),e,r]}),Au(n,[0,0]),e),m=ll(v,0),b=ll(v,1),x=0,E=0,S=m.isVerticalBound||b.isVerticalBound,y=m.isHorizontalBound||b.isHorizontalBound;return(S||y)&&(i={datas:e,distX:-m.offset[0],distY:-b.offset[1]},a=i.datas,s=i.distX,u=i.distY,l=a.beforeMatrix,c=a.matrix,f=a.is3d,p=a.startDragBeforeDist,d=a.startDragDist,h=a.absoluteOrigin,g=f?4:3,x=(r=Qt(en(o?l:c,Jt(o?p:d,[s,u]),g),h))[0],E=r[1]),{vertical:{isBound:S,offset:x},horizontal:{isBound:y,offset:E}}}function ml(i,t,n){return r=n,o=[],a=(e=t)[0],s=e[1],a&&s?o.push([[0,2*s],e,[-a,s]],[[2*a,0],e,[a,-s]]):a?(o.push([[2*a,0],[a,1],[a,-1]]),r&&o.push([[0,-1],[a,-1],[-a,-1]],[[0,1],[a,1],[-a,1]])):s?(o.push([[0,2*s],[1,s],[-1,s]]),r&&o.push([[-1,0],[-1,s],[-1,-s]],[[1,0],[1,s],[1,-s]])):o.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),o.map(function(t){var n=t[0],e=t[1],r=t[2];return[n,Au(i,e),Au(i,r)]});var e,r,o,a,s}function bl(t,n,e,r){var i=r?t.map(function(t){return un(t,r)}):t,o=gs([e],n);return[[i[0],i[1]],[i[1],i[3]],[i[3],i[2]],[i[2],i[0]]].some(function(t){return!pl(o,t)})}function xl(t,n,e,r,i){var o=t.props.innerBounds,a=i*Math.PI/180;if(!o)return[];var s=o.left,u=o.top,l=o.width,c=o.height,f=s-r[0],p=s+l-r[0],d=u-r[1],h=u+c-r[1],g=[[f,d],[p,d],[f,h],[p,h]],v=Au(e,[0,0]);if(!bl(e,g,v,0))return[];var m=[],b=g.map(function(t){return[Ls(t),es([0,0],t)]});return[[e[0],e[1]],[e[1],e[3]],[e[3],e[2]],[e[2],e[0]]].forEach(function(t){var i=es([0,0],function(t){var n=t[0],e=t[1],r=e[0]-n[0],i=e[1]-n[1];if(!r)return[n[0],0];if(!i)return[0,n[1]];var o=i/r,a=-o*n[0]+n[1];return[-a/(o+1/o),a/(o*o+1)]}(t)),o=function(t){var n=t[0],e=t[1],r=e[0]-n[0],i=e[1]-n[1];if(!r)return Math.abs(n[0]);if(!i)return Math.abs(n[1]);var o=i/r;return Math.abs((-o*n[0]+n[1])/Math.sqrt(Math.pow(o,2)+1))}(t);m.push.apply(m,b.filter(function(t){var n=t[0];return n&&o<=n}).map(function(t){var n=t[0],e=t[1],r=Math.acos(n?o/n:0);return[a+(e+r)-i,a+(e-r)-i]}).reduce(function(t,n){return t.push.apply(t,n),t},[]).filter(function(t){return!bl(n,g,v,t)}).map(function(t){return os(180*t/Math.PI,Cs)}))}),m}function El(t,n,e){var r=t||{},i=r.position,o=r.left,a=r.top,s=r.right,u=r.bottom,l={position:void 0===i?"client":i,left:void 0===o?-1/0:o,top:void 0===a?-1/0:a,right:void 0===s?1/0:s,bottom:void 0===u?1/0:u};return{vertical:yl(l,n,!0),horizontal:yl(l,e,!1)}}function Sl(t,n){var e=t.state,r=e.containerClientRect,i=r.clientHeight,o=r.clientWidth,a=r.clientLeft,s=r.clientTop,u=e.snapOffset,l=u.left,c=u.top,f=u.right,p=u.bottom,d=n||t.props.bounds||{},h="css"===(d.position||"client"),g=d.left,v=d.top,m=d.right,b=void 0===m?h?-1/0:1/0:m,x=d.bottom,E=void 0===x?h?-1/0:1/0:x;return h&&(b=o+f-l-b,E=i+p-c-E),{left:(void 0===g?-1/0:g)+l-a,right:b+l-a,top:(void 0===v?-1/0:v)+c-s,bottom:E+c-s}}function yl(t,n,e){var r=t[e?"left":"top"],i=t[e?"right":"bottom"],o=Math.min.apply(Math,n),a=Math.max.apply(Math,n),s=[];return o<r+1&&s.push({isBound:!0,offset:o-r,pos:r}),i-1<a&&s.push({isBound:!0,offset:a-i,pos:i}),s.length||s.push({isBound:!1,offset:0,pos:0}),s.sort(function(t,n){return Math.abs(n.offset)-Math.abs(t.offset)})}function Ml(t,n,e){return(e?t.map(function(t){return un(t,e)}):t).some(function(t){return t[0]<n.left&&.1<Math.abs(t[0]-n.left)||t[0]>n.right&&.1<Math.abs(t[0]-n.right)||t[1]<n.top&&.1<Math.abs(t[1]-n.top)||t[1]>n.bottom&&.1<Math.abs(t[1]-n.bottom)})}function Cl(t,l,n,e,r){if(!t.props.bounds)return[];var c=r*Math.PI/180,i=Sl(t),o=i.left,a=i.top,s=i.right,u=i.bottom,f=o-e[0],p=s-e[0],d=a-e[1],h=u-e[1],g={left:f,top:d,right:p,bottom:h};if(!Ml(n,g,0))return[];var v=[];return[[f,0],[p,0],[d,1],[h,1]].forEach(function(t){var s=t[0],u=t[1];n.forEach(function(t){var e,n,r,i,o,a=es([0,0],t);v.push.apply(v,(n=s,r=u,i=Ls(e=t),[o=Math.sqrt(i*i-n*n)||0,-o].sort(function(t,n){return Math.abs(t-e[r?0:1])-Math.abs(n-e[r?0:1])}).map(function(t){return es([0,0],r?[t,n]:[n,t])}).map(function(t){return c+t-a}).filter(function(t){return!Ml(l,g,t)}).map(function(t){return os(180*t/Math.PI,Cs)})))})}),v}function Dl(t,n){return e=hs(hs({},t),{classNames:gs([Os("line","guideline",t.direction)],t.classNames).filter(function(t){return t}),size:t.size||t.sizeValue+"px",pos:t.pos||t.posValue.map(function(t){return os(t,.1)+"px"})}),r=n,o=e.direction,a=e.classNames,s=e.size,u=e.pos,l=e.zoom,c=e.key,p=(f="horizontal"===o)?"Y":"X",r.createElement("div",{key:c,className:a.join(" "),style:((i={})[f?"width":"height"]=""+s,i.transform="translate("+u[0]+", "+u[1]+") translate"+p+"(-50%) scale"+p+"("+l+")",i)});var e,r,i,o,a,s,u,l,c,f,p}function Rl(t,o,n,a,s,u,l,c){var f=t.props.zoom;return n.map(function(t,n){var e=t.type,r=t.pos,i=[0,0];return i[l]=a,i[l?0:1]=-s+r,Dl({key:o+"TargetGuideline"+n,classNames:[Os("target","bold",e)],posValue:i,sizeValue:u,zoom:f,direction:o},c)})}function wl(t,a,n,s,e,u){var r=t.props,l=r.zoom,i=r.isDisplayInnerSnapDigit,o="horizontal"===a?$u:Zu,c=e[o.start],f=e[o.end];return n.filter(function(t){var n=t.hide,e=t.elementRect;if(n)return!1;if(i&&e){var r=e.rect;if(r[o.start]<=c&&f<=r[o.end])return!1}return!0}).map(function(t,n){var e=t.pos,r=t.size,i=t.element,o=[-s[0]+e[0],-s[1]+e[1]];return Dl({key:a+"-default-guideline-"+n,classNames:i?[Os("bold")]:[],direction:a,posValue:o,sizeValue:r,zoom:l},u)})}function Ol(t,n,e,r,i,o,a,s){var u,l=t.props,c=l.snapDigit,f=void 0===c?0:c,p=l.isDisplaySnapDigit,d=void 0===p||p,h=l.snapDistFormat,g=void 0===h?function(t){return t}:h,v=l.zoom,m="horizontal"===n?"X":"Y",b="vertical"===n?"height":"width",x=Math.abs(i),E=d?parseFloat(x.toFixed(f)):0;return s.createElement("div",{key:n+"-"+e+"-guideline-"+r,className:Os("guideline-group",n),style:((u={left:o[0]+"px",top:o[1]+"px"})[b]=x+"px",u)},Dl({direction:n,classNames:[Os(e),a],size:"100%",posValue:[0,0],sizeValue:x,zoom:v},s),s.createElement("div",{className:Os("size-value","gap"),style:{transform:"translate"+m+"(-50%) scale("+v+")"}},0<E?g(E):""))}function Pl(M,i,C,D,R){var w=M.props.isDisplayInnerSnapDigit,O=[];return["vertical","horizontal"].forEach(function(s){var p,t,n,d,o,a,u,l,h,g,v,m,b,e=i.filter(function(t){return t.type===s}),c="vertical"===s?1:0,f=c?0:1,r=(t=e,d=w,g="vertical"===(p=s)?1:0,m=(n=D)[(v=(h="vertical"===p?0:1)?$u:Zu).start],b=n[v.end],a=function(t){return t.pos[h]},u=[],l=[],(o=t).forEach(function(t,n){var e=a(t,n,o),r=l.indexOf(e),i=u[r]||[];-1===r&&(l.push(e),u.push(i)),i.push(t)}),u.map(function(t){var c=[],f=[];return t.forEach(function(t){var n,e,r,i,o,a,s,u=t.element,l=t.elementRect.rect;l[v.end]<m?c.push(t):b<l[v.start]?f.push(t):l[v.start]<=m&&b<=l[v.end]&&d&&(r=t.pos,i={element:u,rect:hs(hs({},l),((n={})[v.end]=l[v.start],n))},o={element:u,rect:hs(hs({},l),((e={})[v.start]=l[v.end],e))},s=[0,0],(a=[0,0])[h]=r[h],a[g]=r[g],s[h]=r[h],s[g]=r[g]+t.size,c.push({type:p,pos:a,size:0,elementRect:i}),f.push({type:p,pos:s,size:0,elementRect:o}))}),c.sort(function(t,n){return n.pos[g]-t.pos[g]}),f.sort(function(t,n){return t.pos[g]-n.pos[g]}),{total:t,start:c,end:f,inner:[]}})),x=c?Zu:$u,E=c?$u:Zu,S=D[x.start],y=D[x.end];r.forEach(function(t){var n=t.total,e=t.start,r=t.end,i=t.inner,a=C[f]+n[0].pos[f]-D[E.start],o=D;e.forEach(function(t){var n,e=t.elementRect.rect,r=o[x.start]-e[x.end];0<r&&((n=[0,0])[c]=C[c]+o[x.start]-S-r,n[f]=a,O.push(Ol(M,s,"dashed",O.length,r,n,t.className,R))),o=e}),o=D,r.forEach(function(t){var n,e=t.elementRect.rect,r=e[x.start]-o[x.end];0<r&&((n=[0,0])[c]=C[c]+o[x.end]-S,n[f]=a,O.push(Ol(M,s,"dashed",O.length,r,n,t.className,R))),o=e}),i.forEach(function(t){var n=t.elementRect.rect,e=S-n[x.start],r=n[x.end]-y,i=[0,0],o=[0,0];i[c]=C[c]-e,i[f]=a,o[c]=C[c]+y-S,o[f]=a,O.push(Ol(M,s,"dashed",O.length,e,i,t.className,R)),O.push(Ol(M,s,"dashed",O.length,r,o,t.className,R))})})}),O}function Gl(t,n,e,r,i){var o=function(t,n,e,r){var i=n[0]-t[0],o=n[1]-t[1];if(Math.abs(i)<Ia&&(i=0),Math.abs(o)<Ia&&(o=0),!i)return r?[0,0]:[0,e];if(!o)return r?[e,0]:[0,0];var a=o/i,s=t[1]-a*t[0];return r?[e,a*(n[0]+e)+s-n[1]]:[(n[1]+e-s)/a-n[0],e]}(t,n,e,r);if(!o)return{isOutside:!1,offset:[0,0]};var a=is(t,n),s=is(o,t),u=is(o,n),l=a<s||a<u,c=zu({datas:i,distX:o[0],distY:o[1]});return{offset:[c[0],c[1]],isOutside:l}}function Bl(t,n){return t.isBound?t.offset:n.isSnap?al(n).offset:0}function zl(t,n,e,r,i,o){if(!Ku(t,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var a,s,u,l,c,f,p,d,h,g,v,m,b,x,E,S,y,M,C,D=nu(o.absolutePoses,[n,e]),R=qs(D),w=R.left,O=R.right,P=R.top,G=R.bottom,B={horizontal:D.map(function(t){return t[1]}),vertical:D.map(function(t){return t[0]})},z=Tl(t,i,Qu(Ju(t.props.snapDirections),{left:w,right:O,top:P,bottom:G,center:(w+O)/2,middle:(P+G)/2}),B),T=z.vertical,k=z.horizontal,A=vl(t,D,o),I=A.vertical,N=A.horizontal,F=T.isSnap,j=k.isSnap,_=T.isBound||I.isBound,Y=k.isBound||N.isBound,q=cu(T.offset,I.offset),X=cu(k.offset,N.offset),W=(a=r,u=[_,Y],l=[F,j],c=[q,X],g=(s=[n,e])[0],v=s[1],m=u[0],b=u[1],x=l[0],E=l[1],S=c[0],y=c[1],M=-S,C=-y,a&&g&&v?(C=M=0,f=[],m&&b?f.push([0,y],[S,0]):m?f.push([S,0]):b?f.push([0,y]):x&&E?f.push([0,y],[S,0]):x?f.push([S,0]):E&&f.push([0,y]),f.length&&(f.sort(function(t,n){return Ls(Qt([g,v],t))-Ls(Qt([g,v],n))}),(p=f[0])[0]&&Math.abs(g)>Ia?(M=-p[0],C=v*Math.abs(g+M)/Math.abs(g)-v):p[1]&&Math.abs(v)>Ia&&(d=v,C=-p[1],M=g*Math.abs(v+C)/Math.abs(d)-g),a&&b&&m&&(Math.abs(M)>Ia&&Math.abs(M)<Math.abs(S)?(M*=h=Math.abs(S)/Math.abs(M),C*=h):Math.abs(C)>Ia&&Math.abs(C)<Math.abs(y)?(M*=h=Math.abs(y)/Math.abs(C),C*=h):(M=cu(-S,M),C=cu(-y,C))))):(M=g||m?-S:0,C=v||b?-y:0),[M,C]);return[{isBound:_,isSnap:F,offset:W[0]},{isBound:Y,isSnap:j,offset:W[1]}]}function Tl(t,n,e,r){void 0===r&&(r=e);var i=El(Sl(t),r.vertical,r.horizontal),o=i.horizontal,a=i.vertical,s=n?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:rl(t,e.vertical,e.horizontal),u=s.horizontal,l=s.vertical,c=Bl(o[0],u),f=Bl(a[0],l),p=Math.abs(c),d=Math.abs(f);return{horizontal:{isBound:o[0].isBound,isSnap:u.isSnap,snapIndex:u.index,offset:c,dist:p,bounds:o,snap:u},vertical:{isBound:a[0].isBound,isSnap:l.isSnap,snapIndex:l.index,offset:f,dist:d,bounds:a,snap:l}}}function kl(t,n,e,r,i){var o=El(n,e,r),a=o.horizontal,s=o.vertical,u=il(t,e,r,i),l=u.horizontal,c=u.vertical,f=Bl(a[0],l),p=Bl(s[0],c),d=Math.abs(f),h=Math.abs(p);return{horizontal:{isBound:a[0].isBound,isSnap:l.isSnap,snapIndex:l.index,offset:f,dist:d,bounds:a,snap:l},vertical:{isBound:s[0].isBound,isSnap:c.isSnap,snapIndex:c.index,offset:p,dist:h,bounds:s,snap:c}}}function Al(L,H,t,V,U,$){return t.map(function(t){var n,e,r,i,o,a,s,u,l,c,f,p,d,h,g=t[0],v=t[1],m=Au(H,g),b=Au(H,v),x=V?(i=U,o=function(t,n,e){var r=Sl(t),i=r.left,o=r.top,a=r.right,s=r.bottom,u=e[0],l=e[1],c=Qt(e,n),f=c[0],p=c[1];Math.abs(f)<Cs&&(f=0),Math.abs(p)<Cs&&(p=0);var d,h,g,v,m,b=0<p,x=0<f,E={isBound:!1,offset:0,pos:0},S={isBound:!1,offset:0,pos:0};return 0===f&&0===p||(0===f?b?s<l&&(S.pos=s,S.offset=l-s):l<o&&(S.pos=o,S.offset=l-o):0===p?x?a<u&&(E.pos=a,E.offset=u-a):u<i&&(E.pos=i,E.offset=u-i):(d=p/f,h=e[1]-d*u,v=g=0,m=!1,x&&a<=u?(g=d*a+h,v=a,m=!0):!x&&u<=i&&(g=d*i+h,v=i,m=!0),m&&(g<o||s<g)&&(m=!1),m||(b&&s<=l?(v=((g=s)-h)/d,m=!0):!b&&l<=o&&(v=((g=o)-h)/d,m=!0)),m&&(E.isBound=!0,E.pos=v,E.offset=u-v,S.isBound=!0,S.pos=g,S.offset=l-g))),{vertical:E,horizontal:S}}(n=L,e=m,r=b),a=o.horizontal,s=o.vertical,u=i?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:function(t,n,e){var r=e[0],i=e[1],o=n[0],a=n[1],s=Qt(e,n),u=s[0],l=0<(f=s[1]),c=0<u,u=gu(u),f=gu(f),p={isSnap:!1,offset:0,pos:0},d={isSnap:!1,offset:0,pos:0};if(0===u&&0===f)return{vertical:p,horizontal:d};var h=rl(t,u?[r]:[],f?[i]:[]),g=h.vertical,v=h.horizontal;g.posInfos.filter(function(t){var n=t.pos;return c?o<=n:n<=o}),v.posInfos.filter(function(t){var n=t.pos;return l?a<=n:n<=a}),g.isSnap=0<g.posInfos.length,v.isSnap=0<v.posInfos.length;var m,b,x,E,S,y=al(g),M=y.isSnap,C=y.guideline,D=al(v),R=D.isSnap,w=D.guideline,O=R?w.pos[1]:0,P=M?C.pos[0]:0;return 0===u?R&&(d.isSnap=!0,d.pos=w.pos[1],d.offset=i-d.pos):0===f?M&&(p.isSnap=!0,p.pos=P,p.offset=r-P):(m=f/u,b=e[1]-m*r,E=x=0,S=!1,M?(x=m*(E=P)+b,S=!0):R&&(E=((x=O)-b)/m,S=!0),S&&(p.isSnap=!0,p.pos=E,p.offset=r-E,d.isSnap=!0,d.pos=x,d.offset=i-x)),{vertical:p,horizontal:d}}(n,e,r),l=u.horizontal,c=u.vertical,f=Il(a,l),p=Il(s,c),d=Math.abs(f),h=Math.abs(p),{horizontal:{isBound:a.isBound,isSnap:l.isSnap,offset:f,dist:d},vertical:{isBound:s.isBound,isSnap:c.isSnap,offset:p,dist:h}}):Tl(L,U,{vertical:[b[0]],horizontal:[b[1]]}),E=x.horizontal,S=E.offset,y=E.isBound,M=E.isSnap,C=x.vertical,D=C.offset,R=C.isBound,w=C.isSnap,O=Qt(v,g);if(!D&&!S)return{isBound:R||y,isSnap:w||M,sign:O,offset:[0,0]};var P,G,B,z,T,k,A,I,N,F,j,_,Y,q=(P=x,G=V,B=es(m,b)/Math.PI*180,z=P.vertical,T=z.isBound,k=z.isSnap,A=z.dist,I=P.horizontal,N=I.isBound,F=I.isSnap,_=(j=B%180)<3||177<j,Y=87<j&&j<93,I.dist<A&&(T||k&&!Y&&(!G||!_))?"vertical":!N&&(!F||_||G&&Y)?"":"horizontal");if(!q)return{sign:O,isBound:!1,isSnap:!1,offset:[0,0]};var X="vertical"==q,W=Gl(m,b,-(X?D:S),X,$).offset.map(function(t,n){return t*(O[n]?2/O[n]:0)});return{sign:O,isBound:X?R:y,isSnap:X?w:M,offset:W}})}function Il(t,n){return t.isBound?t.offset:n.isSnap?n.offset:0}function Nl(t){var n,e,r,i,o,a,s,u,l=t.state;l.guidelines&&l.guidelines.length||(n=t.state.container,e=t.props.snapContainer||n,r=l.containerClientRect,i={left:0,top:0,bottom:0,right:0},n===e||(o=mu(e,!0))&&(s=xu(l,[(a=Qs(o)).left-r.left,a.top-r.top]),u=xu(l,[a.right-r.right,a.bottom-r.bottom]),i.left=os(s[0],.1),i.top=os(s[1],.1),i.right=os(u[0],.1),i.bottom=os(u[1],.1)),l.snapOffset=i,l.guidelines=el(t),l.enableSnap=!0)}function Fl(t,n,e,r,i,o){var a=Ys(t,n,e,o?4:3);return nu(a,Qt(r,Au(a,i.map(function(t){return-t}))))}function jl(t,n,e,r,i,o,a,s){for(var u,l,c,f,p,d,h,g,v,m,b,x,E,S,y,M,C,D,R,w,O,P,G,B,z,T,k,A,I,N,F,j,_,Y,q,X,W,L,H,V,U=eu(t.state),$=t.props.keepRatio,Z=0,K=0,J=0;J<2;++J){var Q,tt,nt=n(Z,K),et=(u=t,l=nt,p=a,d=s,y=S=E=x=b=m=v=g=h=void 0,g=f=$,v=[],m=[-(h=c=i)[0],-h[1]],h[0]&&h[1]?(v.push([m,[h[0],-h[1]]],[m,[-h[0],h[1]]]),g&&v.push([m,h])):h[0]?g?v.push([m,[m[0],-1]],[m,[m[0],1]],[m,[h[0],-1]],[m,h],[m,[h[0],1]]):v.push([[m[0],-1],[h[0],-1]],[[m[0],0],[h[0],0]],[[m[0],1],[h[0],1]]):h[1]?g?v.push([m,[-1,m[1]]],[m,[1,m[1]]],[m,[-1,h[1]]],[m,[1,h[1]]],[m,h]):v.push([[-1,m[1]],[-1,h[1]]],[[0,m[1]],[0,h[1]]],[[1,m[1]],[1,h[1]]]):v.push([m,[1,0]],[m,[-1,0]],[m,[0,-1]],[m,[0,1]],[[1,0],[1,-1]],[[1,0],[1,1]],[[0,1],[1,1]],[[0,1],[-1,1]],[[-1,0],[-1,-1]],[[-1,0],[-1,1]],[[0,-1],[1,-1]],[[0,-1],[-1,-1]]),b=v,x=ml(l,c,f),E=gs(Al(u,l,b,f,p,d),gl(u,x,Au(l,[0,0]),d)),S=ll(E,0),y=ll(E,1),{width:{isBound:S.isBound,offset:S.offset[0]},height:{isBound:y.isBound,offset:y.offset[1]}}),rt=et.width,it=et.height,ot=rt.isBound,at=it.isBound,st=rt.offset,ut=it.offset;if(1===J&&(ot||(st=0),at||(ut=0)),0===J&&a&&!ot&&!at)return[0,0];$&&(Q=Math.abs(st)*(e?1/e:1),tt=Math.abs(ut)*(r?1/r:1),(ot&&at?Q<tt:at||!ot&&Q<tt)?st=e*ut/r:ut=r*st/e),Z+=st,K+=ut}return i[0]&&i[1]&&(w=t,O=U,G=o,B=s,Y=[-(P=i)[0],-P[1]],q=w.state,X=q.width,W=q.height,L=w.props.bounds,V=H=1/0,L&&(z=[[P[0],-P[1]],[-P[0],P[1]]],T=L.left,k=void 0===T?-1/0:T,A=L.top,I=void 0===A?-1/0:A,N=L.right,F=void 0===N?1/0:N,j=L.bottom,_=void 0===j?1/0:j,z.forEach(function(t){var n,e,r,i,o,a,s,u=t[0]!==Y[0],l=t[1]!==Y[1],c=Au(O,t),f=360*es(G,c)/Math.PI;l&&(i=c.slice(),(Math.abs(f-360)<2||Math.abs(f-180)<2)&&(i[1]=G[1]),e=(n=Gl(G,i,(G[1]<c[1]?_:I)-c[1],!1,B)).offset[1],r=n.isOutside,isNaN(e)||(V=W+(r?1:-1)*Math.abs(e))),u&&(i=c.slice(),(Math.abs(f-90)<2||Math.abs(f-270)<2)&&(i[0]=G[0]),a=(o=Gl(G,i,(G[0]<c[0]?F:k)-c[0],!0,B)).offset[0],s=o.isOutside,isNaN(a)||(H=X+(s?1:-1)*Math.abs(a)))})),C=(M={maxWidth:H,maxHeight:V}).maxWidth,D=M.maxHeight,Z+=st=(R=function(t,n,e,r,i,o,a,s,u){var l=Au(n,a),c=Tl(t,s,{vertical:[l[0]],horizontal:[l[1]]}),f=c.horizontal.offset,p=c.vertical.offset;if(p||f){var d=zu({datas:u,distX:-p,distY:-f}),h=d[0],g=d[1];return[Math.min(i||1/0,e+a[0]*h)-e,Math.min(o||1/0,r+a[1]*g)-r]}return[0,0]}(t,n(Z,K).map(function(t){return t.map(function(t){return os(t,Ms)})}),e+Z,r+K,C,D,i,a,s))[0],K+=ut=R[1]),[Z,K]}function _l(t,n,e,r){if(!Ku(t,"rotatable"))return r;var i=n.pos1,o=n.pos2,a=n.pos3,s=n.pos4,u=r*Math.PI/180,l=[i,o,a,s].map(function(t){return Qt(t,e)}),c=l.map(function(t){return un(t,u)}),f=gs(Cl(t,l,c,e,r),xl(t,l,c,e,r));return f.sort(function(t,n){return Math.abs(t-r)-Math.abs(n-r)}),f.length?f[0]:r}function Yl(t,s,u,n,l){var c=l.width,f=l.height,p=l.fixedPosition;if(!Ku(t,"scalable"))return[0,0];var d=l.is3d,e=jl(t,function(t,n){return Fl((e=l,r=Jt(s,[t/c,n/f]),i=e.transformOrigin,o=e.offsetMatrix,a=e.is3d?4:3,Iu(o,Kt(e.targetMatrix,dn(r,a),a),i,a)),c,f,p,u,d);var e,r,i,o,a},c,f,u,p,n,l);return[e[0]/c,e[1]/f]}function ql(t){var e=[];return t.forEach(function(t){t.guidelineInfos.forEach(function(t){var n=t.guideline;-1<e.indexOf(n)||e.push(n)})}),e}function Xl(t,n,e,i,o,r){var a=El(Sl(t,r),n,e),s=a.vertical,u=a.horizontal;s.forEach(function(t){t.isBound&&i.push({type:"bounds",pos:t.pos})}),u.forEach(function(t){t.isBound&&o.push({type:"bounds",pos:t.pos})});var l=function(t){var n=t.props.innerBounds;if(!n)return{vertical:[],horizontal:[]};var e=t.getRect(),r=e.pos1,i=e.pos2,o=e.pos3,a=e.pos4,u=Au([r,i,o,a],[0,0]),l=n.left,c=n.top,f=n.width,p=n.height,d=[[l,c],[l,c+p]],h=[[l,c],[l+f,c]],g=[[l+f,c],[l+f,c+p]],v=[[l,c+p],[l+f,c+p]],m=[],b=[],x={top:!1,bottom:!1,left:!1,right:!1};return[[r,i],[i,a],[a,o],[o,r]].forEach(function(t){var n=cl(u,t),e=n.horizontal,r=n.vertical,i=hl(t,h,r,1,!0),o=hl(t,v,r,1,!0),a=hl(t,d,e,1,!0),s=hl(t,g,e,1,!0);i.isBound&&!x.top&&(m.push(c),x.top=!0),o.isBound&&!x.bottom&&(m.push(c+p),x.bottom=!0),a.isBound&&!x.left&&(b.push(l),x.left=!0),s.isBound&&!x.right&&(b.push(l+f),x.right=!0)}),{horizontal:m,vertical:b}}(t),c=l.vertical,f=l.horizontal;c.forEach(function(r){0<=Za(i,function(t){var n=t.type,e=t.pos;return"bounds"===n&&e===r})||i.push({type:"bounds",pos:r})}),f.forEach(function(r){0<=Za(o,function(t){var n=t.type,e=t.pos;return"bounds"===n&&e===r})||o.push({type:"bounds",pos:r})})}var Wl={name:"snappable",props:{snappable:[Boolean,Array],snapContainer:Object,snapDirections:[Boolean,Object],elementSnapDirections:[Boolean,Object],snapGap:Boolean,snapGridWidth:Number,snapGridHeight:Number,isDisplaySnapDigit:Boolean,isDisplayInnerSnapDigit:Boolean,snapDigit:Number,snapThreshold:Number,horizontalGuidelines:Array,verticalGuidelines:Array,elementGuidelines:Array,bounds:Object,innerBounds:Object,snapDistFormat:Function},events:{onSnap:"snap"},css:[":host {\n    --bounds-color: #d66;\n}\n.guideline {\n    pointer-events: none;\n    z-index: 2;\n}\n.guideline.bounds {\n    background: #d66;\n    background: var(--bounds-color);\n}\n.guideline-group {\n    position: absolute;\n    top: 0;\n    left: 0;\n}\n.guideline-group .size-value {\n    position: absolute;\n    color: #f55;\n    font-size: 12px;\n    font-weight: bold;\n}\n.guideline-group.horizontal .size-value {\n    transform-origin: 50% 100%;\n    transform: translateX(-50%);\n    left: 50%;\n    bottom: 5px;\n}\n.guideline-group.vertical .size-value {\n    transform-origin: 0% 50%;\n    top: 50%;\n    transform: translateY(-50%);\n    left: 5px;\n}\n.guideline.gap {\n    background: #f55;\n}\n.size-value.gap {\n    color: #f55;\n}\n"],render:function(t,n){var e=t.state,r=e.top,i=e.left,o=e.pos1,a=e.pos2,s=e.pos3,u=e.pos4,l=e.snapRenderInfo;if(!l||!Ku(t,""))return[];e.guidelines=el(t);var c,f=Math.min(o[0],a[0],s[0],u[0]),p=Math.min(o[1],a[1],s[1],u[1]),d=l.externalPoses||[],h=eu(t.state),g=[],v=[],m=[],b=[],x=[],E=qs(h),S=E.width,y=E.height,M=E.top,C=E.left,D=E.bottom,R=E.right,w={left:C,right:R,top:M,bottom:D,center:(C+R)/2,middle:(M+D)/2},O=0<d.length,P=O?qs(d):{};l.request||(l.direction&&x.push(function(t,n,e){var r=[];if(e[0]&&e[1])r=[e,[-e[0],e[1]],[e[0],-e[1]]].map(function(t){return Au(n,t)});else if(e[0]||e[1])t.props.keepRatio?r=[[-1,-1],[-1,1],[1,-1],[1,1],e].map(function(t){return Au(n,t)}):1<(r=ku(n,e)).length&&r.push([(r[0][0]+r[1][0])/2,(r[0][1]+r[1][1])/2]);else for(var i=[n[0],n[1],n[3],n[2],n[0]],o=0;o<4;++o)r.push(i[o]),r.push([(i[o][0]+i[o+1][0])/2,(i[o][1]+i[o+1][1])/2]);return rl(t,r.map(function(t){return t[0]}),r.map(function(t){return t[1]}),1)}(t,h,l.direction)),l.snap&&(c=qs(h),l.center&&(c.middle=(c.top+c.bottom)/2,c.center=(c.left+c.right)/2),x.push(ol(t,c,1))),O&&(l.center&&(P.middle=(P.top+P.bottom)/2,P.center=(P.left+P.right)/2),x.push(ol(t,P,1))),x.forEach(function(t){var n=t.vertical.posInfos,e=t.horizontal.posInfos;g.push.apply(g,n.filter(function(t){return t.guidelineInfos.some(function(t){return!t.guideline.hide})}).map(function(t){return{type:"snap",pos:t.pos}})),v.push.apply(v,e.filter(function(t){return t.guidelineInfos.some(function(t){return!t.guideline.hide})}).map(function(t){return{type:"snap",pos:t.pos}})),m.push.apply(m,ql(n)),b.push.apply(b,ql(e))})),Xl(t,[C,R],[M,D],g,v),O&&Xl(t,[P.left,P.right],[P.top,P.bottom],g,v,l.externalBounds);var G,B,z,T,k,A,I=gs(m,b),N=I.filter(function(t){return t.element&&!t.gapRects}),F=I.filter(function(t){return t.gapRects});return au(t,"onSnap",{guidelines:I.filter(function(t){return!t.element}),elements:N,gaps:F},!0),gs(Pl(t,N,[f,p],w,n),(G=t,B=F,z=[f,p],T=w,k=n,A=[],["horizontal","vertical"].forEach(function(n){var t=B.filter(function(t){return t.type===n}),s="vertical"===n?0:1,u=s?0:1,l=s?Zu:$u,c=s?$u:Zu,f=T[l.start],p=T[l.end],d=T[c.start],h=T[c.end];t.forEach(function(t){var r=t.gap,n=t.gapRects,i=t.className,e=Math.max.apply(Math,gs([d],n.map(function(t){return t.rect[c.start]}))),o=Math.min.apply(Math,gs([h],n.map(function(t){return t.rect[c.end]}))),a=(e+o)/2;e!==o&&a!=(d+h)/2&&n.forEach(function(t){var n=t.rect,e=[z[0],z[1]];if(n[l.end]<f)e[s]+=n[l.end]-f;else{if(!(p<n[l.start]))return;e[s]+=n[l.start]-f-r}e[u]+=a-d,A.push(Ol(G,s?"vertical":"horizontal","gap",A.length,r,e,i,k))})})}),A),wl(t,"horizontal",b,[i,r],w,n),wl(t,"vertical",m,[i,r],w,n),Rl(t,"horizontal",v,f,r,S,0,n),Rl(t,"vertical",g,p,i,y,1,n))},dragStart:function(t,n){t.state.snapRenderInfo={request:n.isRequest,snap:!0,center:!0},Nl(t)},drag:function(t){t.state.guidelines=el(t)},pinchStart:function(t){this.unset(t)},dragEnd:function(t){this.unset(t)},dragControlCondition:function(t,n){return!(!vu(0,n)&&!tc(t,n))||(!n.isRequest&&n.inputEvent?ss(n.inputEvent.target,Os("snap-control")):void 0)},dragControlStart:function(t){t.state.snapRenderInfo=null,Nl(t)},dragControl:function(t){this.drag(t)},dragControlEnd:function(t){this.unset(t)},dragGroupStart:function(t,n){this.dragStart(t,n)},dragGroup:function(t){this.drag(t)},dragGroupEnd:function(t){this.unset(t)},dragGroupControlStart:function(t){t.state.snapRenderInfo=null,Nl(t)},dragGroupControl:function(t){this.drag(t)},dragGroupControlEnd:function(t){this.unset(t)},unset:function(t){var n=t.state;n.enableSnap=!1,n.guidelines=[],n.snapRenderInfo=null,n.elementRects=[]}},Ll={name:"draggable",props:{draggable:Boolean,throttleDrag:Number,throttleDragRotate:Number,startDragRotate:Number,edgeDraggable:Boolean},events:{onDragStart:"dragStart",onDrag:"drag",onDragEnd:"dragEnd",onDragGroupStart:"dragGroupStart",onDragGroup:"dragGroup",onDragGroupEnd:"dragGroupEnd"},render:function(t,n){var e=t.props,r=e.throttleDragRotate,i=e.zoom,o=t.state,a=o.dragInfo,s=o.beforeOrigin;if(!r||!a)return[];var u=a.dist;if(!u[0]&&!u[1])return[];var l=Ls(u),c=es(u,[0,0]);return[n.createElement("div",{className:Os("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:l+"px",transform:"translate("+s[0]+"px, "+s[1]+"px) rotate("+c+"rad) scaleY("+i+")"}})]},dragStart:function(t,n){var e=n.datas,r=n.parentEvent,i=n.parentGesto,o=t.state,a=o.target;if(o.gesto)return!1;o.gesto=i||t.targetGesto;var s,u=su(a);e.datas={},e.left=parseFloat(u.left||"")||0,e.top=parseFloat(u.top||"")||0,e.bottom=parseFloat(u.bottom||"")||0,e.right=parseFloat(u.right||"")||0,e.startValue=[0,0],wu(t,n),Fu(n,"translate"),s=t,e.absolutePoses=eu(s.state),e.prevDist=[0,0],e.prevBeforeDist=[0,0],e.isDrag=!1,e.deltaOffset=[0,0],e.distOffset=[0,0];var l=iu(t,n,hs({set:function(t){e.startValue=t}},Nu(n)));return!1!==(r||au(t,"onDragStart",l))?(e.isDrag=!0,t.state.dragInfo={startRect:t.getRect(),dist:[0,0]}):(o.gesto=null,e.isPinch=!1),!!e.isDrag&&l},drag:function(t,n){if(n){Ou(n,"translate");var e=n.datas,r=n.parentEvent,i=n.parentFlag,o=n.isPinch,a=n.isRequest,s=n.distX,u=n.distY,l=e.isDrag,c=e.prevDist,f=e.prevBeforeDist,p=e.startValue,d=e.distOffset;if(l){s+=d[0],u+=d[1];var h,g,v,m,b,x,E,S,y,M,C,D,R=t.props,w=R.parentMoveable,O=!r&&R.throttleDrag||0,P=!r&&R.throttleDragRotate||0,G=!1,B=0;!r&&0<P&&(s||u)&&(g=os((h=R.startDragRotate||0)+180*es([0,0],[s,u])/Math.PI,P)-h,v=u*Math.abs(Math.cos((g-90)/180*Math.PI)),m=Ls([s*Math.abs(Math.cos(g/180*Math.PI)),v]),B=g*Math.PI/180,s=m*Math.cos(B),u=m*Math.sin(B)),o||r||i||P&&!s&&!u||(x=(b=zl(t,s,u,P,a,e))[0],E=b[1],S=x.isSnap,y=x.isBound,M=x.offset,C=E.isSnap,D=E.isBound,G=S||C||y||D,s+=M,u+=E.offset);var z,T,k,A=Jt(Bu({datas:e,distX:s,distY:u}),p),I=Jt((T=(z={datas:e,distX:s,distY:u}).datas,k=Bu({datas:T,distX:z.distX,distY:z.distY}),en(Gu(T,Vt([k[0],k[1]],4)),Ut([0,0,0],4),4)),p);P||G||(as(I,O),as(A,O));var N=Qt(A,p),F=Qt(I,p),j=Qt(F,c),_=Qt(N,f);e.prevDist=F,e.prevBeforeDist=N,e.passDelta=j,e.passDist=F;var Y=e.left+N[0],q=e.top+N[1],X=e.right-N[0],W=e.bottom-N[1],L=Pu(e,"translate("+I[0]+"px, "+I[1]+"px)","translate("+F[0]+"px, "+F[1]+"px)");if(t.state.dragInfo.dist=r?[0,0]:F,r||w||!j.every(function(t){return!t})||!_.some(function(t){return!t})){var H=t.state,V=iu(t,n,{transform:L,dist:F,delta:j,translate:I,beforeDist:N,beforeDelta:_,beforeTranslate:A,left:Y,top:q,right:X,bottom:W,width:H.width,height:H.height,isPinch:o});return r||au(t,"onDrag",V),V}}}},dragAfter:function(t,n){var e=n.datas,r=n.datas,i=r.deltaOffset,o=r.distOffset;return!(!i[0]&&!i[1])&&(e.deltaOffset=[0,0],o[0]+=i[0],o[1]+=i[1],this.drag(t,n))},dragEnd:function(t,n){var e=n.parentEvent,r=n.datas,i=n.isDrag;if(t.state.gesto=null,t.state.dragInfo=null,r.isDrag)return r.isDrag=!1,e||au(t,"onDragEnd",ou(t,n,{})),i},dragGroupStart:function(t,n){var e=n.datas,r=n.clientX,i=n.clientY,o=this.dragStart(t,n);if(!o)return!1;var a=Cu(t,this,"dragStart",[r||0,i||0],n,!1),s=au(t,"onDragGroupStart",hs(hs({},o),{targets:t.props.targets,events:a}));return e.isDrag=!1!==s,!!e.isDrag&&o},dragGroup:function(t,n){if(n.datas.isDrag){var e=this.drag(t,n),r=Cu(t,this,"drag",n.datas.passDelta,n,!1);if(e){var i=hs({targets:t.props.targets,events:r},e);return au(t,"onDragGroup",i),i}}},dragGroupEnd:function(t,n){var e=n.isDrag;if(n.datas.isDrag)return this.dragEnd(t,n),Cu(t,this,"dragEnd",[0,0],n,!1),au(t,"onDragGroupEnd",ou(t,n,{targets:t.props.targets})),e},request:function(t){var n={},e=t.getRect(),r=0,i=0;return{isControl:!1,requestStart:function(){return{datas:n}},request:function(t){return"x"in t?r=t.x-e.left:"deltaX"in t&&(r+=t.deltaX),"y"in t?i=t.y-e.top:"deltaY"in t&&(i+=t.deltaY),{datas:n,distX:r,distY:i}},requestEnd:function(){return{datas:n,isDrag:!0}}}},unset:function(t){t.state.dragInfo=null}};function Hl(t,n,r,i){void 0===i&&(i="");var e=t.state,o=e.renderPoses,a=e.rotation,s=e.direction,u=t.props,l=u.renderDirections,c=void 0===l?n:l,f=u.zoom,p={};if(!c)return[];var d=0<s?1:-1,h=!0===c?Ds:c,g=a/Math.PI*180;return h.forEach(function(t){p[t]=!0}),h.map(function(t){var n=Rs[t];if(!n||!p[t])return null;var e=(os(g,15)+d*ws[t]+720)%180;return r.createElement("div",{className:Os("control","direction",t,i),"data-rotation":e,"data-direction":t,key:"direction-"+t,style:Us.apply(void 0,gs([a,f],n.map(function(t){return o[t]})))})})}function Vl(t,n,e,r,i,o){for(var a=[],s=6;s<arguments.length;s++)a[s-6]=arguments[s];var u=es(e,r),l=n?os(u/Math.PI*180,15)%180:-1;return t.createElement("div",{key:"line"+o,className:Os.apply(void 0,gs(["line","direction",n],a)),"data-rotation":l,"data-line-index":o,"data-direction":n,style:Vs(e,r,i,u)})}function Ul(t,n){return Hl(t,Ds,n)}function $l(t,n){return Hl(t,["nw","ne","sw","se"],n)}function Zl(t,n,e,r,i,o){var a=t.state.is3d?4:3,s=_s(t.state.rootMatrix,i,a),u=Jt([o.left,o.top],s);n.startAbsoluteOrigin=u,n.prevDeg=es(u,[e,r])/Math.PI*180,n.prevSnapDeg=n.prevDeg,n.startDeg=n.prevDeg,n.loop=0}function Kl(t,n,e,r,i,o){var a=e.prevDeg,s=_l(t,n,e.origin,r);return[(e.prevDeg=s)-a,s,o+s]}function Jl(t,n,e,r,i,o,a,s){var u=e.prevDeg,l=e.prevSnapDeg,c=e.startDeg,f=e.loop;r<u&&270<u&&r<90?++e.loop:u<r&&u<90&&270<r&&--e.loop;var p=e.loop,d=360*f+l-c+o,h=360*p+r-c+o;e.prevDeg=h-360*p+c-o;var g=i*((h=os(h,a))-o);return s&&(h=(g=_l(t,n,e.origin,g))/i+o),e.prevSnapDeg=h-360*p+c-o,[i*(h-d),g,o+g]}function Ql(t,n,e,r,i,o,a,s){return Jl(t,n,e,es(e.startAbsoluteOrigin,[i,o])/Math.PI*180,r,a,s,!0)}function tc(t,n){if(n.isRequest)return"rotatable"===n.requestAble;var e=n.inputEvent.target;if(ss(e,Os("rotation-control")))return!0;var r=t.props.rotationTarget;return!!r&&bu(r,!0).some(function(t){return!!t&&(e===t||e.contains(t))})}var nc={name:"rotatable",canPinch:!0,props:{rotatable:Boolean,rotationPosition:String,throttleRotate:Number,renderDirections:Object,rotationTarget:Object},events:{onRotateStart:"rotateStart",onRotate:"rotate",onRotateEnd:"rotateEnd",onRotateGroupStart:"rotateGroupStart",onRotateGroup:"rotateGroup",onRotateGroupEnd:"rotateGroupEnd"},css:[".rotation {\n            position: absolute;\n            height: 40px;\n            width: 1px;\n            transform-origin: 50% 100%;\n            height: calc(40px * var(--zoom));\n            top: auto;\n            left: 0;\n            bottom: 100%;\n            will-change: transform;\n        }\n        .rotation .rotation-line {\n            display: block;\n            width: 100%;\n            height: 100%;\n            transform-origin: 50% 50%;\n        }\n        .rotation .rotation-control {\n            border-color: #4af;\n            border-color: var(--moveable-color);\n            background:#fff;\n            cursor: alias;\n        }"],render:function(t,n){var e=t.props,r=e.rotatable,i=e.rotationPosition,o=e.zoom,a=e.renderDirections,s=t.state,u=s.renderPoses,l=s.direction;if(!r)return null;var c,f,p=function(t,n,e){var r=n[0],i=n[1],o=n[2],a=n[3];if("none"!==t){var s=(t||"top").split("-"),u=s[0],l=s[1],c=[r,i];"left"===u?c=[o,r]:"right"===u?c=[i,a]:"bottom"===u&&(c=[a,o]);var f,p,d=[(c[0][0]+c[1][0])/2,(c[0][1]+c[1][1])/2],h=Zs(c,e);return l&&(p="bottom"===u||"left"===u,d=c[(f="top"===l||"left"===l)&&!p||!f&&p?0:1]),[d,h]}}(i,u,l),d=[];return p&&(c=p[0],f=p[1],d.push(n.createElement("div",{key:"rotation",className:Os("rotation"),style:{transform:"translate(-50%) translate("+c[0]+"px, "+c[1]+"px) rotate("+f+"rad)"}},n.createElement("div",{className:Os("line rotation-line"),style:{transform:"scaleX("+o+")"}}),n.createElement("div",{className:Os("control rotation-control"),style:{transform:"translate(0.5px) scale("+o+")"}})))),a&&d.push.apply(d,Hl(t,[],n)),d},dragControlCondition:tc,dragControlStart:function(t,n){var e=n.datas,r=n.clientX,i=n.clientY,o=n.parentRotate,a=n.parentFlag,s=n.isPinch,u=n.isRequest,l=t.state,c=l.target,f=l.left,p=l.top,d=l.origin,h=l.beforeOrigin,g=l.direction,v=l.beforeDirection,m=l.targetTransform,b=l.moveableClientRect;if(!u&&!c)return!1;var x,E=t.getRect();e.rect=E,e.transform=m,e.left=f,e.top=p,e.fixedPosition=Wu(t,Xu(t)),e.absoluteInfo={origin:E.origin,startValue:E.rotation},Zl(t,e.absoluteInfo,r,i,d,b),u||s||a?(x=o||0,e.beforeInfo={origin:E.beforeOrigin,prevDeg:x,startDeg:x,prevSnapDeg:x,loop:0},e.afterInfo={origin:E.origin,prevDeg:x,startDeg:x,prevSnapDeg:x,loop:0}):(e.beforeInfo={origin:E.beforeOrigin},e.afterInfo={origin:E.origin},Zl(t,e.beforeInfo,r,i,h,b),Zl(t,e.afterInfo,r,i,d,b)),e.direction=g,e.beforeDirection=v,e.startValue=0,e.datas={},Fu(n,"rotate");var S=iu(t,n,hs(hs({set:function(t){e.startValue=t*Math.PI/180}},Nu(n)),{dragStart:Ll.dragStart(t,(new yu).dragStart([0,0],n))})),y=au(t,"onRotateStart",S);return e.isRotate=!1!==y,t.state.snapRenderInfo={request:n.isRequest},!!e.isRotate&&S},dragControl:function(t,n){var e,r,i,o,a,s,u=n.datas,l=n.clientX,c=n.clientY,f=n.parentRotate,p=n.parentFlag,d=n.isPinch,h=n.groupDelta,g=u.beforeDirection,v=u.beforeInfo,m=u.afterInfo,b=u.absoluteInfo,x=u.isRotate,E=u.startValue,S=u.rect;if(x){Ou(n,"rotate");var y,M,C,D,R,w,O,P,G,B,z,T,k,A=g*Ws(n.datas.beforeTransform,[50,50],100,100).direction,I=t.props,N=I.throttleRotate,F=void 0===N?0:N,j=I.parentMoveable,_=180/Math.PI*E,Y=b.startValue;if(k=!p&&"parentDist"in n?(C=(M=Kl(t,S,m,y=n.parentDist,0,_))[0],D=M[1],R=M[2],O=(w=Kl(t,S,v,y,0,_))[0],P=w[1],G=w[2],z=(B=Kl(t,S,b,y,0,Y))[0],T=B[1],B[2]):d||p?(C=(e=Jl(t,S,m,f,A,_,F))[0],D=e[1],R=e[2],O=(r=Jl(t,S,v,f,g,_,F))[0],P=r[1],G=r[2],z=(i=Jl(t,S,b,f,A,Y,F))[0],T=i[1],i[2]):(C=(o=Ql(t,S,m,A,l,c,_,F))[0],D=o[1],R=o[2],O=(a=Ql(t,S,v,g,l,c,_,F))[0],P=a[1],G=a[2],z=(s=Ql(t,S,b,A,l,c,Y,F))[0],T=s[1],s[2]),z||C||O||j){var q,X,W,L,H=Pu(u,"rotate("+R+"deg)","rotate("+D+"deg)"),V=(q=t,X=D,W=u.fixedPosition,L=u,qu(q,"rotate("+X+"deg)",Xu(q),W,L)),U=Qt(Jt(h||[0,0],V),u.prevInverseDist||[0,0]);u.prevInverseDist=V;var $=iu(t,n,hs({delta:C,dist:D,rotate:R,beforeDist:P,beforeDelta:O,beforeRotate:G,absoluteDist:T,absoluteDelta:z,absoluteRotate:k,isPinch:!!d},Yu(t,H,U,d,n)));return au(t,"onRotate",$),$}}},dragControlEnd:function(t,n){var e=n.datas,r=n.isDrag;return!!e.isRotate&&(e.isRotate=!1,au(t,"onRotateEnd",ou(t,n,{})),r)},dragGroupControlCondition:tc,dragGroupControlStart:function(t,n){var e=n.datas,r=t.state,s=r.left,u=r.top,l=r.beforeOrigin,i=this.dragControlStart(t,n);if(!i)return!1;i.set(e.beforeDirection*t.rotation);var o=Du(t,this,"dragControlStart",n,function(t,n){var e=t.state,r=e.left,i=e.top,o=e.beforeOrigin,a=Jt(Qt([r,i],[s,u]),Qt(o,l));return n.datas.groupClient=a,hs(hs({},n),{parentRotate:0})}),a=au(t,"onRotateGroupStart",hs(hs({},i),{targets:t.props.targets,events:o}));return e.isRotate=!1!==a,!!e.isRotate&&i},dragGroupControl:function(n,t){var e=t.datas;if(e.isRotate){var r=this.dragControl(n,t);if(r){var l=e.beforeDirection,c=r.beforeDist,f=r.beforeDelta/180*Math.PI,i=Du(n,this,"dragControl",t,function(t,n){var e=n.datas.groupClient,r=e[0],i=e[1],o=un([r,i],f*l),a=o[0],s=o[1],u=[a-r,s-i];return n.datas.groupClient=[a,s],hs(hs({},n),{parentRotate:c,groupDelta:u})});n.rotation=l*r.beforeRotate;var o=hs({targets:n.props.targets,events:i,set:function(t){n.rotation=t}},r);return au(n,"onRotateGroup",o),o}}},dragGroupControlEnd:function(t,n){var e=n.isDrag;if(n.datas.isRotate)return this.dragControlEnd(t,n),Du(t,this,"dragControlEnd",n),au(t,"onRotateGroupEnd",ou(t,n,{targets:t.props.targets})),e},request:function(t){var n={},e=0,r=t.getRotation();return{isControl:!0,requestStart:function(){return{datas:n}},request:function(t){return"deltaRotate"in t?e+=t.deltaRotate:"rotate"in t&&(e=t.rotate-r),{datas:n,parentDist:e}},requestEnd:function(){return{datas:n,isDrag:!0}}}}},ec={name:"resizable",ableGroup:"size",canPinch:!0,props:{resizable:Boolean,throttleResize:Number,renderDirections:Array,keepRatio:Boolean},events:{onResizeStart:"resizeStart",onResize:"resize",onResizeEnd:"resizeEnd",onResizeGroupStart:"resizeGroupStart",onResizeGroup:"resizeGroup",onResizeGroupEnd:"resizeGroupEnd"},render:function(t,n){var e=t.props,r=e.resizable,i=e.edge;if(r)return(i?$l:Ul)(t,n)},dragControlCondition:vu,dragControlStart:function(n,t){var e,r,i=t.inputEvent,o=t.isPinch,a=t.parentDirection,s=t.datas,u=t.parentFlag,l=a||(o?[0,0]:tu(i.target)),c=n.state,f=c.target,p=c.width,d=c.height;if(!l||!f)return!1;o||wu(n,t),s.datas={},s.direction=l,s.startOffsetWidth=p,s.startOffsetHeight=d,s.prevWidth=0,s.prevHeight=0,r=su(f),e=[parseFloat(r.width),parseFloat(r.height)],s.startWidth=e[0],s.startHeight=e[1];var h,g,v,m,b,x,E,S,y,M,C,D=[Math.max(0,p-s.startWidth),Math.max(0,d-s.startHeight)];s.minSize=D,s.maxSize=[1/0,1/0],u||(g=(h=su(f)).position,v=h.minWidth,m=h.minHeight,b=h.maxWidth,x=h.maxHeight,M=p,C=d,(S=(E="static"===g||"relative"===g)?f.parentElement:f.offsetParent)&&(M=S.clientWidth,C=S.clientHeight,E&&(y=su(S),M-=parseFloat(y.paddingLeft)||0,C-=parseFloat(y.paddingTop)||0)),s.minSize=Jt([Ja(v,M)||0,Ja(m,C)||0],D),s.maxSize=Jt([Ja(b,M)||1/0,Ja(x,C)||1/0],D));var R=n.props.transformOrigin||"% %";function w(t){s.ratio=t&&isFinite(t)?t:0}function O(t){s.fixedDirection=t,s.fixedPosition=Hu(n,t)}s.transformOrigin=R&&Ya(R)?R.split(" "):R,s.isWidth=!l[0]&&!l[1]||l[0]||!l[1],w(p/d),O([-l[0],-l[1]]);var P=iu(n,t,{direction:l,set:function(t){var n=t[0],e=t[1];s.startWidth=n,s.startHeight=e},setMin:function(t){s.minSize=t},setMax:function(t){s.maxSize=[t[0]||1/0,t[1]||1/0]},setRatio:w,setFixedDirection:O,setOrigin:function(t){s.transformOrigin=t},dragStart:Ll.dragStart(n,(new yu).dragStart([0,0],t))});return!1!==au(n,"onResizeStart",P)&&(s.isResize=!0,n.state.snapRenderInfo={request:t.isRequest,direction:l}),!!s.isResize&&P},dragControl:function(t,n){var e,r=n.datas,i=n.distX,o=n.distY,a=n.parentFlag,s=n.isPinch,u=n.parentDistance,l=n.parentScale,c=n.parentKeepRatio,f=n.dragClient,p=n.parentDist,d=n.isRequest,h=r.isResize,g=r.transformOrigin,v=r.fixedDirection,m=r.startWidth,b=r.startHeight,x=r.prevWidth,E=r.prevHeight,S=r.minSize,y=r.maxSize,M=r.ratio,C=r.isWidth,D=r.startOffsetWidth,R=r.startOffsetHeight;if(h){var w=t.props,O=w.throttleResize,P=void 0===O?0:O,G=w.parentMoveable,B=w.snapThreshold,z=void 0===B?5:B,T=r.direction,k=T,A=0,I=0;T[0]||T[1]||(k=[1,1]);var N,F,j,_,Y,q,X,W,L,H,V=M&&(t.props.keepRatio||c),U=f;f||(U=!a&&s?Hu(t,[0,0]):r.fixedPosition),p?(A=p[0],I=p[1],V&&(A?I=I||A/M:A=I*M)):l?(A=(l[0]-1)*D,I=(l[1]-1)*R):s?u&&(I=(A=u)*R/D):(N=zu({datas:r,distX:i,distY:o}),A=k[0]*N[0],I=k[1]*N[1],V&&D&&R?(F=es([0,0],N),j=es([0,0],k),_=Ls([A,I]),Y=Math.cos(F-j)*_,k[0]?I=k[1]?(q=2*k[0]*D,X=2*k[1]*R,W=Ls([q+N[0],X+N[1]])-Ls([q,X]),L=es([0,0],[M,1]),A=Math.cos(L)*W,Math.sin(L)*W):(A=Y)*M:A=(I=Y)/M):V||(H=gs(T),D||(N[0]<0?H[0]=-1:0<N[0]&&(H[0]=1)),R||(N[1]<0?H[1]=-1:0<N[1]&&(H[1]=1)),A=(k=T=H)[0]*N[0],I=k[1]*N[1]));var $=k[0]||V?Math.max(D+A,Cs):D,Z=k[1]||V?Math.max(R+I,Cs):R;V&&D&&R&&(C?Z=$/M:$=Z*M);var K,J=[0,0];s||(J=function(t,e,r,i,o,n,a){if(!Ku(t,"resizable"))return[0,0];var s=t.state,u=s.allMatrix,l=s.is3d;return jl(t,function(t,n){return Fl(u,e+t,r+n,o,i,l)},e,r,i,o,n,a)}(t,$,Z,T,U,d,r)),p&&(p[0]||(J[0]=0),p[1]||(J[1]=0)),V?(k[0]&&k[1]&&J[0]&&J[1]&&(Math.abs(J[0])>Math.abs(J[1])?J[1]=0:J[0]=0),(K=!J[0]&&!J[1])&&(C?$=os($,P):Z=os(Z,P)),k[0]&&!k[1]||J[0]&&!J[1]||K&&C?Z=($+=J[0])/M:(!k[0]&&k[1]||!J[0]&&J[1]||K&&!C)&&($=(Z+=J[1])*M)):(D+A<-z&&(J[0]=0),D+I<-z&&(J[1]=0),$+=J[0],Z+=J[1],J[0]||($=os($,P)),J[1]||(Z=os(Z,P))),$=(e=ts([$,Z],S,y,V))[0],Z=e[1];var Q=[(A=($=Math.round($))-D)-x,(I=(Z=Math.round(Z))-R)-E];r.prevWidth=A,r.prevHeight=I;var tt=Lu(t,$,Z,v,U,g);if(G||!Q.every(function(t){return!t})||!tt.every(function(t){return!t})){var nt=iu(t,n,{width:m+A,height:b+I,offsetWidth:$,offsetHeight:Z,direction:T,dist:[A,I],delta:Q,isPinch:!!s,drag:Ll.drag(t,Su(n,t.state,tt,!!s,!1))});return au(t,"onResize",nt),nt}}},dragControlAfter:function(t,n){var e=n.datas,r=e.isResize,i=e.startOffsetWidth,o=e.startOffsetHeight,a=e.prevWidth,s=e.prevHeight;if(r){var u=t.state,l=u.width-(i+a),c=u.height-(o+s),f=3<Math.abs(l),p=3<Math.abs(c);return f&&(e.startWidth+=l,e.startOffsetWidth+=l,e.prevWidth+=l),p&&(e.startHeight+=c,e.startOffsetHeight+=c,e.prevHeight+=c),f||p?(this.dragControl(t,n),!0):void 0}},dragControlEnd:function(t,n){var e=n.datas,r=n.isDrag;return!!e.isResize&&(e.isResize=!1,au(t,"onResizeEnd",ou(t,n,{})),r)},dragGroupControlCondition:vu,dragGroupControlStart:function(u,t){var l=t.datas,n=this.dragControlStart(u,t);if(!n)return!1;var r=Mu(u,"resizable",t);function i(t,n){var e=l.fixedDirection,r=l.fixedPosition,i=Hu(t,e),o=en(fn(-u.rotation/180*Math.PI,3),[i[0]-r[0],i[1]-r[1],1],3),a=o[0],s=o[1];return n.datas.originalX=a,n.datas.originalY=s,n}var o=Du(u,this,"dragControlStart",t,i),e=hs(hs({},n),{targets:u.props.targets,events:o,setFixedDirection:function(e){n.setFixedDirection(e),o.forEach(function(t,n){t.setFixedDirection(e),i(u.moveables[n],r[n])})}}),a=au(u,"onResizeGroupStart",e);return l.isResize=!1!==a,!!l.isResize&&n},dragGroupControl:function(o,t){var n=t.datas;if(n.isResize){var e=this.dragControl(o,t);if(e){var r=e.offsetWidth,i=e.offsetHeight,a=e.dist,s=o.props.keepRatio,u=[r/(r-a[0]),i/(i-a[1])],l=n.fixedPosition,c=Du(o,this,"dragControl",t,function(t,n){var e=en(fn(o.rotation/180*Math.PI,3),[n.datas.originalX*u[0],n.datas.originalY*u[1],1],3),r=e[0],i=e[1];return hs(hs({},n),{parentDist:null,parentScale:u,dragClient:Jt(l,[r,i]),parentKeepRatio:s})}),f=hs({targets:o.props.targets,events:c},e);return au(o,"onResizeGroup",f),f}}},dragGroupControlEnd:function(t,n){var e=n.isDrag;if(n.datas.isResize)return this.dragControlEnd(t,n),Du(t,this,"dragControlEnd",n),au(t,"onResizeGroupEnd",ou(t,n,{targets:t.props.targets})),e},request:function(t){var n={},e=0,r=0,i=t.getRect();return{isControl:!0,requestStart:function(t){return{datas:n,parentDirection:t.direction||[1,1]}},request:function(t){return"offsetWidth"in t?e=t.offsetWidth-i.offsetWidth:"deltaWidth"in t&&(e+=t.deltaWidth),"offsetHeight"in t?r=t.offsetHeight-i.offsetHeight:"deltaHeight"in t&&(r+=t.deltaHeight),{datas:n,parentDist:[e,r]}},requestEnd:function(){return{datas:n,isDrag:!0}}}}},rc={name:"scalable",ableGroup:"size",canPinch:!0,props:{scalable:Boolean,throttleScale:Number,renderDirections:String,keepRatio:Boolean},events:{onScaleStart:"scaleStart",onScale:"scale",onScaleEnd:"scaleEnd",onScaleGroupStart:"scaleGroupStart",onScaleGroup:"scaleGroup",onScaleGroupEnd:"scaleGroupEnd"},render:function(t,n){var e=t.props,r=e.resizable,i=e.scalable,o=e.edge;if(!r&&i)return(o?$l:Ul)(t,n)},dragControlCondition:vu,dragControlStart:function(n,t){var e=t.datas,r=t.isPinch,i=t.inputEvent,o=t.parentDirection||(r?[0,0]:tu(i.target)),a=n.state,s=a.width,u=a.height,l=a.targetTransform,c=a.target,f=a.pos1,p=a.pos2,d=a.pos4;if(!o||!c)return!1;r||wu(n,t),e.datas={},e.transform=l,e.prevDist=[1,1],e.direction=o,e.width=s,e.height=u,e.startValue=[1,1];var h=is(f,p),g=is(p,d),v=!o[0]&&!o[1]||o[0]||!o[1];function m(t){e.ratio=t&&isFinite(t)?t:0}function b(t){e.fixedDirection=t,e.fixedPosition=Hu(n,t)}e.scaleWidth=h,e.scaleHeight=g,e.scaleXRatio=h/s,e.scaleYRatio=g/u,Fu(t,"scale"),e.isWidth=v,m(is(f,p)/is(p,d)),b([-o[0],-o[1]]);var x=iu(n,t,hs(hs({direction:o,set:function(t){e.startValue=t},setRatio:m,setFixedDirection:b},Nu(t)),{dragStart:Ll.dragStart(n,(new yu).dragStart([0,0],t))}));return!1!==au(n,"onScaleStart",x)&&(e.isScale=!0,n.state.snapRenderInfo={request:t.isRequest,direction:o}),!!e.isScale&&x},dragControl:function(t,n){Ou(n,"scale");var e=n.datas,r=n.distX,i=n.distY,o=n.parentScale,a=n.parentDistance,s=n.parentKeepRatio,u=n.parentFlag,l=n.isPinch,c=n.dragClient,f=n.parentDist,p=n.isRequest,d=e.prevDist,h=e.direction,g=e.width,v=e.height,m=e.isScale,b=e.startValue,x=e.isWidth,E=e.ratio,S=e.fixedDirection,y=e.scaleXRatio,M=e.scaleYRatio;if(!m)return!1;var C=t.props,D=C.throttleScale,R=C.parentMoveable,w=h;h[0]||h[1]||(w=[1,1]);var O,P,G,B,z,T,k,A,I=E&&(t.props.keepRatio||s),N=t.state,F=1,j=1,_=c;c||(_=!u&&l?Hu(t,[0,0]):e.fixedPosition),f?(F=(g+f[0])/g,j=(v+f[1])/v):o?(F=o[0],j=o[1]):l?a&&(F=(g+a)/g,j=(v+a*v/g)/v):(O=zu({datas:e,distX:r,distY:i}),k=w[0]*O[0]*y,A=w[1]*O[1]*M,I&&g&&v&&(w[0]?A=w[1]?(P=Ls([k,A]),G=es([0,0],O),B=es([0,0],w),z=Math.cos(G-B)*P,T=es([0,0],[E,1]),k=Math.cos(T)*z,Math.sin(T)*z):k/E:k=A*E),F=(g+k/y)/g,j=(v+A/M)/v),F=w[0]||I?F*b[0]:b[0],j=w[1]||I?j*b[1]:b[1],0===F&&(F=1e-9*(0<d[0]?1:-1)),0===j&&(j=1e-9*(0<d[1]?1:-1));var Y,q=[F/b[0],j/b[1]],X=[F,j];l||!t.props.groupable||_a(Y=(N.snapRenderInfo||{}).direction)&&(Y[0]||Y[1])&&(N.snapRenderInfo={direction:h,request:n.isRequest});var W,L,H,V=[0,0];l||(V=Yl(t,q,h,p,e)),I?(w[0]&&w[1]&&V[0]&&V[1]&&(Math.abs(V[0]*g)>Math.abs(V[1]*v)?V[1]=0:V[0]=0),(W=!V[0]&&!V[1])&&(x?q[0]=os(q[0]*b[0],D)/b[0]:q[1]=os(q[1]*b[1],D)/b[1]),w[0]&&!w[1]||V[0]&&!V[1]||W&&x?(q[0]+=V[0],L=g*q[0]*b[0]/E,q[1]=L/v/b[1]):(!w[0]&&w[1]||!V[0]&&V[1]||W&&!x)&&(q[1]+=V[1],H=v*q[1]*b[1]*E,q[0]=H/g/b[0])):(q[0]+=V[0],q[1]+=V[1],V[0]||(q[0]=os(q[0]*b[0],D)/b[0]),V[1]||(q[1]=os(q[1]*b[1],D)/b[1])),0===q[0]&&(q[0]=1e-9*(0<d[0]?1:-1)),0===q[1]&&(q[1]=1e-9*(0<d[1]?1:-1));var U,$,Z=[q[0]/d[0],q[1]/d[1]];$=b,X=[(U=q)[0]*$[0],U[1]*$[1]];var K,J,Q,tt=(K=S,J=_,Q=e,qu(t,"scale("+q.join(", ")+")",K,J,Q)),nt=Qt(tt,e.prevInverseDist||[0,0]);if(e.prevDist=q,e.prevInverseDist=tt,F===d[0]&&j===d[1]&&nt.every(function(t){return!t})&&!R)return!1;var et=Pu(e,"scale("+X.join(", ")+")","scale("+q.join(", ")+")"),rt=iu(t,n,hs({offsetWidth:g,offsetHeight:v,direction:h,scale:X,dist:q,delta:Z,isPinch:!!l},Yu(t,et,nt,l,n)));return au(t,"onScale",rt),rt},dragControlEnd:function(t,n){var e=n.datas,r=n.isDrag;return!!e.isScale&&(e.isScale=!1,au(t,"onScaleEnd",ou(t,n,{})),r)},dragGroupControlCondition:vu,dragGroupControlStart:function(u,t){var l=t.datas,n=this.dragControlStart(u,t);if(!n)return!1;var r=Mu(u,"resizable",t);function i(t,n){var e=l.fixedDirection,r=l.fixedPosition,i=Hu(t,e),o=en(fn(-u.rotation/180*Math.PI,3),[i[0]-r[0],i[1]-r[1],1],3),a=o[0],s=o[1];return n.datas.originalX=a,n.datas.originalY=s,n}l.moveableScale=u.scale;var o=Du(u,this,"dragControlStart",t,i),e=hs(hs({},n),{targets:u.props.targets,events:o,setFixedDirection:function(e){n.setFixedDirection(e),o.forEach(function(t,n){t.setFixedDirection(e),i(u.moveables[n],r[n])})}}),a=au(u,"onScaleGroupStart",e);return l.isScale=!1!==a,!!l.isScale&&e},dragGroupControl:function(o,t){var n=t.datas;if(n.isScale){var e=this.dragControl(o,t);if(e){var r=n.moveableScale;o.scale=[e.scale[0]*r[0],e.scale[1]*r[1]];var a=o.props.keepRatio,s=e.dist,u=e.scale,l=n.fixedPosition,i=Du(o,this,"dragControl",t,function(t,n){var e=en(fn(o.rotation/180*Math.PI,3),[n.datas.originalX*s[0],n.datas.originalY*s[1],1],3),r=e[0],i=e[1];return hs(hs({},n),{parentDist:null,parentScale:u,parentKeepRatio:a,dragClient:Jt(l,[r,i])})}),c=hs({targets:o.props.targets,events:i},e);return au(o,"onScaleGroup",c),c}}},dragGroupControlEnd:function(t,n){var e=n.isDrag;if(n.datas.isScale)return this.dragControlEnd(t,n),Du(t,this,"dragControlEnd",n),au(t,"onScaleGroupEnd",ou(t,n,{targets:t.props.targets})),e},request:function(){var n={},e=0,r=0;return{isControl:!0,requestStart:function(t){return{datas:n,parentDirection:t.direction||[1,1]}},request:function(t){return e+=t.deltaWidth,r+=t.deltaHeight,{datas:n,parentDist:[e,r]}},requestEnd:function(){return{datas:n,isDrag:!0}}}}};function ic(t,a){return t.map(function(t,n){return e=t,r=a[n],(e*(o=2)+r*(i=1))/(i+o);var e,r,i,o})}function oc(t,n,e){var r=es(t,n),i=es(t,e)-r;return 0<=i?i:i+2*Math.PI}var ac={name:"warpable",ableGroup:"size",props:{warpable:Boolean,renderDirections:Array},events:{onWarpStart:"warpStart",onWarp:"warp",onWarpEnd:"warpEnd"},render:function(t,n){var e=t.props,r=e.resizable,i=e.scalable,o=e.warpable,a=e.zoom;if(r||i||!o)return[];var s=t.state,u=s.pos1,l=s.pos2,c=s.pos3,f=s.pos4,p=ic(u,l),d=ic(l,u),h=ic(u,c),g=ic(c,u),v=ic(c,f),m=ic(f,c),b=ic(l,f),x=ic(f,l);return gs([n.createElement("div",{className:Os("line"),key:"middeLine1",style:Vs(p,v,a)}),n.createElement("div",{className:Os("line"),key:"middeLine2",style:Vs(d,m,a)}),n.createElement("div",{className:Os("line"),key:"middeLine3",style:Vs(h,b,a)}),n.createElement("div",{className:Os("line"),key:"middeLine4",style:Vs(g,x,a)})],Ul(t,n))},dragControlCondition:function(t,n){return!n.isRequest&&ss(n.inputEvent.target,Os("direction"))},dragControlStart:function(t,n){var r=n.datas,e=n.inputEvent,i=t.props.target,o=tu(e.target);if(!o||!i)return!1;var a=t.state,s=a.transformOrigin,u=a.is3d,l=a.targetTransform,c=a.targetMatrix,f=a.width,p=a.height,d=a.left,h=a.top;return r.datas={},r.targetTransform=l,r.warpTargetMatrix=u?c:$t(c,3,4),r.targetInverseMatrix=Wt(Lt(r.warpTargetMatrix,4),3,4),r.direction=o,r.left=d,r.top=h,r.poses=[[0,0],[f,0],[0,p],[f,p]].map(function(t){return Qt(t,s)}),r.nextPoses=r.poses.map(function(t){var n=t[0],e=t[1];return en(r.warpTargetMatrix,[n,e,0,1],4)}),r.startValue=pn(4),r.prevMatrix=pn(4),r.absolutePoses=eu(a),r.posIndexes=Tu(o),wu(t,n),Fu(n,"matrix3d"),!(a.snapRenderInfo={request:n.isRequest,direction:o})!==au(t,"onWarpStart",iu(t,n,hs({set:function(t){r.startValue=t}},Nu(n))))&&(r.isWarp=!0),r.isWarp},dragControl:function(t,n){var e,r,i,o,a=n.datas,s=n.isRequest,u=n.distX,l=n.distY,c=a.targetInverseMatrix,f=a.prevMatrix,p=a.isWarp,d=a.startValue,h=a.poses,g=a.posIndexes,v=a.absolutePoses;if(!p)return!1;Ou(n,"matrix3d"),Ku(t,"warpable")&&(1<(e=g.map(function(t){return v[t]})).length&&e.push([(e[0][0]+e[1][0])/2,(e[0][1]+e[1][1])/2]),i=(r=Tl(t,s,{horizontal:e.map(function(t){return t[1]+l}),vertical:e.map(function(t){return t[0]+u})})).horizontal,o=r.vertical,l-=i.offset,u-=o.offset);var m=zu({datas:a,distX:u,distY:l},!0),b=a.nextPoses.slice();if(g.forEach(function(t){b[t]=Jt(b[t],m)}),!ys.every(function(t){return n=t.map(function(t){return h[t]}),e=t.map(function(t){return b[t]}),r=oc(n[0],n[1],n[2]),i=oc(e[0],e[1],e[2]),!((o=Math.PI)<=r&&i<=o||r<=o&&o<=i);var n,e,r,i,o}))return!1;var x=gn(h[0],h[2],h[1],h[3],b[0],b[2],b[1],b[3]);if(!x.length)return!1;var E=Gu(a,Kt(c,x,4),!0),S=Kt(Lt(f,4),E,4),y=Kt(d,a.prevMatrix=E,4),M=Pu(a,"matrix3d("+y.join(", ")+")","matrix3d("+E.join(", ")+")");return _u(n,M),au(t,"onWarp",iu(t,n,{delta:S,matrix:y,dist:E,multiply:Kt,transform:M})),!0},dragControlEnd:function(t,n){var e=n.datas,r=n.isDrag;return!!e.isWarp&&(e.isWarp=!1,au(t,"onWarpEnd",ou(t,n,{})),r)}},sc=Os("area-pieces"),uc=Os("area-piece"),lc=Os("avoid");function cc(t){var n,e,r,i=t.areaElement,o=t.state,a=o.width,s=o.height;e=lc,(n=i).classList?n.classList.remove(e):(r=new RegExp("(\\s|^)"+e+"(\\s|$)"),n.className=n.className.replace(r," ")),i.style.cssText+="left: 0px; top: 0px; width: "+a+"px; height: "+s+"px"}function fc(t){return t.createElement("div",{key:"area_pieces",className:sc},t.createElement("div",{className:uc}),t.createElement("div",{className:uc}),t.createElement("div",{className:uc}),t.createElement("div",{className:uc}))}var pc={name:"dragArea",props:{dragArea:Boolean,passDragArea:Boolean},events:{onClick:"click",onClickGroup:"clickGroup"},render:function(t,n){var e=t.props,r=e.target,i=e.dragArea,o=e.groupable,a=e.passDragArea,s=t.state,u=s.width,l=s.height,c=s.renderPoses,f=a?Os("area","pass"):Os("area");if(o)return[n.createElement("div",{key:"area",ref:S(t,"areaElement"),className:f}),fc(n)];if(!r||!i)return[];var p=gn([0,0],[u,0],[0,l],[u,l],c[0],c[1],c[2],c[3]),d=p.length?Fs(p,!0):"none";return[n.createElement("div",{key:"area",ref:S(t,"areaElement"),className:f,style:{top:"0px",left:"0px",width:u+"px",height:l+"px",transformOrigin:"0 0",transform:d}}),fc(n)]},dragStart:function(t,n){var e=n.datas,r=n.clientX,i=n.clientY;if(!n.inputEvent)return!1;e.isDragArea=!1;var o,a,s=t.areaElement,u=t.state,l=u.moveableClientRect,c=u.renderPoses,f=u.rootMatrix,p=u.is3d,d=l.left,h=l.top,g=qs(c),v=g.left,m=g.top,b=g.width,x=g.height,E=fu(f,[r-d,i-h],p?4:3),S=E[0],y=E[1],M=[{left:v,top:m,width:b,height:(y-=m)-10},{left:v,top:m,width:(S-=v)-10,height:x},{left:v,top:m+y+10,width:b,height:x-y-10},{left:v+S+10,top:m,width:b-S-10,height:x}],C=[].slice.call(s.nextElementSibling.children);M.forEach(function(t,n){C[n].style.cssText="left: "+t.left+"px;top: "+t.top+"px; width: "+t.width+"px; height: "+t.height+"px;"}),a=lc,(o=s).classList?o.classList.add(a):o.className+=" "+a,u.disableNativeEvent=!0},drag:function(t,n){var e=n.datas,r=n.inputEvent;if(this.enableNativeEvent(t),!r)return!1;e.isDragArea||(e.isDragArea=!0,cc(t))},dragEnd:function(t,n){this.enableNativeEvent(t);var e=n.inputEvent,r=n.datas;if(!e)return!1;r.isDragArea||cc(t)},dragGroupStart:function(t,n){return this.dragStart(t,n)},dragGroup:function(t,n){return this.drag(t,n)},dragGroupEnd:function(t,n){return this.dragEnd(t,n)},unset:function(t){cc(t),t.state.disableNativeEvent=!1},enableNativeEvent:function(t){var n=t.state;n.disableNativeEvent&&requestAnimationFrame(function(){n.disableNativeEvent=!1})}},dc=vs("origin",{render:function(t,n){var e=t.props.zoom,r=t.state,i=r.beforeOrigin,o=r.rotation;return[n.createElement("div",{className:Os("control","origin"),style:Us(o,e,i),key:"beforeOrigin"})]}});function hc(t){var n=t.scrollContainer;return[n.scrollLeft,n.scrollTop]}var gc={name:"scrollable",canPinch:!0,props:{scrollable:Boolean,scrollContainer:Object,scrollThreshold:Number,getScrollPosition:Function},events:{onScroll:"scroll",onScrollGroup:"scrollGroup"},dragStart:function(o,a){var t=o.props.scrollContainer,n=void 0===t?o.getContainer():t,e=new Kn,r=mu(n,!0);a.datas.dragScroll=e;var i=a.isControl?"controlGesto":"targetGesto",s=a.targets;e.on("scroll",function(t){var n=t.container,e=t.direction,r=iu(o,a,{scrollContainer:n,direction:e}),i=s?"onScrollGroup":"onScroll";s&&(r.targets=s),au(o,i,r)}).on("move",function(t){var n=t.offsetX,e=t.offsetY;o[i].scrollBy(n,e,a.inputEvent,!1)}),e.dragStart(a,{container:r})},checkScroll:function(t,n){var e=n.datas.dragScroll;if(e){var r=t.props,i=r.scrollContainer,o=void 0===i?t.getContainer():i,a=r.scrollThreshold,s=void 0===a?0:a,u=r.getScrollPosition,l=void 0===u?hc:u;return e.drag(n,{container:o,threshold:s,getScrollPosition:function(t){return l({scrollContainer:t.container,direction:t.direction})}}),!0}},drag:function(t,n){return this.checkScroll(t,n)},dragEnd:function(t,n){n.datas.dragScroll.dragEnd(),n.datas.dragScroll=null},dragControlStart:function(t,n){return this.dragStart(t,hs(hs({},n),{isControl:!0}))},dragControl:function(t,n){return this.drag(t,n)},dragControlEnd:function(t,n){return this.dragEnd(t,n)},dragGroupStart:function(t,n){return this.dragStart(t,hs(hs({},n),{targets:t.props.targets}))},dragGroup:function(t,n){return this.drag(t,hs(hs({},n),{targets:t.props.targets}))},dragGroupEnd:function(t,n){return this.dragEnd(t,hs(hs({},n),{targets:t.props.targets}))},dragGroupControlStart:function(t,n){return this.dragStart(t,hs(hs({},n),{targets:t.props.targets,isControl:!0}))},dragGroupContro:function(t,n){return this.drag(t,hs(hs({},n),{targets:t.props.targets}))},dragGroupControEnd:function(t,n){return this.dragEnd(t,hs(hs({},n),{targets:t.props.targets}))}},vc={name:"",props:{target:Object,dragTarget:Object,container:Object,portalContainer:Object,rootContainer:Object,zoom:Number,transformOrigin:Array,edge:Boolean,ables:Array,className:String,pinchThreshold:Number,pinchOutside:Boolean,triggerAblesSimultaneously:Boolean,checkInput:Boolean,cspNonce:String,translateZ:Number,hideDefaultLines:Boolean,props:Object},events:{}},mc=vs("padding",{render:function(t,o){var n=t.props;if(n.dragArea)return[];var e=n.padding||{},r=e.left,i=void 0===r?0:r,a=e.top,s=void 0===a?0:a,u=e.right,l=void 0===u?0:u,c=e.bottom,f=void 0===c?0:c,p=t.state,d=p.renderPoses,h=[p.pos1,p.pos2,p.pos3,p.pos4],g=[];return 0<i&&g.push([0,2]),0<s&&g.push([0,1]),0<l&&g.push([1,3]),0<f&&g.push([2,3]),g.map(function(t,n){var e=t[0],r=t[1],i=gn([0,0],[100,0],[0,100],[100,100],h[e],h[r],d[e],d[r]);if(i.length)return o.createElement("div",{key:"padding"+n,className:Os("padding"),style:{transform:Fs(i,!0)}})})}}),bc=["nw","ne","se","sw"];function xc(t,n){var e=t[0]+t[1],r=n<e?n/e:1;return t[0]*=r,t[1]=n-t[1]*r,t}var Ec=[1,2,5,6],Sc=[0,3,4,7],yc=[1,-1,-1,1],Mc=[1,1,-1,-1];function Cc(t,a,s,u,l,c,f,p,d){void 0===c&&(c=0),void 0===f&&(f=0),void 0===p&&(p=u),void 0===d&&(d=l);var h=[],g=!1,n=t.map(function(t,n){var e=a[n],r=e.horizontal,i=e.vertical;if(i&&!g&&(g=!0,h.push("/")),g){var o=Math.max(0,1===i?t[1]-f:d-t[1]);return h.push(hu(o,l,s)),o}o=Math.max(0,1===r?t[0]-c:p-t[0]);return h.push(hu(o,u,s)),o});return{styles:h,raws:n}}function Dc(t){for(var n=[0,0],e=[0,0],r=t.length,i=0;i<r;++i){var o=t[i];o.sub&&(o.horizontal&&(0===n[1]&&(n[0]=i),n[1]=i-n[0]+1,e[0]=i+1),o.vertical&&(0===e[1]&&(e[0]=i),e[1]=i-e[0]+1))}return{horizontalRange:n,verticalRange:e}}function Rc(t,r,i,o,a,n){var e,s,u;void 0===n&&(n=[0,0]);var l=t.indexOf("/"),c=(-1<l?t.slice(0,l):t).length,f=t.slice(0,c),p=t.slice(c+1),d=f[0],h=void 0===d?"0px":d,g=f[1],v=void 0===g?h:g,m=f[2],b=void 0===m?h:m,x=f[3],E=void 0===x?v:x,S=p[0],y=void 0===S?h:S,M=p[1],C=void 0===M?y:M,D=p[2],R=void 0===D?y:D,w=p[3],O=void 0===w?C:w,P=[h,v,b,E].map(function(t){return Ja(t,r)}),G=[y,C,R,O].map(function(t){return Ja(t,i)}),B=P.slice(),z=G.slice(),T=xc([B[0],B[1]],r);B[0]=T[0],B[1]=T[1],e=xc([B[3],B[2]],r),B[3]=e[0],B[2]=e[1],s=xc([z[0],z[3]],i),z[0]=s[0],z[3]=s[1],u=xc([z[1],z[2]],i),z[1]=u[0],z[2]=u[1];var k=B.slice(0,Math.max(n[0],f.length)),A=z.slice(0,Math.max(n[1],p.length));return gs(k.map(function(t,n){var e=bc[n];return{horizontal:yc[n],vertical:0,pos:[o+t,a+(-1===Mc[n]?i:0)],sub:!0,raw:P[n],direction:e}}),A.map(function(t,n){var e=bc[n];return{horizontal:0,vertical:Mc[n],pos:[o+(-1===yc[n]?r:0),a+t],sub:!0,raw:G[n],direction:e}}))}function wc(t,n,e,r,i){void 0===i&&(i=n.length);var o=Dc(t.slice(r)),a=o.horizontalRange,s=o.verticalRange,u=e-r,l=0;if(0==u)l=i;else if(0<u&&u<a[1])l=a[1]-u;else{if(!(u>=s[0]))return;l=s[0]+s[1]-u}t.splice(e,l),n.splice(e,l)}function Oc(t,n,e,r,i,o,a,s,u,l,c){void 0===l&&(l=0),void 0===c&&(c=0);var f=Dc(t.slice(e)),p=f.horizontalRange,d=f.verticalRange;if(-1<r)for(var h=1===yc[r]?o-l:s-o,g=p[1];g<=r;++g){var v=1===Mc[g]?c:u,m=0;if(r===g?m=o:0===g?m=l+h:-1===yc[g]&&(m=s-(n[e][0]-l)),t.splice(e+g,0,{horizontal:yc[g],vertical:0,pos:[m,v]}),n.splice(e+g,0,[m,v]),0===g)break}else if(-1<i){var b,x=1===Mc[i]?a-c:u-a;0===p[1]&&0===d[1]&&(b=[l+x,c],t.push({horizontal:yc[0],vertical:0,pos:b}),n.push(b));for(var E=d[0],g=d[1];g<=i;++g){m=1===yc[g]?l:s,v=0;if(i===g?v=a:0===g?v=c+x:1===Mc[g]?v=n[e+E][1]:-1===Mc[g]&&(v=u-(n[e+E][1]-c)),t.push({horizontal:0,vertical:Mc[g],pos:[m,v]}),n.push([m,v]),0===g)break}}}function Pc(t,e){return void 0===e&&(e=t.map(function(t){return t.raw})),{horizontals:t.map(function(t,n){return t.horizontal?e[n]:null}).filter(function(t){return null!=t}),verticals:t.map(function(t,n){return t.vertical?e[n]:null}).filter(function(t){return null!=t})}}var Gc=[[0,-1,"n"],[1,0,"e"]],Bc=[[-1,-1,"nw"],[0,-1,"n"],[1,-1,"ne"],[1,0,"e"],[1,1,"se"],[0,1,"s"],[-1,1,"sw"],[-1,0,"w"]];function zc(t,n,e){var r=t.props.clipRelative,i=t.state,o=i.width,a=i.height,s=n.type,u=n.poses,l="rect"===s,c="circle"===s;if("polygon"===s)return e.map(function(t){return hu(t[0],o,r)+" "+hu(t[1],a,r)});if(l||"inset"===s){var f=e[1][1],p=e[3][0],d=e[7][0],h=e[5][1];if(l)return[f,p,h,d].map(function(t){return t+"px"});var g,v,m,b=[f,o-p,a-h,d].map(function(t,n){return hu(t,n%2?o:a,r)});return 8<e.length&&(v=(g=Qt(e[4],e[0]))[0],m=g[1],b.push.apply(b,gs(["round"],Cc(e.slice(8),u.slice(8),r,v,m,d,f,p,h).styles))),b}if(c||"ellipse"===s){var x=e[0],E=hu(Math.abs(e[1][1]-x[1]),c?Math.sqrt((o*o+a*a)/2):a,r);return(b=c?[E]:[hu(Math.abs(e[2][0]-x[0]),o,r),E]).push("at",hu(x[0],o,r),hu(x[1],a,r)),b}}function Tc(t,n,e,r){var a=[r,(r+n)/2,n],s=[t,(t+e)/2,e];return Bc.map(function(t){var n=t[0],e=t[1],r=t[2],i=a[n+1],o=s[e+1];return{vertical:Math.abs(e),horizontal:Math.abs(n),direction:r,pos:[i,o]}})}function kc(t,i,o,n,e){var r,a,s,u=e;if(u||(u="none"!==(s=(a=su(t)).clipPath)?s:a.clip),u&&"none"!==u&&"auto"!==u||(u=n)){var l=Ua(u),c=l.prefix,f=void 0===c?u:c,p=l.value,d=void 0===p?"":p,h="circle"===f,g=" ";if("polygon"===f){g=",";return{type:f,clipText:u,poses:B=(P=Va(d||"0% 0%, 100% 0%, 100% 100%, 0% 100%")).map(function(t){var n=t.split(" "),e=n[0],r=n[1];return{vertical:1,horizontal:1,pos:[Ja(e,i),Ja(r,o)]}}),splitter:g}}if(h||"ellipse"===f){var v,m,b,x,E,S,y,M,C,D="",R="",w=0,O=0,P=Ha(d);O=h?(m="",m=void 0===(v=P[0])?"50%":v,D=void 0===(b=P[2])?"50%":b,R=void 0===(x=P[3])?"50%":x,w=Ja(m,Math.sqrt((i*i+o*o)/2))):(M=S="",S=void 0===(E=P[0])?"50%":E,M=void 0===(y=P[1])?"50%":y,D=void 0===(C=P[3])?"50%":C,R=void 0===(r=P[4])?"50%":r,w=Ja(S,i),Ja(M,o));var G=[Ja(D,i),Ja(R,o)],B=gs([{vertical:1,horizontal:1,pos:G,direction:"nesw"}],Gc.slice(0,h?1:2).map(function(t){return{vertical:Math.abs(t[1]),horizontal:t[0],direction:t[2],sub:!0,pos:[G[0]+t[0]*w,G[1]+t[1]*O]}}));return{type:f,clipText:u,radiusX:w,radiusY:O,left:G[0]-w,top:G[1]-O,poses:B,splitter:g}}if("inset"===f){var z=(P=Ha(d||"0 0 0 0")).indexOf("round"),T=(-1<z?P.slice(0,z):P).length,k=P.slice(T+1),A=P.slice(0,T),I=A[0],N=A[1],F=void 0===N?I:N,j=A[2],_=void 0===j?I:j,Y=A[3],q=void 0===Y?F:Y,X=[I,_].map(function(t){return Ja(t,o)}),W=X[0],L=X[1],H=[q,F].map(function(t){return Ja(t,i)}),V=H[0],U=H[1],$=i-U,Z=o-L,K=Rc(k,$-V,Z-W,V,W);return{type:"inset",clipText:u,poses:B=gs(Tc(W,$,Z,V),K),top:W,left:V,right:$,bottom:Z,radius:k,splitter:g}}if("rect"===f){g=",";var J=(P=Va(d||"0px, "+i+"px, "+o+"px, 0px")).map(function(t){return $a(t).value});return{type:"rect",clipText:u,poses:B=Tc(W=J[0],U=J[1],L=J[2],V=J[3]),top:W,right:U,bottom:L,left:V,values:P,splitter:g}}}}var Ac={name:"clippable",props:{clippable:Boolean,defaultClipPath:String,customClipPath:String,clipRelative:Boolean,clipArea:Boolean,dragWithClip:Boolean,clipTargetBounds:Boolean,clipVerticalGuidelines:Array,clipHorizontalGuidelines:Array,clipSnapThreshold:Boolean},events:{onClipStart:"clipStart",onClip:"clip",onClipEnd:"clipEnd"},css:[".control.clip-control {\n    background: #6d6;\n    cursor: pointer;\n}\n.control.clip-control.clip-radius {\n    background: #d66;\n}\n.line.clip-line {\n    background: #6e6;\n    cursor: move;\n    z-index: 1;\n}\n.clip-area {\n    position: absolute;\n    top: 0;\n    left: 0;\n}\n.clip-ellipse {\n    position: absolute;\n    cursor: move;\n    border: 1px solid #6d6;\n    border: var(--zoompx) solid #6d6;\n    border-radius: 50%;\n    transform-origin: 0px 0px;\n}",":host {\n    --bounds-color: #d66;\n}",".guideline {\n    pointer-events: none;\n    z-index: 2;\n}",".line.guideline.bounds {\n    background: #d66;\n    background: var(--bounds-color);\n}"],render:function(t,s){var n=t.props,e=n.customClipPath,r=n.defaultClipPath,i=n.clipArea,u=n.zoom,o=t.state,a=o.target,l=o.width,c=o.height,f=o.allMatrix,p=o.is3d,d=o.left,h=o.top,g=o.pos1,v=o.pos2,m=o.pos3,b=o.pos4,x=o.clipPathState,E=o.snapBoundInfos;if(!a)return[];var S=kc(a,l,c,r||"inset",x||e);if(!S)return[];var y,M,C,D,R,w,O=p?4:3,P=S.type,G=S.poses.map(function(t){var n=_s(f,t.pos,O);return[n[0]-d,n[1]-h]}),B=[],z=[],T="rect"===P,k="inset"===P,A="polygon"===P;if((T||k||A)&&(y=k?G.slice(0,8):G,z=y.map(function(t,n){var e=0===n?y[y.length-1]:y[n-1],r=es(e,t),i=Hs(e,t);return s.createElement("div",{key:"clipLine"+n,className:Os("line","clip-line","snap-control"),"data-clip-index":n,style:{width:i+"px",transform:"translate("+e[0]+"px, "+e[1]+"px) rotate("+r+"rad) scaleY("+u+")"}})})),B=G.map(function(t,n){return s.createElement("div",{key:"clipControl"+n,className:Os("control","clip-control","snap-control"),"data-clip-index":n,style:{transform:"translate("+t[0]+"px, "+t[1]+"px) scale("+u+")"}})}),k&&B.push.apply(B,G.slice(8).map(function(t,n){return s.createElement("div",{key:"clipRadiusControl"+n,className:Os("control","clip-control","clip-radius","snap-control"),"data-clip-index":8+n,style:{transform:"translate("+t[0]+"px, "+t[1]+"px) scale("+u+")"}})})),"circle"===P||"ellipse"===P){var I=S.left,N=S.top,F=S.radiusX,j=S.radiusY,_=Qt(_s(f,[I,N],O),_s(f,[0,0],O)),Y=_[0],q=_[1],X="none";if(!i){for(var W=Math.max(10,F/5,j/5),L=[],H=0;H<=W;++H){var V=2*Math.PI/W*H;L.push([F+(F-u)*Math.cos(V),j+(j-u)*Math.sin(V)])}L.push([F,-2]),L.push([-2,-2]),L.push([-2,2*j+2]),L.push([2*F+2,2*j+2]),L.push([2*F+2,-2]),L.push([F,-2]),X="polygon("+L.map(function(t){return t[0]+"px "+t[1]+"px"}).join(", ")+")"}B.push(s.createElement("div",{key:"clipEllipse",className:Os("clip-ellipse","snap-control"),style:{width:2*F+"px",height:2*j+"px",clipPath:X,transform:"translate("+(-d+Y)+"px, "+(-h+q)+"px) "+Fs(f)}}))}return i&&(C=(M=qs(gs([g,v,m,b],G))).width,D=M.height,R=M.left,w=M.top,(A||T||k)&&(L=k?G.slice(0,8):G,B.push(s.createElement("div",{key:"clipArea",className:Os("clip-area","snap-control"),style:{width:C+"px",height:D+"px",transform:"translate("+R+"px, "+w+"px)",clipPath:"polygon("+L.map(function(t){return t[0]-R+"px "+(t[1]-w)+"px"}).join(", ")+")"}})))),E&&["vertical","horizontal"].forEach(function(o){var t=E[o],a="horizontal"===o;t.isSnap&&z.push.apply(z,t.snap.posInfos.map(function(t,n){var e=t.pos,r=Qt(_s(f,a?[0,e]:[e,0],O),[d,h]),i=Qt(_s(f,a?[l,e]:[e,c],O),[d,h]);return Vl(s,"",r,i,u,"clip"+o+"snap"+n,"guideline")})),t.isBound&&z.push.apply(z,t.bounds.map(function(t,n){var e=t.pos,r=Qt(_s(f,a?[0,e]:[e,0],O),[d,h]),i=Qt(_s(f,a?[l,e]:[e,c],O),[d,h]);return Vl(s,"",r,i,u,"clip"+o+"bounds"+n,"guideline","bounds","bold")}))}),gs(B,z)},dragControlCondition:function(t,n){return n.inputEvent&&-1<(n.inputEvent.target.getAttribute("class")||"").indexOf("clip")},dragStart:function(t,n){var e=t.props.dragWithClip;return void 0!==e&&!e&&this.dragControlStart(t,n)},drag:function(t,n){return this.dragControl(t,n)},dragEnd:function(t,n){return this.dragControlEnd(t,n)},dragControlStart:function(t,n){var e=t.state,r=t.props,i=r.defaultClipPath,o=r.customClipPath,a=e.target,s=e.width,u=e.height,l=n.inputEvent?n.inputEvent.target:null,c=l?l.getAttribute("class"):"",f=n.datas,p=kc(a,s,u,i||"inset",o);if(!p)return!1;var d=p.clipText;return!1===au(t,"onClipStart",iu(t,n,{clipType:p.type,clipStyle:d,poses:p.poses.map(function(t){return t.pos})}))?f.isClipStart=!1:(f.isControl=-1<c.indexOf("clip-control"),f.isLine=-1<c.indexOf("clip-line"),f.isArea=-1<c.indexOf("clip-area")||-1<c.indexOf("clip-ellipse"),f.index=l?parseInt(l.getAttribute("data-clip-index"),10):-1,f.clipPath=p,f.isClipStart=!0,e.clipPathState=d,wu(t,n),!0)},dragControl:function(t,n){var e=n.datas,r=n.originalDatas;if(!e.isClipStart)return!1;var i=r&&r.draggable||{},o=e.isControl,a=e.isLine,s=e.isArea,u=e.index,l=e.clipPath;if(!l)return!1;var c=i.isDrag?i.prevDist:zu(n),f=c[0],p=c[1],d=t.props,h=t.state,g=h.width,v=h.height,m=!s&&!o&&!a,b=l.type,x=l.poses,E=l.splitter,S=x.map(function(t){return t.pos});m&&(f=-f,p=-p);var y,M,C,D,R,w,O,P,G,B,z,T,k,A,I,N=!o||"nesw"===x[u].direction,F="inset"===b||"rect"===b,j=x.map(function(){return[0,0]});o&&!N?(M=(y=x[u]).horizontal,C=y.vertical,D=[f*Math.abs(M),p*Math.abs(C)],O=D,P=F,z=(R=x)[w=u],T=z.direction,k=z.sub,A=R.map(function(){return[0,0]}),I=T?T.split(""):[],P&&w<8?(G=I.filter(function(t){return"w"===t||"e"===t})[0],B=I.filter(function(t){return"n"===t||"s"===t})[0],A[w]=O,R.forEach(function(t,n){var e=t.direction;e&&(-1<e.indexOf(G)&&(A[n][0]=O[0]),-1<e.indexOf(B)&&(A[n][1]=O[1]))}),G&&(A[1][0]=O[0]/2,A[5][0]=O[0]/2),B&&(A[3][1]=O[1]/2,A[7][1]=O[1]/2)):T&&!k?I.forEach(function(o){var a="n"===o||"s"===o;R.forEach(function(t,n){var e=t.direction,r=t.horizontal,i=t.vertical;e&&-1!==e.indexOf(o)&&(A[n]=[a||!r?0:O[0],a&&i?O[1]:0])})}):A[w]=O,j=A):N&&(j=S.map(function(){return[f,p]}));var _=S.map(function(t,n){return Jt(t,j[n])}),Y=gs(_);h.snapBoundInfos=null;var q,X,W,L,H,V,U="circle"===l.type,$="ellipse"===l.type;(U||$)&&(q=qs(_),X=Math.abs(q.bottom-q.top),W=Math.abs($?q.right-q.left:X),L=_[0][1]+X,H=_[0][0]-W,V=_[0][0]+W,U&&(Y.push([V,q.bottom]),j.push([1,0])),Y.push([q.left,L]),j.push([0,1]),Y.push([H,q.bottom]),j.push([1,0]));var Z,K=tl((d.clipHorizontalGuidelines||[]).map(function(t){return Ja(""+t,v)}),(d.clipVerticalGuidelines||[]).map(function(t){return Ja(""+t,g)}),g,v),J=[],Q=[];Q=U||$?(J=[Y[4][0],Y[2][0]],[Y[1][1],Y[3][1]]):F?(et=[Y[0],Y[2],Y[4],Y[6]],Z=[j[0],j[2],j[4],j[6]],J=et.filter(function(t,n){return Z[n][0]}).map(function(t){return t[0]}),et.filter(function(t,n){return Z[n][1]}).map(function(t){return t[1]})):(J=Y.filter(function(t,n){return j[n][0]}).map(function(t){return t[0]}),Y.filter(function(t,n){return j[n][1]}).map(function(t){return t[1]}));for(var tt=[0,0],nt=0;nt<2;++nt){if("break"===function(){var t=kl(K,d.clipTargetBounds&&{left:0,top:0,right:g,bottom:v},J,Q,5),n=t.horizontal,e=t.vertical,r=n.offset,i=e.offset;if(n.isBound&&(tt[1]+=r),e.isBound&&(tt[0]+=i),!$&&!U||0!==j[0][0]||0!==j[0][1])return Y.forEach(function(t,n){var e=j[n];e[0]&&(t[0]-=i),e[1]&&(t[1]-=r)}),"break";var o=qs(_),a=o.bottom-o.top,s=$?o.right-o.left:a;s-=e.isBound?Math.abs(i):0===e.snapIndex?-i:i,a-=n.isBound?Math.abs(r):0===n.snapIndex?-r:r,U&&(s=a=0<ul(e,n)?a:s);var u=Y[0];Y[1][1]=u[1]-a,Y[2][0]=u[0]+s,Y[3][1]=u[1]+a,Y[4][0]=u[0]-s}())break}var et,rt=zc(t,l,_),it=b+"("+rt.join(E)+")";return h.clipPathState=it,Q=U||$?(J=[Y[4][0],Y[2][0]],[Y[1][1],Y[3][1]]):F?(et=[Y[0],Y[2],Y[4],Y[6]],J=et.map(function(t){return t[0]}),et.map(function(t){return t[1]})):(J=Y.map(function(t){return t[0]}),Y.map(function(t){return t[1]})),h.snapBoundInfos=kl(K,d.clipTargetBounds&&{left:0,top:0,right:g,bottom:v},J,Q,1),r.draggable&&(r.draggable.deltaOffset=tt),au(t,"onClip",iu(t,n,{clipEventType:"changed",clipType:b,poses:_,clipStyle:it,clipStyles:rt,distX:f,distY:p})),!0},dragControlEnd:function(t,n){this.unset(t);var e=n.isDrag,r=n.datas,i=n.isDouble,o=r.isLine,a=r.isClipStart,s=r.isControl;return!!a&&(au(t,"onClipEnd",ou(t,n,{})),i&&(s?function(t,n){var e=n.datas,r=e.clipPath,i=e.index,o=r.type,a=r.poses,s=r.splitter,u=a.map(function(t){return t.pos}),l=u.length;if("polygon"===o)a.splice(i,1),u.splice(i,1);else{if("inset"!==o)return;if(i<8)return;if(wc(a,u,i,8,l),l===a.length)return}var c=zc(t,r,u);au(t,"onClip",iu(t,n,{clipEventType:"removed",clipType:o,poses:u,clipStyles:c,clipStyle:o+"("+c.join(s)+")",distX:0,distY:0}))}(t,n):o&&function(t,n){var e=Ru(t,n),r=e[0],i=e[1],o=n.datas,a=o.clipPath,s=o.index,u=a.type,l=a.poses,c=a.splitter,f=l.map(function(t){return t.pos});if("polygon"===u)f.splice(s,0,[r,i]);else{if("inset"!==u)return;var p=Ec.indexOf(s),d=Sc.indexOf(s),h=l.length;if(Oc(l,f,8,p,d,r,i,f[4][0],f[4][1],f[0][0],f[0][1]),h===l.length)return}var g=zc(t,a,f);au(t,"onClip",iu(t,n,{clipEventType:"added",clipType:u,poses:f,clipStyles:g,clipStyle:u+"("+g.join(c)+")",distX:0,distY:0}))}(t,n)),i||e)},unset:function(t){t.state.clipPathState="",t.state.snapBoundInfos=null}},Ic={name:"originDraggable",props:{originDraggable:Boolean,originRelative:Boolean},events:{onDragOriginStart:"dragOriginStart",onDragOrigin:"dragOrigin",onDragOriginEnd:"dragOriginEnd"},css:[":host[data-able-origindraggable] .control.origin {\n    pointer-events: auto;\n}"],dragControlCondition:function(t,n){return n.isRequest?"originDraggable"===n.requestAble:ss(n.inputEvent.target,Os("origin"))},dragControlStart:function(t,n){var e=n.datas;wu(t,n);var r=iu(t,n,{dragStart:Ll.dragStart(t,(new yu).dragStart([0,0],n))}),i=au(t,"onDragOriginStart",r);return e.startOrigin=t.state.transformOrigin,e.startTargetOrigin=t.state.targetOrigin,e.prevOrigin=[0,0],!(e.isDragOrigin=!0)===i?e.isDragOrigin=!1:r},dragControl:function(t,n){var e=n.datas,r=n.isPinch,i=n.isRequest;if(!e.isDragOrigin)return!1;var o,a=zu(n),s=a[0],u=a[1],l=t.state,c=l.width,f=l.height,p=l.offsetMatrix,d=l.targetMatrix,h=l.is3d,g=t.props.originRelative,v=void 0===g||g,m=h?4:3,b=[s,u];!i||((o=n.distOrigin)[0]||o[1])&&(b=o);var x=Jt(e.startOrigin,b),E=Jt(e.startTargetOrigin,b),S=Qt(b,e.prevOrigin),y=Iu(p,d,x,m),M=t.getRect(),C=qs(Ys(y,c,f,m)),D=[M.left-C.left,M.top-C.top],R=iu(t,n,{width:c,height:f,origin:x,dist:e.prevOrigin=b,delta:S,transformOrigin:[hu(E[0],c,v),hu(E[1],f,v)].join(" "),drag:Ll.drag(t,Su(n,t.state,D,!!r,!1))});return au(t,"onDragOrigin",R),R},dragControlEnd:function(t,n){return!!n.datas.isDragOrigin&&(au(t,"onDragOriginEnd",ou(t,n,{})),!0)},dragGroupControlCondition:function(t,n){return this.dragControlCondition(t,n)},dragGroupControlStart:function(t,n){return!!this.dragControlStart(t,n)},dragGroupControl:function(t,n){var e=this.dragControl(t,n);return!!e&&(t.transformOrigin=e.transformOrigin,!0)},request:function(t){var n={},e=t.getRect(),r=0,i=0,o=e.transformOrigin,a=[0,0];return{isControl:!0,requestStart:function(){return{datas:n}},request:function(t){return"deltaOrigin"in t?(a[0]+=t.deltaOrigin[0],a[1]+=t.deltaOrigin[1]):"origin"in t?(a[0]=t.origin[0]-o[0],a[1]=t.origin[1]-o[1]):("x"in t?r=t.x-e.left:"deltaX"in t&&(r+=t.deltaX),"y"in t?i=t.y-e.top:"deltaY"in t&&(i+=t.deltaY)),{datas:n,distX:r,distY:i,distOrigin:a}},requestEnd:function(){return{datas:n,isDrag:!0}}}}};function Nc(t,n,e,r,i){void 0===r&&(r=[0,0]);var o,a;return Rc(!(a=i||((o=su(t))&&o.borderRadius||""))||!i&&"0px"===a?[]:Ha(a),n,e,0,0,r)}function Fc(t,n,e,r,i,o){var a=t.state,s=a.width,u=a.height,l=Cc(o,i,t.props.roundRelative,s,u),c=l.raws,f=l.styles,p=Pc(i,c),d=p.horizontals,h=p.verticals,g=f.join(" ");au(t,"onRound",iu(t,n,{horizontals:d,verticals:h,borderRadius:a.borderRadiusState=g,width:s,height:u,delta:r,dist:e}))}var jc={name:"roundable",props:{roundable:Boolean,roundRelative:Boolean,minRoundControls:Array,maxRoundControls:Array,roundClickable:Boolean},events:{onRoundStart:"roundStart",onRound:"round",onRoundEnd:"roundEnd"},css:[".control.border-radius {\n    background: #d66;\n    cursor: pointer;\n}",":host[data-able-roundable] .line.direction {\n    cursor: pointer;\n}"],render:function(t,i){var n=t.state,e=n.target,r=n.width,o=n.height,a=n.allMatrix,s=n.is3d,u=n.left,l=n.top,c=n.borderRadiusState,f=t.props,p=f.minRoundControls,d=void 0===p?[0,0]:p,h=f.maxRoundControls,g=void 0===h?[4,4]:h,v=f.zoom;if(!e)return null;var m=s?4:3,b=Nc(e,r,o,d,c);if(!b)return null;var x=0,E=0;return b.map(function(t,n){E+=Math.abs(t.horizontal),x+=Math.abs(t.vertical);var e=Qt(_s(a,t.pos,m),[u,l]),r=t.vertical?x<=g[1]:E<=g[0];return i.createElement("div",{key:"borderRadiusControl"+n,className:Os("control","border-radius"),"data-radius-index":n,style:{display:r?"block":"none",transform:"translate("+e[0]+"px, "+e[1]+"px) scale("+v+")"}})})},dragControlCondition:function(t,n){if(!n.inputEvent||n.isRequest)return!1;var e=n.inputEvent.target.getAttribute("class")||"";return-1<e.indexOf("border-radius")||-1<e.indexOf("moveable-line")&&-1<e.indexOf("moveable-direction")},dragControlStart:function(t,n){var e=n.inputEvent,r=n.datas,i=e.target,o=i.getAttribute("class")||"",a=-1<o.indexOf("border-radius"),s=-1<o.indexOf("moveable-line")&&-1<o.indexOf("moveable-direction"),u=a?parseInt(i.getAttribute("data-radius-index"),10):-1,l=s?parseInt(i.getAttribute("data-line-index"),10):-1;if(!a&&!s)return!1;if(!1===au(t,"onRoundStart",iu(t,n,{})))return!1;r.lineIndex=l,r.controlIndex=u,r.isControl=a,r.isLine=s,wu(t,n);var c=t.props,f=c.roundRelative,p=c.minRoundControls,d=void 0===p?[0,0]:p,h=t.state,g=h.target,v=h.width,m=h.height;r.isRound=!0,r.prevDist=[0,0];var b=Nc(g,v,m,d)||[];return r.controlPoses=b,h.borderRadiusState=Cc(b.map(function(t){return t.pos}),b,f,v,m).styles.join(" "),!0},dragControl:function(t,n){var e=n.datas;if(!e.isRound||!e.isControl||!e.controlPoses.length)return!1;var r=e.controlIndex,i=e.controlPoses,o=zu(n),a=o[0],s=o[1],u=[a,s],l=Qt(u,e.prevDist),c=t.props.maxRoundControls,f=void 0===c?[4,4]:c,p=t.state,d=p.width,h=p.height,g=i[r],v=g.vertical,m=g.horizontal,b=i.map(function(t){var n=t.horizontal,e=t.vertical,r=[n*m*u[0],e*v*u[1]];if(n){if(1===f[0])return r;if(f[0]<4&&n!==m)return r}else{if(0===f[1])return r[1]=e*m*u[0]/d*h,r;if(v){if(1===f[1])return r;if(f[1]<4&&e!==v)return r}}return[0,0]});b[r]=u;var x=i.map(function(t,n){return Jt(t.pos,b[n])});return e.prevDist=[a,s],Fc(t,n,u,l,i,x),!0},dragControlEnd:function(t,n){var e=t.state;e.borderRadiusState="";var r=n.datas,i=n.isDouble;if(!r.isRound)return!1;var o,a,s,u,l,c,f,p,d,h,g,v,m,b,x,E,S,y=e.width,M=e.height,C=r.isControl,D=r.controlIndex,R=r.isLine,w=r.lineIndex,O=r.controlPoses,P=O.map(function(t){return t.pos}),G=P.length,B=t.props.roundClickable;return i&&(void 0===B||B)&&(C?wc(O,P,D,0):R&&(a=(o=Ru(t,n))[0],s=o[1],l=P,c=w,f=a,p=s,d=y,h=M,g=Pc(u=O),v=g.horizontals,m=g.verticals,b=v.length,x=m.length,S=E=-1,0===c?0===b?E=0:1===b&&(E=1):3===c&&(b<=2?E=2:b<=3&&(E=3)),2===c?0===x?S=0:x<4&&(S=3):1===c&&(x<=1?S=1:x<=2&&(S=2)),Oc(u,l,0,E,S,f,p,d,h)),G!==O.length&&Fc(t,n,[0,0],[0,0],O,P)),au(t,"onRoundEnd",ou(t,n,{})),!(e.borderRadiusState="")},unset:function(t){t.state.borderRadiusState=""}},_c={isPinch:!0,name:"beforeRenderable",props:{},events:{onBeforeRenderStart:"beforeRenderStart",onBeforeRender:"beforeRender",onBeforeRenderEnd:"beforeRenderEnd",onBeforeRenderGroupStart:"beforeRenderGroupStart",onBeforeRenderGroup:"beforeRenderGroup",onBeforeRenderGroupEnd:"beforeRenderGroupEnd"},setTransform:function(t,n){var e=t.state,r=e.is3d,i=e.target,o=e.targetMatrix,a=null==i?void 0:i.style.transform,s=r?"matrix3d("+o.join(",")+")":"matrix("+nn(o,!0)+")";n.datas.startTransforms=a&&"none"!==a?Ha(a):[s]},resetTransform:function(t,n){n.datas.nextTransforms=n.datas.startTransforms,n.datas.nextTransformAppendedIndexes=[]},fillDragStartParams:function(t,n){return iu(t,n,{setTransform:function(t){n.datas.startTransforms=_a(t)?t:Ha(t)},isPinch:!!n.isPinch})},fillDragParams:function(t,n){return iu(t,n,{isPinch:!!n.isPinch})},dragStart:function(t,n){this.setTransform(t,n),au(t,"onBeforeRenderStart",this.fillDragStartParams(t,n))},drag:function(t,n){this.resetTransform(t,n),au(t,"onBeforeRender",iu(t,n,{isPinch:!!n.isPinch}))},dragEnd:function(t,n){au(t,"onBeforeRenderEnd",iu(t,n,{isPinch:!!n.isPinch,isDrag:n.isDrag}))},dragGroupStart:function(t,n){var r=this;this.dragStart(t,n);var e=Mu(t,"beforeRenderable",n),i=t.moveables,o=e.map(function(t,n){var e=i[n];return r.setTransform(e,t),r.fillDragStartParams(e,t)});au(t,"onBeforeRenderGroupStart",iu(t,n,{isPinch:!!n.isPinch,targets:t.props.targets,setTransform:function(){},events:o}))},dragGroup:function(t,n){var r=this;this.drag(t,n);var e=Mu(t,"beforeRenderable",n),i=t.moveables,o=e.map(function(t,n){var e=i[n];return r.resetTransform(e,t),r.fillDragParams(e,t)});au(t,"onBeforeRenderGroup",iu(t,n,{isPinch:!!n.isPinch,targets:t.props.targets,events:o}))},dragGroupEnd:function(t,n){this.dragEnd(t,n),au(t,"onBeforeRenderGroupEnd",iu(t,n,{isPinch:!!n.isPinch,isDrag:n.isDrag,targets:t.props.targets}))},dragControlStart:function(t,n){return this.dragStart(t,n)},dragControl:function(t,n){return this.drag(t,n)},dragControlEnd:function(t,n){return this.dragEnd(t,n)},dragGroupControlStart:function(t,n){return this.dragGroupStart(t,n)},dragGroupControl:function(t,n){return this.dragGroup(t,n)},dragGroupControlEnd:function(t,n){return this.dragGroupEnd(t,n)}},Yc={name:"renderable",props:{},events:{onRenderStart:"renderStart",onRender:"render",onRenderEnd:"renderEnd",onRenderGroupStart:"renderGroupStart",onRenderGroup:"renderGroup",onRenderGroupEnd:"renderGroupEnd"},dragStart:function(t,n){au(t,"onRenderStart",iu(t,n,{isPinch:!!n.isPinch}))},drag:function(t,n){au(t,"onRender",iu(t,n,{isPinch:!!n.isPinch}))},dragEnd:function(t,n){au(t,"onRenderEnd",iu(t,n,{isPinch:!!n.isPinch,isDrag:n.isDrag}))},dragGroupStart:function(t,n){au(t,"onRenderGroupStart",iu(t,n,{isPinch:!!n.isPinch,targets:t.props.targets}))},dragGroup:function(t,n){au(t,"onRenderGroup",iu(t,n,{isPinch:!!n.isPinch,targets:t.props.targets}))},dragGroupEnd:function(t,n){au(t,"onRenderGroupEnd",iu(t,n,{isPinch:!!n.isPinch,isDrag:n.isDrag,targets:t.props.targets}))},dragControlStart:function(t,n){return this.dragStart(t,n)},dragControl:function(t,n){return this.drag(t,n)},dragControlEnd:function(t,n){return this.dragEnd(t,n)},dragGroupControlStart:function(t,n){return this.dragGroupStart(t,n)},dragGroupControl:function(t,n){return this.dragGroup(t,n)},dragGroupControlEnd:function(t,n){return this.dragGroupEnd(t,n)}};function qc(r,t,n,e,i,o,a){var s="Start"===i,u=r.state.target,l=o.isRequest;if(!u||s&&-1<e.indexOf("Control")&&!l&&r.areaElement===o.inputEvent.target)return!1;var c=""+n+e+i,f=""+n+e+"Condition",p="End"===i,d=-1<i.indexOf("After"),h=!(!s||r.targetGesto&&r.controlGesto&&r.targetGesto.isFlag()&&r.controlGesto.isFlag());h&&r.updateRect(i,!0,!1),""!==i||d||l||pu(r.state,o);var g,v=gs([_c],r[t],[Yc]);if(l&&(g=o.requestAble,v.some(function(t){return t.name===g})||v.push.apply(v,r.props.ables.filter(function(t){return t.name===g}))),!v.length)return!1;var m=v.filter(function(t){return t[c]}),b=o.datas;h&&m.forEach(function(t){t.unset&&t.unset(r)});var x,E=o.inputEvent;p&&E&&(x=document.elementFromPoint(o.clientX,o.clientY)||E.target);var S=m.filter(function(t){var n=t.name,e=b[n]||(b[n]={});return s&&(e.isEventStart=!t[f]||t[f](r,o)),!!e.isEventStart&&t[c](r,hs(hs({},o),{datas:e,originalDatas:b,inputTarget:x}))}).length,y=s&&m.length&&!S;return(p||y)&&(r.state.gesto=null,r.moveables&&r.moveables.forEach(function(t){t.state.gesto=null})),h&&y&&m.forEach(function(t){t.unset&&t.unset(r)}),!r.isUnmounted&&!y&&((!s&&S&&!a||p)&&(r.updateRect(i,!0,!1),r.forceUpdate()),s||p||d||!S||a||qc(r,t,n,e,i+"After",o),!0)}function Xc(e,t,n){var r=e.controlBox.getElement(),i=[];i.push(r),e.props.dragArea&&!e.props.dragTarget||i.push(t);function o(t){var n=t.inputEvent.target;return n===e.areaElement||!e.isMoveableElement(n)||ss(n,"moveable-area")||ss(n,"moveable-padding")}return Wc(e,i,"targetAbles",n,{dragStart:o,pinchStart:o})}function Wc(i,t,o,a,s){void 0===s&&(s={});var n=i.props,e=n.pinchOutside,r=n.pinchThreshold,u={container:window,pinchThreshold:r,pinchOutside:e},l=new fe(t,u);return["drag","pinch"].forEach(function(r){["Start","","End"].forEach(function(e){l.on(""+r+e,function(t){var n=t.eventType;(!s[n]||s[n](t))&&qc(i,o,r,a,e,t)||t.stop()})})}),l}var Lc=function(){function t(t,n,e){var i=this;this.target=t,this.moveable=n,this.eventName=e,this.ables=[],this.onEvent=function(n){var e=i.eventName,r=i.moveable;r.state.disableNativeEvent||i.ables.forEach(function(t){t[e](r,{inputEvent:n})})},this.target.addEventListener(this.eventName.toLowerCase(),this.onEvent)}var n=t.prototype;return n.setAbles=function(t){this.ables=t},n.destroy=function(){this.target.removeEventListener(this.eventName.toLowerCase(),this.onEvent),this.target=null,this.moveable=null},t}(),Hc=function(t){function n(){this.constructor=e}var e,r;function i(){var n=null!==t&&t.apply(this,arguments)||this;return n.state=hs({container:null,gesto:null,renderPoses:[[0,0],[0,0],[0,0],[0,0]],disableNativeEvent:!1},Ks(null)),n.enabledAbles=[],n.targetAbles=[],n.controlAbles=[],n.rotation=0,n.scale=[1,1],n.isUnmounted=!1,n.events={mouseEnter:null,mouseLeave:null},n.onPreventClick=function(t){t.stopPropagation(),us(window,"click",n.onPreventClick,!0)},n}ds(e=i,r=t),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n);var o=i.prototype;return o.render=function(){var t=this.props,n=this.state,e=t.parentPosition,r=t.className,i=t.target,o=t.zoom,a=t.cspNonce,s=t.translateZ,u=t.cssStyled,l=t.portalContainer;this.checkUpdate(),this.updateRenderPoses();var c=e||{left:0,top:0},f=c.left,p=c.top,d=n.left,h=n.top,g=n.target,v=n.direction,m=t.targets,b=(m&&m.length||i)&&g,x=this.isDragging(),E={};return this.getEnabledAbles().forEach(function(t){E["data-able-"+t.name.toLowerCase()]=!0}),B(u,hs({cspNonce:a,ref:S(this,"controlBox"),className:Os("control-box",-1===v?"reverse":"",x?"dragging":"")+" "+r},E,{onClick:this.onPreventClick,portalContainer:l,style:{position:"absolute",display:b?"block":"none",transform:"translate3d("+(d-f)+"px, "+(h-p)+"px, "+s+")","--zoom":o,"--zoompx":o+"px"}}),this.renderAbles(),this._renderLines())},o.componentDidMount=function(){this.controlBox.getElement();var t=this.props,n=t.parentMoveable,e=t.container,r=t.wrapperMoveable;this.updateEvent(t),this.updateNativeEvents(t),e||n||r||this.updateRect("",!1,!0),this.updateCheckInput()},o.componentDidUpdate=function(t){this.updateNativeEvents(t),this.updateEvent(t),this.updateCheckInput()},o.componentWillUnmount=function(){this.isUnmounted=!0,ru(this,"targetGesto"),ru(this,"controlGesto");var t=this.events;for(var n in t){var e=t[n];e&&e.destroy()}},o.getContainer=function(){var t=this.props,n=t.parentMoveable,e=t.wrapperMoveable;return t.container||e&&e.getContainer()||n&&n.getContainer()||this.controlBox.getElement().parentElement},o.isMoveableElement=function(t){return t&&-1<(t.getAttribute("class")||"").indexOf(Ss)},o.dragStart=function(t){return this.targetGesto&&this.targetGesto.triggerDragStart(t),this},o.hitTest=function(t){var n,e,r=this.state,i=r.target,o=r.pos1,a=r.pos2,s=r.pos3,u=r.pos4,l=r.targetClientRect;if(!i)return 0;var c=(e=t instanceof Element?{left:(n=t.getBoundingClientRect()).left,top:n.top,width:n.width,height:n.height}:hs({width:0,height:0},t)).left,f=e.top,p=e.width,d=e.height,h=Fn([o,a,u,s],l),g=Ln(h,[[c,f],[c+p,f],[c+p,f+d],[c,f+d]]),v=Nn(h);return g&&v?Math.min(100,g/v*100):0},o.isInside=function(t,n){var e=this.state,r=e.target,i=e.pos1,o=e.pos2,a=e.pos3,s=e.pos4,u=e.targetClientRect;return!!r&&_n([t,n],Fn([i,o,s,a],u))},o.updateRect=function(t,n,e){void 0===e&&(e=!0);var r=this.props,i=r.parentMoveable,o=this.state.target||this.props.target,a=this.getContainer(),s=i?i.props.rootContainer:r.rootContainer;this.updateState(Ks(this.controlBox&&this.controlBox.getElement(),o,a,a,s||a),!i&&e)},o.isTargetChanged=function(t,n){var e=this.props,r=e.dragTarget||e.target,i=t.dragTarget||t.target,o=e.dragArea,a=t.dragArea;return!o&&i!==r||(n||o)&&a!==o},o.updateNativeEvents=function(t){var i,o=this,a=this.props.dragArea?this.areaElement:this.state.target,s=this.events,n=function(t){if(Object.keys)return Object.keys(t);var n=[];for(var e in n)n.push(e);return n}(s);if(this.isTargetChanged(t))for(var e in s){var r=s[e];r&&r.destroy(),s[e]=null}a&&(i=this.enabledAbles,n.forEach(function(t){var n=uu(i,[t]),e=0<n.length,r=s[t];e?(r||(r=new Lc(a,o,t),s[t]=r),r.setAbles(n)):r&&(r.destroy(),s[t]=null)}))},o.updateEvent=function(t){var n=this.controlBox.getElement(),e=this.targetAbles.length,r=this.controlAbles.length,i=this.props,o=i.dragTarget||i.target,a=this.isTargetChanged(t,!0),s=!e&&this.targetGesto||a;s&&(ru(this,"targetGesto"),this.updateState({gesto:null})),r||ru(this,"controlGesto"),o&&e&&!this.targetGesto&&(this.targetGesto=Xc(this,o,"")),!this.controlGesto&&r&&(this.controlGesto=Wc(this,n,"controlAbles","Control")),s&&this.unsetAbles()},o.isDragging=function(){return!!this.targetGesto&&this.targetGesto.isFlag()||!!this.controlGesto&&this.controlGesto.isFlag()},o.updateTarget=function(t){this.updateRect(t,!0)},o.getRect=function(){var t=this.state,n=eu(this.state),e=n[0],r=n[1],i=n[2],o=n[3],a=qs(n),s=t.width,u=t.height,l=a.width,c=a.height,f=a.left,p=a.top,d=[t.left,t.top],h=Jt(d,t.origin);return{width:l,height:c,left:f,top:p,pos1:e,pos2:r,pos3:i,pos4:o,offsetWidth:s,offsetHeight:u,beforeOrigin:Jt(d,t.beforeOrigin),origin:h,transformOrigin:t.transformOrigin,rotation:this.getRotation()}},o.getManager=function(){return this},o.getRotation=function(){var t,n,e=this.state,r=e.pos1,i=e.pos2,o=e.direction;return t=o,n=es(r,i)/Math.PI*180,n=0<=(n=0<=t?n:180-n)?n:360+n},o.request=function(n,t,e){void 0===t&&(t={});var r=this.props,i=r.ables,o=r.groupable,a=i.filter(function(t){return t.name===n})[0];if(this.isDragging()||!a||!a.request)return{request:function(){return this},requestEnd:function(){return this}};var s=this,u=a.request(this),l=e||t.isInstant,c=u.isControl?"controlAbles":"targetAbles",f=(o?"Group":"")+(u.isControl?"Control":""),p={request:function(t){return qc(s,c,"drag",f,"",hs(hs({},u.request(t)),{requestAble:n,isRequest:!0}),l),this},requestEnd:function(){return qc(s,c,"drag",f,"End",hs(hs({},u.requestEnd()),{requestAble:n,isRequest:!0}),l),this}};return qc(s,c,"drag",f,"Start",hs(hs({},u.requestStart(t)),{requestAble:n,isRequest:!0}),l),l?p.request(t).requestEnd():p},o.destroy=function(){this.componentWillUnmount()},o.updateRenderPoses=function(){var t=this.state,n=this.props,e=t.originalBeforeOrigin,r=t.transformOrigin,i=t.allMatrix,o=t.is3d,a=t.pos1,s=t.pos2,u=t.pos3,l=t.pos4,c=t.left,f=t.top,p=n.padding||{},d=p.left,h=void 0===d?0:d,g=p.top,v=void 0===g?0:g,m=p.bottom,b=void 0===m?0:m,x=p.right,E=void 0===x?0:x,S=o?4:3,y=n.groupable?e:Jt(e,[c,f]);t.renderPoses=[Jt(a,du(i,[-h,-v],r,y,S)),Jt(s,du(i,[E,-v],r,y,S)),Jt(u,du(i,[-h,b],r,y,S)),Jt(l,du(i,[E,b],r,y,S))]},o.checkUpdate=function(){var t=this.props,n=t.target,e=t.container,r=t.parentMoveable,i=this.state,o=i.target,a=i.container;(o||n)&&(this.updateAbles(),lu(o,n)&&lu(a,e)||(this.updateState({target:n,container:e}),r||!e&&!this.controlBox||this.updateRect("End",!1,!1)))},o.triggerEvent=function(t,n){var e=this.props[t];return e&&e(n)},o.useCSS=function(t,n){var e,r,i=this.props.customStyledMap,o=t+n;return i[o]||(i[o]=(e=t,r=Ee(n),function(n){function t(){var t=null!==n&&n.apply(this,arguments)||this;return t.injector=r,t.tag=e,t}return cs(t,n),t}(ps))),i[o]},o.unsetAbles=function(){var n=this;this.targetAbles.filter(function(t){return!!t.unset&&(t.unset(n),!0)}).length&&this.forceUpdate()},o.updateAbles=function(t,n){void 0===t&&(t=this.props.ables),void 0===n&&(n="");var e=this.props,r=e.triggerAblesSimultaneously,i=t.filter(function(t){return t&&(t.always||e[t.name])}),o="drag"+n+"ControlStart",a=uu(i,["drag"+n+"Start","pinch"+n+"Start"],r),s=uu(i,[o],r);this.enabledAbles=i,this.targetAbles=a,this.controlAbles=s},o.updateState=function(t,n){if(n)this.setState(t);else{var e=this.state;for(var r in t)e[r]=t[r]}},o.getEnabledAbles=function(){var n=this.props;return n.ables.filter(function(t){return t&&n[t.name]})},o.renderAbles=function(){var i,o,a,s,t,n=this,e=this.props.triggerAblesSimultaneously,r={createElement:B};return t=uu(this.getEnabledAbles(),["render"],e).map(function(t){return(0,t.render)(n,r)||[]}),i=t.reduce(function(t,n){return t.concat(n)},[]).filter(function(t){return t}),o=function(t){return t.key},a=[],s={},i.forEach(function(t,n){var e=o(t,n,i),r=s[e];r||(r=[],s[e]=r,a.push(r)),r.push(t)}),a.map(function(t){return t[0]})},o.updateCheckInput=function(){this.targetGesto&&(this.targetGesto.options.checkInput=this.props.checkInput)},o._renderLines=function(){var t=this.props,n=t.edge,e=t.zoom;if(t.hideDefaultLines)return[];var r=this.state.renderPoses,i={createElement:B};return[Vl(i,n?"n":"",r[0],r[1],e,0),Vl(i,n?"e":"",r[1],r[3],e,1),Vl(i,n?"w":"",r[0],r[2],e,2),Vl(i,n?"s":"",r[2],r[3],e,3)]},i.defaultProps={target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,edge:!1,parentMoveable:null,wrapperMoveable:null,parentPosition:null,portalContainer:null,ables:[],pinchThreshold:20,dragArea:!1,passDragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0,checkInput:!1,groupable:!1,hideDefaultLines:!1,cspNonce:"",translateZ:0,cssStyled:null,customStyledMap:{},props:{}},i}(q),Vc={name:"groupable",props:{defaultGroupRotate:Number,defaultGroupOrigin:String,groupable:Boolean},events:{},render:function(e,r){var t=e.props.targets||[];e.moveables=[];var n=e.state,i={left:n.left,top:n.top};return t.map(function(t,n){return r.createElement(Hc,{key:"moveable"+n,ref:o(e,"moveables",n),target:t,origin:!1,cssStyled:e.props.cssStyled,customStyledMap:e.props.customStyledMap,parentMoveable:e,parentPosition:i})})}},Uc=vs("clickable",{props:{},events:{onClick:"click",onClickGroup:"clickGroup"},always:!0,dragStart:function(t,n){var e,r,i,o;n.isRequest||(e=window,r="click",i=t.onPreventClick,o=!0,e.addEventListener(r,i,o))},dragControlStart:function(t,n){this.dragStart(t,n)},dragGroupStart:function(t,n){this.dragStart(t,n),n.datas.inputTarget=n.inputEvent&&n.inputEvent.target},dragEnd:function(t,n){this.endEvent(t);var e,r=t.state.target,i=n.inputEvent,o=n.inputTarget;n.isDrag||this.unset(t),i&&o&&!n.isDrag&&!t.isMoveableElement(o)&&(e=r.contains(o),au(t,"onClick",iu(t,n,{isDouble:n.isDouble,inputTarget:o,isTarget:r===o,containsTarget:e})))},dragGroupEnd:function(t,n){this.endEvent(t);var e,r,i,o,a=n.inputEvent,s=n.inputTarget;a&&s&&!n.isDrag&&!t.isMoveableElement(s)&&n.datas.inputTarget!==s&&(i=-1<(r=(e=t.props.targets).indexOf(s)),o=!1,-1===r&&(o=-1<(r=Za(e,function(t){return t.contains(s)}))),au(t,"onClickGroup",iu(t,n,{isDouble:n.isDouble,targets:e,inputTarget:s,targetIndex:r,isTarget:i,containsTarget:o})))},dragControlEnd:function(t){this.endEvent(t)},dragGroupControlEnd:function(t){this.endEvent(t)},endEvent:function(t){var n=this;requestAnimationFrame(function(){n.unset(t)})},unset:function(t){us(window,"click",t.onPreventClick,!0)}});function $c(t){var n=t.originalDatas.draggable;return n||(t.originalDatas.draggable={},n=t.originalDatas.draggable),hs(hs({},t),{datas:n})}var Zc=vs("edgeDraggable",{dragControlCondition:function(t,n){if(!t.props.edgeDraggable||!n.inputEvent)return!1;var e=n.inputEvent.target;return ss(e,Os("direction"))&&ss(e,Os("line"))},dragControlStart:function(t,n){return Ll.dragStart(t,$c(n))},dragControl:function(t,n){return Ll.drag(t,$c(n))},dragControlEnd:function(t,n){return Ll.dragEnd(t,$c(n))},dragGroupControlCondition:function(t,n){if(!t.props.edgeDraggable||!n.inputEvent)return!1;var e=n.inputEvent.target;return ss(e,Os("direction"))&&ss(e,Os("line"))},dragGroupControlStart:function(t,n){return Ll.dragGroupStart(t,$c(n))},dragGroupControl:function(t,n){return Ll.dragGroup(t,$c(n))},dragGroupControlEnd:function(t,n){return Ll.dragGroupEnd(t,$c(n))},unset:function(t){t.state.dragInfo=null}}),Kc={name:"individualGroupable",props:{individualGroupable:Boolean},events:{}},Jc=Ca,Qc=He,tf=Ma,nf=[_c,vc,Wl,Eu,Ll,Zc,nc,ec,rc,ac,gc,mc,dc,Ic,Ac,jc,Vc,Kc,Uc,pc,Yc].reduce(function(t,n){return hs(hs({},t),n.props)},{}),ef=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return i(n,t),n}(function(s){function t(t,n){void 0===n&&(n={});var e=s.call(this)||this;e.tempElement=document.createElement("div");var r=u({container:t||document.body},n),i={};tf.forEach(function(n){i[("on "+n).replace(/[\s-_]([a-z])/g,function(t,n){return n.toUpperCase()})]=function(t){return e.trigger(n,t)}}),V(B(Ga,u({ref:S(e,"innerMoveable"),parentElement:t},r,i)),e.tempElement);var o,a=r.target;return o=a,Array.isArray(o)&&1<a.length&&e.updateRect(),e}i(t,s);var n=t.prototype;return n.setState=function(t,n){this.innerMoveable.setState(t,n)},n.destroy=function(){V(null,this.tempElement),this.off(),this.tempElement=null,this.innerMoveable=null},n.getMoveable=function(){return this.innerMoveable.moveable},function(t,n,e,r){var i,o=arguments.length,a=o<3?n:null===r?r=Object.getOwnPropertyDescriptor(n,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,n,e,r);else for(var s=t.length-1;0<=s;s--)(i=t[s])&&(a=(o<3?i(a):3<o?i(n,e,a):i(n,e))||a);return 3<o&&a&&Object.defineProperty(n,e,a),a}([a(Qc,function(t,r){t[r]||(t[r]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var e=this.getMoveable();if(e&&e[r])return e[r].apply(e,t)})}),a(Jc,function(t,e){Object.defineProperty(t,e,{get:function(){return this.getMoveable().props[e]},set:function(t){var n;this.setState(((n={})[e]=t,n))},enumerable:!0,configurable:!0})})],t)}(Un));var rf={__proto__:null,default:ef,PROPERTIES:Jc,METHODS:Qc,EVENTS:tf,PROPS_MAP:nf,getElementInfo:function(t,n,e){return r=n,void 0===(i=e)&&(i=r),er(t,r,i,!0);var r,i},makeAble:Ge};for(var of in rf)ef[of]=rf[of];return ef});
//# sourceMappingURL=moveable.min.js.map