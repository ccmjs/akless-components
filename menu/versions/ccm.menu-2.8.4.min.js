(()=>{const component={name:"menu",version:[2,8,4],ccm:"https://ccmjs.github.io/ccm/versions/ccm-24.0.1.js",config:{css:["ccm.load","https://ccmjs.github.io/akless-components/menu/resources/default.css"],data:{store:["ccm.store"]},html:["ccm.load","https://ccmjs.github.io/akless-components/menu/resources/templates.html"]},Instance:function(){let $;this.init=(async()=>{if(!this.inner)return;const entries=[];[...this.inner.children].forEach(child=>{if(child.tagName&&child.tagName==="ENTRY")entries.push({title:child.getAttribute("title"),content:child.innerHTML})});this.data={entries:entries}});this.ready=(async()=>{$=this.ccm.helper;this.logger&&this.logger.log("ready",$.privatize(this,true))});this.start=(async()=>{const dataset=await $.dataset(this.data);this.logger&&this.logger.log("start",$.clone(dataset));$.setContent(this.element,$.html(this.html.main,{onprev:()=>(this.element.querySelector(".entry.active").previousElementSibling||this.element.querySelector("#entries").lastElementChild).click(),onnext:()=>(this.element.querySelector(".entry.active").nextElementSibling||this.element.querySelector("#entries").firstElementChild).click()}));const entries_elem=this.element.querySelector("#entries");const content_elem=this.element.querySelector("#content");const self=this;dataset.entries&&dataset.entries.forEach(renderMenuEntry);if(this.selected&&(!this.routing||!this.routing.get())){if(typeof this.selected==="string")entries_elem.querySelector("#entry-"+this.selected).click();else entries_elem.querySelectorAll(".entry")[this.selected-1].click()}const lang_elem=this.element.querySelector("#lang");if(self.lang){await self.lang.start();lang_elem&&$.setContent(lang_elem,self.lang.root);self.lang.translate()}else $.removeElement(lang_elem);this.routing&&this.routing.define({entry:id=>entries_elem.querySelector("#entry-"+id).click()});this.routing&&this.routing.refresh();function renderMenuEntry(entry_data,i){if(typeof entry_data==="string")entry_data={title:entry_data};if(!entry_data.id)entry_data.id=i+1;const entry_elem=$.html(self.html.entry,{id:"entry-"+entry_data.id,click:onClick});const title_elem=entry_elem.querySelector(".title");if(title_elem)if(self.lang)title_elem.setAttribute("data-"+self.lang.component.name,entry_data.title);else $.setContent(title_elem,$.html(entry_data.title));if(entry_data.disabled){entry_elem.disabled=true;entry_elem.classList.add("disabled");entry_elem.removeEventListener("click",onClick)}entries_elem.appendChild(entry_elem);async function onClick(){self.routing&&self.routing.set("entry-"+entry_data.id);const selected=entry_elem.classList.contains("selected");let event_data={title:entry_data.title,id:entry_data.id,nr:i+1};const selected_entry=entries_elem.querySelector(".entry.selected");if(selected_entry){selected_entry.classList.remove("selected","active");selected_entry.firstChild.classList.remove("active")}if(!selected||!self.deselectable){entry_elem.classList.add("selected","active");entry_elem.firstChild.classList.add("active")}self.deselectable&&$.setContent(content_elem,"");if(selected&&!self.trigger_selected)return;self.logger&&self.logger.log("click",$.clone(event_data));const title_elem=self.element.querySelector("#title");if(title_elem){if(self.lang)title_elem.setAttribute("data-"+self.lang.component.name,entry_data.title);else $.setContent(title_elem,$.html(entry_data.title));title_elem.classList.remove("fade");void title_elem.offsetWidth;title_elem.classList.add("fade")}await renderContent();performActions();self.lang&&self.lang.translate();async function renderContent(){entry_data.content=await $.solveDependency(entry_data.content);if(!entry_data.content)return;if($.isInstance(entry_data.content)){await entry_data.content.start();entry_data.content.parent=self;$.setContent(content_elem,entry_data.content.root)}else if(self.content)await self.content.start({root:content_elem,inner:entry_data.content});else $.setContent(content_elem,$.html(entry_data.content));content_elem.classList.remove("fade");void content_elem.offsetWidth;content_elem.classList.add("fade")}function performActions(){event_data=Object.assign(event_data,entry_data);event_data.content=content_elem;event_data.entry=entry_elem;delete event_data.actions;if(entry_data.actions)if(typeof entry_data.actions==="function")entry_data.actions($.clone(event_data),self);else entry_data.actions.forEach(action=>$.action(action));self.onclick&&$.action([self.onclick,$.clone(event_data),self])}}}});this.select=(entry=>{const element=typeof entry==="string"?this.element.querySelector("#entry-"+entry):this.element.querySelectorAll(".entry")[entry-1];if(element.classList.contains("active")&&!this.trigger_selected)return;const selected_entry=this.element.querySelector(".selected.active");if(selected_entry){selected_entry.classList.remove("selected","active");selected_entry.firstChild.classList.remove("active")}entry&&element.click()})}};let b="ccm."+component.name+(component.version?"-"+component.version.join("."):"")+".js";if(window.ccm&&null===window.ccm.files[b])return window.ccm.files[b]=component;(b=window.ccm&&window.ccm.components[component.name])&&b.ccm&&(component.ccm=b.ccm);"string"===typeof component.ccm&&(component.ccm={url:component.ccm});let c=(component.ccm.url.match(/(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)/)||["latest"])[0];if(window.ccm&&window.ccm[c])window.ccm[c].component(component);else{var a=document.createElement("script");document.head.appendChild(a);component.ccm.integrity&&a.setAttribute("integrity",component.ccm.integrity);component.ccm.crossorigin&&a.setAttribute("crossorigin",component.ccm.crossorigin);a.onload=function(){window.ccm[c].component(component);document.head.removeChild(a)};a.src=component.ccm.url}})();