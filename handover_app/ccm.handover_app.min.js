(()=>{const component={name:"handover_app",ccm:"https://ccmjs.github.io/ccm/versions/ccm-25.0.0.js",config:{css:["ccm.load","https://ccmjs.github.io/akless-components/handover_app/resources/styles.css","https://ccmjs.github.io/akless-components/libs/bootstrap-4/css/bootstrap.min.css",{context:"head",url:"https://ccmjs.github.io/akless-components/libs/bootstrap-4/css/bootstrap.min.css"}],data:{},enabled:{embed_code:true,app_id:true,app_url:true,qr_code:true,download_app:true,bookmarklet:true,ibook_widget:true,scorm:true},helper:["ccm.load","https://ccmjs.github.io/akless-components/modules/versions/helper-4.0.1.mjs"],html:["ccm.load","https://ccmjs.github.io/akless-components/handover_app/resources/template.html"]},Instance:function(){let $;this.init=(async()=>{$=Object.assign({},this.ccm.helper,this.helper)});this.ready=(async()=>{if($.isDatastore(this.data.store)&&!this.data.store.source().name){this.data=await this.data.store.get(this.data.key);delete this.data.key;delete this.data._}this.logger&&this.logger.log("ready",$.privatize(this,true))});this.start=(async()=>{const dataset=await $.dataset(this.data);this.logger&&this.logger.log("start",$.clone(dataset));$.setContent(this.element,$.html(this.html));let app_id=dataset.key;const embed_code=this.component_url&&$.embedCode(this.component_url,this.data);const app_url=this.component_url&&$.appURL(this.component_url,this.data);if(this.enabled.embed_code&&embed_code){this.element.querySelector("#embed_code-input").value=embed_code;this.element.querySelector("#embed_copy").addEventListener("click",()=>$.copyToClipboard(this.element.querySelector("#embed_code-input")))}else $.remove(this.element.querySelector("#embed_code"));if(this.enabled.app_id&&app_id){this.element.querySelector("#app_id-input").value=app_id;this.element.querySelector("#id_copy").addEventListener("click",()=>$.copyToClipboard(this.element.querySelector("#app_id-input")))}else $.remove(this.element.querySelector("#app_id"));if(this.enabled.app_url&&app_url){this.element.querySelector("#app_url-input").value=app_url;this.element.querySelector("#url_copy").addEventListener("click",()=>$.copyToClipboard(this.element.querySelector("#app_url-input")))}else $.remove(this.element.querySelector("#app_url"));if(this.enabled.qr_code&&app_url&&this.qr_code&&qrcode){try{const demoQRCode=qrcode(0,"M");demoQRCode.addData(app_url);demoQRCode.make();const qrCodeSVGTag=document.createElement("div");qrCodeSVGTag.innerHTML=demoQRCode.createImgTag();$.setContent(this.element.querySelector("#qr_code"),qrCodeSVGTag.firstChild)}catch(e){$.remove(this.element.querySelector("#qr_code"))}}else $.remove(this.element.querySelector("#qr_code"));if(this.enabled.download_app&&embed_code)this.element.querySelector("#download").addEventListener("click",()=>$.downloadApp(embed_code));else $.remove(this.element.querySelector("#download"));if(this.enabled.bookmarklet&&this.window){const window=await this.window.instance({app:["ccm.start",this.component_url,$.clone(dataset)]});this.element.querySelector("#bookmarklet").setAttribute("href",window.bookmarklet())}else $.remove(this.element.querySelector("#bookmarklet"));if(this.enabled.ibook_widget&&embed_code)this.element.querySelector("#ibook").addEventListener("click",()=>$.iBookWidget(embed_code));else $.remove(this.element.querySelector("#ibook"));if(this.enabled.scorm&&embed_code)this.element.querySelector("#scorm").addEventListener("click",()=>$.scorm(embed_code));else $.remove(this.element.querySelector("#scorm"))})}};let b="ccm."+component.name+(component.version?"-"+component.version.join("."):"")+".js";if(window.ccm&&null===window.ccm.files[b])return window.ccm.files[b]=component;(b=window.ccm&&window.ccm.components[component.name])&&b.ccm&&(component.ccm=b.ccm);"string"===typeof component.ccm&&(component.ccm={url:component.ccm});let c=(component.ccm.url.match(/(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)/)||["latest"])[0];if(window.ccm&&window.ccm[c])window.ccm[c].component(component);else{var a=document.createElement("script");document.head.appendChild(a);component.ccm.integrity&&a.setAttribute("integrity",component.ccm.integrity);component.ccm.crossorigin&&a.setAttribute("crossorigin",component.ccm.crossorigin);a.onload=function(){window.ccm[c].component(component);document.head.removeChild(a)};a.src=component.ccm.url}})();